function loadJS(e,o,t){var i=!!window.ActiveXObject,n=i&&!window.XMLHttpRequest,a=document.createElement("script"),r=n?document.documentElement:document.getElementsByTagName("head")[0];a.type="text/javascript",a.async=!0,a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(a.onreadystatechange=null,o&&o())}:a.onload=function(){o&&o()},a.src=e,t?document.getElementById(t).appendChild(a):r.insertBefore(a,r.firstChild)}var isDebug=!1;$.fn.extend({isOnScreenVisible:function(){if(!$("body").hasClass("post-template"))return!1;var e=$(window),o={top:e.scrollTop(),left:e.scrollLeft()};o.right=o.left+e.width(),o.bottom=o.top+e.height();var t=this.offset();return t.right=t.left+this.outerWidth(),t.bottom=t.top+this.outerHeight(),!(o.right<t.left||o.left>t.right||o.bottom<t.top||o.top>t.bottom)}});var General={isMobile:!1,isWechat:!1,viewWidth:$(window).width(),absUrl:location.protocol+"//"+location.host,init:function(){var e=window,o=(e.document,navigator.userAgent.toLowerCase()),t=e.navigator.appVersion.match(/android/gi);e.navigator.appVersion.match(/iphone/gi);"micromessenger"==o.match(/MicroMessenger/i)&&(General.isWechat=!0,$("body").addClass("wechat-webview")),t&&(General.isMobile=!0),$("body").hasClass("post-template")&&(General.updateImageWidth(),General.rewardLoader()),General.webFontLoader(),General.scrollToPos()},updateImageWidth:function(){function e(){var e=$(this),o=t.outerWidth(),i=this.naturalWidth;i>=o?e.addClass("full-img"):e.removeClass("full-img")}function o(){i.each(e)}var t=$(".post-content"),i=$(".single-post-inner img").on("load",e);o()},webFontLoader:function(){WebFontConfig={loading:function(){},custom:{families:["Exo","iconfont","fontawesome"],urls:[General.absUrl+"/assets/css/font.min.css",General.absUrl+"/assets/css/font-awesome.min.css"]}},loadJS(General.absUrl+"/assets/js/webfont.js",function(){WebFont.load({custom:{families:["Exo","iconfont","fontawesome"]}})})},scrollToPos:function(e){var o="我要飞到最高",t=(e||$(window).height(),$('<a href="#" id="to-top" title="'+o+'"> <div class="to-top-wrap"></div></a>').appendTo("body"));$(window).scroll(function(){$(window).scrollTop()>$(window).height()?t.fadeIn(500):t.fadeOut(500)}),t.click(function(e){e.preventDefault(),$("html,body").animate({scrollTop:0},666,function(){window.location.hash="#"})})},urlIconlize:function(e){var o,t,i={twitter:"iconfont-twitter icon-iconfonttwitter",qzone:"iconfont-qzone icon-qzone",weibo:"iconfont-weibo icon-iconfontweibo",facebook:"iconfont-facebook icon-iconfontfacebook",github:"iconfont-github icon-github",douban:"iconfont-douban icon-iconfontdouban",google:"iconfont-google icon-iconfontgoogle",luolei:"iconfont-luolei icon-luolei",dribble:"iconfont-dribble icon-dribbblecircled",v2ex:"iconfont-v2ex icon-iconfontv2ex",zhihu:"iconfont-zhihu icon-iconfontzhihu",wikipedia:"iconfont-wikipedia icon-iconfontwikipedia",jianshu:"iconfont-jianshu icon-jianshu",youku:"iconfont-youku icon-iconfontyouku",youtube:"iconfont-youtube icon-youtube",juejin:"iconfont-juejin icon-juejin",weixin:"iconfont-weixin icon-iconfontwechat",segmentfault:"iconfont-sf icon-iconsf-copy"};for(var n in i)if("function"!=typeof i[n]){var a=n;e.indexOf(a)>=0&&(o=a,t=i[a])}return t},addIcons:function(){$(".single-post-inner  a:not(:has(img))").each(function(e){var o=$(this).attr("href"),t=document.createElement("a");t.href=o,_selfDomain=t.hostname,General.urlIconlize(_selfDomain),$(this).prepend('<i class="iconfont '+General.urlIconlize(_selfDomain)+'"></i>');var i=$(this).find("i").css("color"),n=$(this).css("color");$(this).hover(function(){$(this).css("color",i),$(this).addClass("animated pulse")},function(){$(this).css("color",n),$(this).removeClass("animated pulse")})})},rewardLoader:function(){var e={alipay:"/assets/images/qr-alipay-255.png",wechat:"/assets/images/qr-wechat-255.png"};General.isWechat&&$(".wechat-code b").html("长按上方二维码打赏作者"),$(".money-like .reward-button").hover(function(){$("img.wechat-img").attr("src",e.wechat),$("img.alipay-img").attr("src",e.alipay),$(".money-code").fadeIn(),$(this).addClass("active")},function(){$(".money-code").fadeOut(),$(this).removeClass("active")},800),$(".money-like .reward-button").click(function(){$(this).hasClass("active")?($(this).find("img.wechat-img").attr("src",e.wechat),$(this).find("img.alipay-img").attr("src",e.alipay),$(".money-code").fadeOut(),$(this).removeClass("active")):($(".money-code").fadeIn(),$(this).addClass("active"))})}},ImageSmartLoader={isWebPSupported:!1,isImageCompressed:!1,init:function(){ImageSmartLoader.webPCheck()},isCompressedCheck:function(){},webPCheck:function(e,o){var t={demo:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="},i=new Image;i.onload=function(){i.width>0&&i.height>0;ImageSmartLoader.isWebPSupported=!0,ImageSmartLoader.webPLoader()},i.onerror=function(){ImageSmartLoader.isWebPSupported=!1,ImageSmartLoader.webPLoader()},i.src="data:image/webp;base64,"+t.demo},imgLoader:function(){},webPLoader:function(){if(ImageSmartLoader.isWebPSupported===!0){if(768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1})}else{if(768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:1500}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!1})}}};$(document).ready(function(){var e=$(window),o=document.getElementById("scroll-hint");if(null!==o&&($(".header-scroll-hint").on("click",function(e){var o=$(this).closest(".cover");$("html, body").animate({scrollTop:o.position().top+o.height()},400),e.preventDefault()}),window.addEventListener("load",function(){var e=window.pageYOffset||document.documentElement.scrollTop;e>0?o.classList.remove("visible"):o.classList.add("visible")}),window.addEventListener("scroll",function(){var e=window.pageYOffset||document.documentElement.scrollTop;e>0?o.classList.remove("visible"):o.classList.add("visible")})),$(".sidebar-toggle").on("click",function(e){$("body").hasClass("sidebar-opened")?($("body").removeClass("sidebar-opened"),$("body").css("overflow","scroll")):($("body").addClass("sidebar-opened"),$("body").css("overflow","hidden")),e.preventDefault()}),$(".search-toggle").on("click",function(e){$("body").hasClass("search-opened")?($("body").removeClass("search-opened"),$("body").css("overflow","scroll"),searchField.clear()):($("body").addClass("search-opened"),$("body").css("overflow","hidden"),setTimeout(function(){$("#search-field").focus()},300)),e.preventDefault()}),$(".overlay").on("click",function(e){$("body").removeClass("sidebar-opened search-opened"),$("body").css("overflow","scroll"),searchField.clear(),e.preventDefault()}),"undefined"!=typeof disqus_shortname){var t=!1;$(".comments-title").on("click",function(){var e=$(this);t?($("#disqus_thread").slideToggle(),e.hasClass("toggled-on")?e.removeClass("toggled-on"):e.addClass("toggled-on")):($.ajax({type:"GET",url:"//"+disqus_shortname+".disqus.com/embed.js",dataType:"script",cache:!0}),e.addClass("toggled-on"),t=!0)})}$.fn.lazyload=function(o){function t(){var e=0;n.each(function(){var o=$(this);if(!a.skip_invisible||o.is(":visible"))if($.abovethetop(this,a)||$.leftofbegin(this,a));else if($.belowthefold(this,a)||$.rightoffold(this,a)){if(++e>a.failure_limit)return!1}else o.trigger("appear"),e=0})}var i,n=this,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"",advanced_load:!1,webP_load:!1,is_scale:!1,scale_width:750};return o&&(void 0!==o.failurelimit&&(o.failure_limit=o.failurelimit,delete o.failurelimit),void 0!==o.effectspeed&&(o.effect_speed=o.effectspeed,delete o.effectspeed),$.extend(a,o)),i=void 0===a.container||a.container===window?e:$(a.container),0===a.event.indexOf("scroll")&&i.bind(a.event,function(){return t()}),this.each(function(){var e=this,o=$(e);e.loaded=!1,void 0!==o.attr("src")&&o.attr("src")!==!1||o.is("img")&&(o.attr("src",a.placeholder),o.addClass("loading")),o.one("appear",function(){if(!this.loaded){if(a.appear){var t=n.length;a.appear.call(e,t,a)}var i=o.attr("data-"+a.data_attribute);void 0===i&&(i=o.attr("src")),void 0===i&&(i=o.style.backgroundImage),void 0!==i&&i.indexOf("ob6mci30g.qnssl.com")>-1&&(a.advanced_load===!0&&(i+="?imageView2"),a.is_scale===!0&&(i+="/0/w/"+a.scale_width),a.webP_load===!0&&a.is_scale===!1&&(i+="/0/format/webp"),a.webP_load===!0&&a.is_scale===!0&&(i+="/format/webp")),$("<img />").bind("load",function(){o.hide(),o.is("img")?o.attr("src",i):o.css("background-image","url('"+i+"')"),o[a.effect](a.effect_speed),e.loaded=!0;var t=$.grep(n,function(e){return!e.loaded});if(n=$(t),a.load){var r=n.length;a.load.call(e,r,a)}o.removeClass("loading")}).attr("src",i)}}),0!==a.event.indexOf("scroll")&&o.bind(a.event,function(){e.loaded||o.trigger("appear")})}),e.bind("resize",function(){t()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&n.each(function(){$(this).trigger("appear")})}),$(document).ready(function(){t()}),this},$.belowthefold=function(o,t){var i;return i=void 0===t.container||t.container===window?(window.innerHeight?window.innerHeight:e.height())+e.scrollTop():$(t.container).offset().top+$(t.container).height(),i<=$(o).offset().top-t.threshold},$.rightoffold=function(o,t){var i;return i=void 0===t.container||t.container===window?e.width()+e.scrollLeft():$(t.container).offset().left+$(t.container).width(),i<=$(o).offset().left-t.threshold},$.abovethetop=function(o,t){var i;return i=void 0===t.container||t.container===window?e.scrollTop():$(t.container).offset().top,i>=$(o).offset().top+t.threshold+$(o).height()},$.leftofbegin=function(o,t){var i;return i=void 0===t.container||t.container===window?e.scrollLeft():$(t.container).offset().left,i>=$(o).offset().left+t.threshold+$(o).width()},$.inviewport=function(e,o){return!($.rightoffold(e,o)||$.leftofbegin(e,o)||$.belowthefold(e,o)||$.abovethetop(e,o))},$.extend($.expr[":"],{"below-the-fold":function(e){return $.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!$.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return $.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!$.rightoffold(e,{threshold:0})},"in-viewport":function(e){return $.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!$.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return $.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!$.rightoffold(e,{threshold:0})}}),General.init(),ImageSmartLoader.init(),$("body").hasClass("post-template")&&General.addIcons()});
!function(e){!function(){var e=function(t){var r=new e.Builder;return r.pipeline.add(e.trimmer,e.stopWordFilter,e.stemmer),r.searchPipeline.add(e.stemmer),t.call(r,r),r.build()};e.version="2.1.5",e.utils={},e.utils.warn=function(e){return function(t){e.console&&console.warn}}(this),e.utils.asString=function(e){return void 0===e||null===e?"":e.toString()},e.FieldRef=function(e,t,r){this.docRef=e,this.fieldName=t,this._stringValue=r},e.FieldRef.joiner="/",e.FieldRef.fromString=function(t){var r=t.indexOf(e.FieldRef.joiner);if(r===-1)throw"malformed field ref string";var i=t.slice(0,r),n=t.slice(r+1);return new e.FieldRef(n,i,t)},e.FieldRef.prototype.toString=function(){return void 0===this._stringValue&&(this._stringValue=this.fieldName+e.FieldRef.joiner+this.docRef),this._stringValue},e.idf=function(e,t){var r=0;for(var i in e)"_index"!=i&&(r+=Object.keys(e[i]).length);var n=(t-r+.5)/(r+.5);return Math.log(1+Math.abs(n))},e.Token=function(e,t){this.str=e||"",this.metadata=t||{}},e.Token.prototype.toString=function(){return this.str},e.Token.prototype.update=function(e){return this.str=e(this.str,this.metadata),this},e.Token.prototype.clone=function(t){return t=t||function(e){return e},new e.Token(t(this.str,this.metadata),this.metadata)},e.tokenizer=function(t){if(null===t||void 0===t)return[];if(Array.isArray(t))return t.map(function(t){return new e.Token(e.utils.asString(t).toLowerCase())});for(var r=t.toString().trim().toLowerCase(),i=r.length,n=[],s=0,o=0;s<=i;s++){var a=r.charAt(s),u=s-o;(a.match(e.tokenizer.separator)||s==i)&&(u>0&&n.push(new e.Token(r.slice(o,s),{position:[o,u],index:n.length})),o=s+1)}return n},e.tokenizer.separator=/[\s\-]+/,e.Pipeline=function(){this._stack=[]},e.Pipeline.registeredFunctions=Object.create(null),e.Pipeline.registerFunction=function(t,r){r in this.registeredFunctions&&e.utils.warn("Overwriting existing registered function: "+r),t.label=r,e.Pipeline.registeredFunctions[t.label]=t},e.Pipeline.warnIfFunctionNotRegistered=function(t){var r=t.label&&t.label in this.registeredFunctions;r||e.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",t)},e.Pipeline.load=function(t){var r=new e.Pipeline;return t.forEach(function(t){var i=e.Pipeline.registeredFunctions[t];if(!i)throw new Error("Cannot load unregistered function: "+t);r.add(i)}),r},e.Pipeline.prototype.add=function(){var t=Array.prototype.slice.call(arguments);t.forEach(function(t){e.Pipeline.warnIfFunctionNotRegistered(t),this._stack.push(t)},this)},e.Pipeline.prototype.after=function(t,r){e.Pipeline.warnIfFunctionNotRegistered(r);var i=this._stack.indexOf(t);if(i==-1)throw new Error("Cannot find existingFn");i+=1,this._stack.splice(i,0,r)},e.Pipeline.prototype.before=function(t,r){e.Pipeline.warnIfFunctionNotRegistered(r);var i=this._stack.indexOf(t);if(i==-1)throw new Error("Cannot find existingFn");this._stack.splice(i,0,r)},e.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);t!=-1&&this._stack.splice(t,1)},e.Pipeline.prototype.run=function(e){for(var t=this._stack.length,r=function(t,r,i){var s=n(r,i,e);return void 0===s||""===s?t:t.concat(s)},i=0;i<t;i++){var n=this._stack[i];e=e.reduce(r,[])}return e},e.Pipeline.prototype.runString=function(t){var r=new e.Token(t);return this.run([r]).map(function(e){return e.toString()})},e.Pipeline.prototype.reset=function(){this._stack=[]},e.Pipeline.prototype.toJSON=function(){return this._stack.map(function(t){return e.Pipeline.warnIfFunctionNotRegistered(t),t.label})},e.Vector=function(e){this._magnitude=0,this.elements=e||[]},e.Vector.prototype.positionForIndex=function(e){if(0===this.elements.length)return 0;for(var t=0,r=this.elements.length/2,i=r-t,n=Math.floor(i/2),s=this.elements[2*n];i>1&&(s<e&&(t=n),s>e&&(r=n),s!=e);)i=r-t,n=t+Math.floor(i/2),s=this.elements[2*n];return s==e?2*n:s>e?2*n:s<e?2*(n+1):void 0},e.Vector.prototype.insert=function(e,t){this.upsert(e,t,function(){throw"duplicate index"})},e.Vector.prototype.upsert=function(e,t,r){this._magnitude=0;var i=this.positionForIndex(e);this.elements[i]==e?this.elements[i+1]=r(this.elements[i+1],t):this.elements.splice(i,0,e,t)},e.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e=0,t=this.elements.length,r=1;r<t;r+=2){var i=this.elements[r];e+=i*i}return this._magnitude=Math.sqrt(e),this._magnitude},e.Vector.prototype.dot=function(e){for(var t=0,r=this.elements,i=e.elements,n=r.length,s=i.length,o=0,a=0,u=0,l=0;u<n&&l<s;)o=r[u],a=i[l],o<a?u+=2:o>a?l+=2:o==a&&(t+=r[u+1]*i[l+1],u+=2,l+=2);return t},e.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},e.Vector.prototype.toArray=function(){for(var e=new Array(this.elements.length/2),t=1,r=0;t<this.elements.length;t+=2,r++)e[r]=this.elements[t];return e},e.Vector.prototype.toJSON=function(){return this.elements},e.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},r="[^aeiou]",i="[aeiouy]",n=r+"[^aeiouy]*",s=i+"[aeiou]*",o="^("+n+")?"+s+n,a="^("+n+")?"+s+n+"("+s+")?$",u="^("+n+")?"+s+n+s+n,l="^("+n+")?"+i,h=new RegExp(o),d=new RegExp(u),c=new RegExp(a),f=new RegExp(l),p=/^(.+?)(ss|i)es$/,g=/^(.+?)([^s])s$/,m=/^(.+?)eed$/,y=/^(.+?)(ed|ing)$/,v=/.$/,x=/(at|bl|iz)$/,w=new RegExp("([^aeiouylsz])\\1$"),b=new RegExp("^"+n+i+"[^aeiouwxy]$"),k=/^(.+?[^aeiou])y$/,S=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,Q=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,L=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,_=/^(.+?)(s|t)(ion)$/,T=/^(.+?)e$/,P=/ll$/,I=new RegExp("^"+n+i+"[^aeiouwxy]$"),O=function(r){var i,n,s,o,a,u,l;if(r.length<3)return r;s=r.substr(0,1),"y"==s&&(r=s.toUpperCase()+r.substr(1)),o=p,a=g,o.test(r)?r=r.replace(o,"$1$2"):a.test(r)&&(r=r.replace(a,"$1$2"));var O;return o=m,a=y,o.test(r)?(O=o.exec(r),o=h,o.test(O[1])&&(o=v,r=r.replace(o,""))):a.test(r)&&(O=a.exec(r),i=O[1],a=f,a.test(i)&&(r=i,a=x,u=w,l=b,a.test(r)?r+="e":u.test(r)?(o=v,r=r.replace(o,"")):l.test(r)&&(r+="e"))),o=k,o.test(r)&&(O=o.exec(r),i=O[1],r=i+"i"),o=S,o.test(r)&&(O=o.exec(r),i=O[1],n=O[2],o=h,o.test(i)&&(r=i+e[n])),o=Q,o.test(r)&&(O=o.exec(r),i=O[1],n=O[2],o=h,o.test(i)&&(r=i+t[n])),o=L,a=_,o.test(r)?(O=o.exec(r),i=O[1],o=d,o.test(i)&&(r=i)):a.test(r)&&(O=a.exec(r),i=O[1]+O[2],a=d,a.test(i)&&(r=i)),o=T,o.test(r)&&(O=o.exec(r),i=O[1],o=d,a=c,u=I,(o.test(i)||a.test(i)&&!u.test(i))&&(r=i)),o=P,a=d,o.test(r)&&a.test(r)&&(o=v,r=r.replace(o,"")),"y"==s&&(r=s.toLowerCase()+r.substr(1)),r};return function(e){return e.update(O)}}(),e.Pipeline.registerFunction(e.stemmer,"stemmer"),e.generateStopWordFilter=function(e){var t=e.reduce(function(e,t){return e[t]=t,e},{});return function(e){if(e&&t[e.toString()]!==e.toString())return e}},e.stopWordFilter=e.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),e.Pipeline.registerFunction(e.stopWordFilter,"stopWordFilter"),e.trimmer=function(e){return e.update(function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")})},e.Pipeline.registerFunction(e.trimmer,"trimmer"),e.TokenSet=function(){this["final"]=!1,this.edges={},this.id=e.TokenSet._nextId,e.TokenSet._nextId+=1},e.TokenSet._nextId=1,e.TokenSet.fromArray=function(t){for(var r=new e.TokenSet.Builder,i=0,n=t.length;i<n;i++)r.insert(t[i]);return r.finish(),r.root},e.TokenSet.fromClause=function(t){return"editDistance"in t?e.TokenSet.fromFuzzyString(t.term,t.editDistance):e.TokenSet.fromString(t.term)},e.TokenSet.fromFuzzyString=function(t,r){for(var i=new e.TokenSet,n=[{node:i,editsRemaining:r,str:t}];n.length;){var s,o=n.pop();if(o.str.length>0){s=o.str.charAt(0);var a;s in o.node.edges?a=o.node.edges[s]:(a=new e.TokenSet,o.node.edges[s]=a),1==o.str.length?a["final"]=!0:n.push({node:a,editsRemaining:o.editsRemaining,str:o.str.slice(1)})}if(o.editsRemaining>0&&o.str.length>1){s=o.str.charAt(1);var u;s in o.node.edges?u=o.node.edges[s]:(u=new e.TokenSet,o.node.edges[s]=u),o.str.length<=2?u["final"]=!0:n.push({node:u,editsRemaining:o.editsRemaining-1,str:o.str.slice(2)})}o.editsRemaining>0&&1==o.str.length&&(o.node["final"]=!0);var l;o.editsRemaining>0&&o.str.length>=1&&("*"in o.node.edges?l=o.node.edges["*"]:(l=new e.TokenSet,o.node.edges["*"]=l),1==o.str.length?l["final"]=!0:n.push({node:l,editsRemaining:o.editsRemaining-1,str:o.str.slice(1)}));var h;if(o.editsRemaining>0&&("*"in o.node.edges?h=o.node.edges["*"]:(h=new e.TokenSet,o.node.edges["*"]=h),0===o.str.length?h["final"]=!0:n.push({node:h,editsRemaining:o.editsRemaining-1,str:o.str})),o.editsRemaining>0&&o.str.length>1){var d,c=o.str.charAt(0),f=o.str.charAt(1);f in o.node.edges?d=o.node.edges[f]:(d=new e.TokenSet,o.node.edges[f]=d),1==o.str.length?d["final"]=!0:n.push({node:d,editsRemaining:o.editsRemaining-1,str:c+o.str.slice(2)})}}return i},e.TokenSet.fromString=function(t){for(var r=new e.TokenSet,i=r,n=!1,s=0,o=t.length;s<o;s++){var a=t[s],u=s==o-1;if("*"==a)n=!0,r.edges[a]=r,r["final"]=u;else{var l=new e.TokenSet;l["final"]=u,r.edges[a]=l,r=l,n&&(r.edges["*"]=i)}}return i},e.TokenSet.prototype.toArray=function(){for(var e=[],t=[{prefix:"",node:this}];t.length;){var r=t.pop(),i=Object.keys(r.node.edges),n=i.length;r.node["final"]&&e.push(r.prefix);for(var s=0;s<n;s++){var o=i[s];t.push({prefix:r.prefix.concat(o),node:r.node.edges[o]})}}return e},e.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var e=this["final"]?"1":"0",t=Object.keys(this.edges).sort(),r=t.length,i=0;i<r;i++){var n=t[i],s=this.edges[n];e=e+n+s.id}return e},e.TokenSet.prototype.intersect=function(t){for(var r,i=new e.TokenSet,n=[{qNode:t,output:i,node:this}];n.length;){r=n.pop();for(var s=Object.keys(r.qNode.edges),o=s.length,a=Object.keys(r.node.edges),u=a.length,l=0;l<o;l++)for(var h=s[l],d=0;d<u;d++){var c=a[d];if(c==h||"*"==h){var f,p=r.node.edges[c],g=r.qNode.edges[h],m=p["final"]&&g["final"];c in r.output.edges?(f=r.output.edges[c],f["final"]=f["final"]||m):(f=new e.TokenSet,f["final"]=m,r.output.edges[c]=f),n.push({qNode:g,output:f,node:p})}}}return i},e.TokenSet.Builder=function(){this.previousWord="",this.root=new e.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},e.TokenSet.Builder.prototype.insert=function(t){var r,i=0;if(t<this.previousWord)throw new Error("Out of order word insertion");for(var n=0;n<t.length&&n<this.previousWord.length&&t[n]==this.previousWord[n];n++)i++;this.minimize(i),r=0===this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(var s=i;s<t.length;s++){var o=new e.TokenSet,a=t[s];r.edges[a]=o,this.uncheckedNodes.push({parent:r,"char":a,child:o}),r=o}r["final"]=!0,this.previousWord=t},e.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},e.TokenSet.Builder.prototype.minimize=function(e){for(var t=this.uncheckedNodes.length-1;t>=e;t--){var r=this.uncheckedNodes[t],i=r.child.toString();i in this.minimizedNodes?r.parent.edges[r["char"]]=this.minimizedNodes[i]:(r.child._str=i,this.minimizedNodes[i]=r.child),this.uncheckedNodes.pop()}},e.Index=function(e){this.invertedIndex=e.invertedIndex,this.fieldVectors=e.fieldVectors,this.tokenSet=e.tokenSet,this.fields=e.fields,this.pipeline=e.pipeline},e.Index.prototype.search=function(t){return this.query(function(r){var i=new e.QueryParser(t,r);i.parse()})},e.Index.prototype.query=function(t){var r=new e.Query(this.fields),i=Object.create(null),n=Object.create(null),s=Object.create(null);t.call(r,r);for(var o=0;o<r.clauses.length;o++){var a=r.clauses[o],u=null;u=a.usePipeline?this.pipeline.runString(a.term):[a.term];for(var l=0;l<u.length;l++){var h=u[l];a=JSON.parse(JSON.stringify(a)),a.term=h;for(var d,c=e.TokenSet.fromClause(a),f=this.tokenSet.intersect(c).toArray(),p=0;p<f.length;p++){var g=f[p],m=this.invertedIndex[g];if(m){d=m._index;for(var y=0;y<a.fields.length;y++){var v=a.fields[y],x=m[v],w=Object.keys(x),b=g+"/"+v;if(void 0===n[v]&&(n[v]=new e.Vector),n[v].upsert(d,1*a.boost,function(e,t){return e+t}),!s[b]){for(var k=0;k<w.length;k++){var S,Q=w[k],L=new e.FieldRef(Q,v),_=x[Q];void 0===(S=i[L])?i[L]=new e.MatchData(g,v,_):S.add(g,v,_)}s[b]=!0}}}}}}var T=Object.keys(i),P=[],I=Object.create(null);for(o=0;o<T.length;o++){var O,E=e.FieldRef.fromString(T[o]),F=E.docRef,D=this.fieldVectors[E],j=n[E.fieldName].similarity(D);if(void 0!==(O=I[F]))O.score+=j,O.matchData.combine(i[E]);else{var R={ref:F,score:j,matchData:i[E]};I[F]=R,P.push(R)}}return P.sort(function(e,t){return t.score-e.score})},e.Index.prototype.toJSON=function(){var t=Object.keys(this.invertedIndex).sort().map(function(e){return[e,this.invertedIndex[e]]},this),r=Object.keys(this.fieldVectors).map(function(e){return[e,this.fieldVectors[e].toJSON()]},this);return{version:e.version,fields:this.fields,fieldVectors:r,invertedIndex:t,pipeline:this.pipeline.toJSON()}},e.Index.load=function(t){var r={},i={},n=t.fieldVectors,s={},o=t.invertedIndex,a=new e.TokenSet.Builder,u=e.Pipeline.load(t.pipeline);t.version!=e.version&&e.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+e.version+"' does not match serialized index '"+t.version+"'");for(var l,h=0;h<n.length;h++)l=n[h],ref=l[0],elements=l[1],i[ref]=new e.Vector(elements);for(h=0;h<o.length;h++)l=o[h],term=l[0],posting=l[1],a.insert(term),s[term]=posting;return a.finish(),r.fields=t.fields,r.fieldVectors=i,r.invertedIndex=s,r.tokenSet=a.root,r.pipeline=u,new e.Index(r)},e.Builder=function(){this._ref="id",this._fields=[],this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=e.tokenizer,this.pipeline=new e.Pipeline,this.searchPipeline=new e.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},e.Builder.prototype.ref=function(e){this._ref=e},e.Builder.prototype.field=function(e){this._fields.push(e)},e.Builder.prototype.b=function(e){e<0?this._b=0:e>1?this._b=1:this._b=e},e.Builder.prototype.k1=function(e){this._k1=e},e.Builder.prototype.add=function(t){var r=t[this._ref];this.documentCount+=1;for(var i=0;i<this._fields.length;i++){var n=this._fields[i],s=t[n],o=this.tokenizer(s),a=this.pipeline.run(o),u=new e.FieldRef(r,n),l=Object.create(null);this.fieldTermFrequencies[u]=l,this.fieldLengths[u]=0,this.fieldLengths[u]+=a.length;for(var h=0;h<a.length;h++){var d=a[h];if(void 0===l[d]&&(l[d]=0),l[d]+=1,void 0===this.invertedIndex[d]){var c=Object.create(null);c._index=this.termIndex,this.termIndex+=1;for(var f=0;f<this._fields.length;f++)c[this._fields[f]]=Object.create(null);this.invertedIndex[d]=c}void 0===this.invertedIndex[d][n][r]&&(this.invertedIndex[d][n][r]=Object.create(null));for(var p=0;p<this.metadataWhitelist.length;p++){var g=this.metadataWhitelist[p],m=d.metadata[g];void 0===this.invertedIndex[d][n][r][g]&&(this.invertedIndex[d][n][r][g]=[]),this.invertedIndex[d][n][r][g].push(m)}}}},e.Builder.prototype.calculateAverageFieldLengths=function(){for(var t,r=Object.keys(this.fieldLengths),i=r.length,n={},s={},o=0;o<i;o++){var a=e.FieldRef.fromString(r[o]);t=a.fieldName,(s[t]||(s[t]=0))&&(s[t]+=1),(n[t]||(n[t]=0))&&(n[t]+=this.fieldLengths[a])}for(o=0;o<this._fields.length;o++)t=this._fields[o],n[t]=n[t]/s[t];this.averageFieldLength=n},e.Builder.prototype.createFieldVectors=function(){for(var t={},r=Object.keys(this.fieldTermFrequencies),i=r.length,n=Object.create(null),s=0;s<i;s++){for(var o=e.FieldRef.fromString(r[s]),a=o.fieldName,u=this.fieldLengths[o],l=new e.Vector,h=this.fieldTermFrequencies[o],d=Object.keys(h),c=d.length,f=0;f<c;f++){var p,g,m,y=d[f],v=h[y],x=this.invertedIndex[y]._index;void 0===n[y]?(p=e.idf(this.invertedIndex[y],this.documentCount),n[y]=p):p=n[y],g=p*((this._k1+1)*v)/(this._k1*(1-this._b+this._b*(u/this.averageFieldLength[a]))+v),m=Math.round(1e3*g)/1e3,l.insert(x,m)}t[o]=l}this.fieldVectors=t},e.Builder.prototype.createTokenSet=function(){this.tokenSet=e.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},e.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new e.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:this._fields,pipeline:this.searchPipeline})},e.Builder.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},e.MatchData=function(e,t,r){for(var i=Object.create(null),n=Object.keys(r),s=0;s<n.length;s++){var o=n[s];i[o]=r[o].slice()}this.metadata=Object.create(null),this.metadata[e]=Object.create(null),this.metadata[e][t]=i},e.MatchData.prototype.combine=function(e){for(var t=Object.keys(e.metadata),r=0;r<t.length;r++){var i=t[r],n=Object.keys(e.metadata[i]);void 0===this.metadata[i]&&(this.metadata[i]=Object.create(null));for(var s=0;s<n.length;s++){var o=n[s],a=Object.keys(e.metadata[i][o]);void 0===this.metadata[i][o]&&(this.metadata[i][o]=Object.create(null));for(var u=0;u<a.length;u++){var l=a[u];void 0===this.metadata[i][o][l]?this.metadata[i][o][l]=e.metadata[i][o][l]:this.metadata[i][o][l]=this.metadata[i][o][l].concat(e.metadata[i][o][l])}}}},e.MatchData.prototype.add=function(e,t,r){if(!(e in this.metadata))return this.metadata[e]=Object.create(null),void(this.metadata[e][t]=r);if(!(t in this.metadata[e]))return void(this.metadata[e][t]=r);for(var i=Object.keys(r),n=0;n<i.length;n++){var s=i[n];s in this.metadata[e][t]?this.metadata[e][t][s]=this.metadata[e][t][s].concat(r[s]):this.metadata[e][t][s]=r[s]}},e.Query=function(e){this.clauses=[],this.allFields=e},e.Query.wildcard="*",e.Query.wildcard.NONE=0,e.Query.wildcard.LEADING=1,e.Query.wildcard.TRAILING=2,e.Query.prototype.clause=function(t){return"fields"in t||(t.fields=this.allFields),"boost"in t||(t.boost=1),"usePipeline"in t||(t.usePipeline=!0),"wildcard"in t||(t.wildcard=e.Query.wildcard.NONE),t.wildcard&e.Query.wildcard.LEADING&&t.term.charAt(0)!=e.Query.wildcard&&(t.term="*"+t.term),t.wildcard&e.Query.wildcard.TRAILING&&t.term.slice(-1)!=e.Query.wildcard&&(t.term=""+t.term+"*"),this.clauses.push(t),this},e.Query.prototype.term=function(e,t){var r=t||{};return r.term=e,this.clause(r),this},e.QueryParseError=function(e,t,r){this.name="QueryParseError",this.message=e,this.start=t,this.end=r},e.QueryParseError.prototype=new Error,e.QueryLexer=function(e){this.lexemes=[],this.str=e,this.length=e.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},e.QueryLexer.prototype.run=function(){for(var t=e.QueryLexer.lexText;t;)t=t(this)},e.QueryLexer.prototype.sliceString=function(){for(var e=[],t=this.start,r=this.pos,i=0;i<this.escapeCharPositions.length;i++)r=this.escapeCharPositions[i],e.push(this.str.slice(t,r)),t=r+1;return e.push(this.str.slice(t,this.pos)),this.escapeCharPositions.length=0,e.join("")},e.QueryLexer.prototype.emit=function(e){this.lexemes.push({type:e,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},e.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},e.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return e.QueryLexer.EOS;var t=this.str.charAt(this.pos);return this.pos+=1,t},e.QueryLexer.prototype.width=function(){return this.pos-this.start},e.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},e.QueryLexer.prototype.backup=function(){this.pos-=1},e.QueryLexer.prototype.acceptDigitRun=function(){var t,r;do t=this.next(),r=t.charCodeAt(0);while(r>47&&r<58);t!=e.QueryLexer.EOS&&this.backup()},e.QueryLexer.prototype.more=function(){return this.pos<this.length},e.QueryLexer.EOS="EOS",e.QueryLexer.FIELD="FIELD",e.QueryLexer.TERM="TERM",e.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",e.QueryLexer.BOOST="BOOST",e.QueryLexer.lexField=function(t){return t.backup(),t.emit(e.QueryLexer.FIELD),t.ignore(),e.QueryLexer.lexText},e.QueryLexer.lexTerm=function(t){if(t.width()>1&&(t.backup(),t.emit(e.QueryLexer.TERM)),t.ignore(),t.more())return e.QueryLexer.lexText},e.QueryLexer.lexEditDistance=function(t){return t.ignore(),t.acceptDigitRun(),t.emit(e.QueryLexer.EDIT_DISTANCE),e.QueryLexer.lexText},e.QueryLexer.lexBoost=function(t){return t.ignore(),t.acceptDigitRun(),t.emit(e.QueryLexer.BOOST),e.QueryLexer.lexText},e.QueryLexer.lexEOS=function(t){t.width()>0&&t.emit(e.QueryLexer.TERM)},e.QueryLexer.termSeparator=e.tokenizer.separator,e.QueryLexer.lexText=function(t){for(;;){var r=t.next();if(r==e.QueryLexer.EOS)return e.QueryLexer.lexEOS;if(92!=r.charCodeAt(0)){if(":"==r)return e.QueryLexer.lexField;if("~"==r)return t.backup(),t.width()>0&&t.emit(e.QueryLexer.TERM),e.QueryLexer.lexEditDistance;if("^"==r)return t.backup(),t.width()>0&&t.emit(e.QueryLexer.TERM),e.QueryLexer.lexBoost;if(r.match(e.QueryLexer.termSeparator))return e.QueryLexer.lexTerm}else t.escapeCharacter()}},e.QueryParser=function(t,r){this.lexer=new e.QueryLexer(t),this.query=r,this.currentClause={},this.lexemeIdx=0},e.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var t=e.QueryParser.parseFieldOrTerm;t;)t=t(this);return this.query},e.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},e.QueryParser.prototype.consumeLexeme=function(){var e=this.peekLexeme();return this.lexemeIdx+=1,e},e.QueryParser.prototype.nextClause=function(){var e=this.currentClause;this.query.clause(e),this.currentClause={}},e.QueryParser.parseFieldOrTerm=function(t){var r=t.peekLexeme();if(void 0!==r)switch(r.type){case e.QueryLexer.FIELD:return e.QueryParser.parseField;case e.QueryLexer.TERM:return e.QueryParser.parseTerm;default:var i="expected either a field or a term, found "+r.type;throw r.str.length>=1&&(i+=" with value '"+r.str+"'"),new e.QueryParseError(i,r.start,r.end)}},e.QueryParser.parseField=function(t){var r=t.consumeLexeme();if(void 0!==r){var i;if(t.query.allFields.indexOf(r.str)==-1){var n=t.query.allFields.map(function(e){return"'"+e+"'"}).join(", ");throw i="unrecognised field '"+r.str+"', possible fields: "+n,new e.QueryParseError(i,r.start,r.end)}t.currentClause.fields=[r.str];var s=t.peekLexeme();if(void 0===s)throw i="expecting term, found nothing",new e.QueryParseError(i,r.start,r.end);switch(s.type){case e.QueryLexer.TERM:return e.QueryParser.parseTerm;default:throw i="expecting term, found '"+s.type+"'",new e.QueryParseError(i,s.start,s.end)}}},e.QueryParser.parseTerm=function(t){var r=t.consumeLexeme();if(void 0!==r){t.currentClause.term=r.str.toLowerCase(),r.str.indexOf("*")!=-1&&(t.currentClause.usePipeline=!1);var i=t.peekLexeme();if(void 0===i)return void t.nextClause();switch(i.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;default:var n="Unexpected lexeme type '"+i.type+"'";throw new e.QueryParseError(n,i.start,i.end)}}},e.QueryParser.parseEditDistance=function(t){var r=t.consumeLexeme();if(void 0!==r){var i,n=parseInt(r.str,10);if(isNaN(n))throw i="edit distance must be numeric",new e.QueryParseError(i,r.start,r.end);t.currentClause.editDistance=n;var s=t.peekLexeme();if(void 0===s)return void t.nextClause();switch(s.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;default:throw i="Unexpected lexeme type '"+s.type+"'",new e.QueryParseError(i,s.start,s.end)}}},e.QueryParser.parseBoost=function(t){var r,i=t.consumeLexeme();if(void 0!==i){var n=parseInt(i.str,10);if(isNaN(n))throw r="boost must be numeric",new e.QueryParseError(r,i.start,i.end);t.currentClause.boost=n;var s=t.peekLexeme();if(void 0===s)return void t.nextClause();switch(s.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;default:throw r="Unexpected lexeme type '"+s.type+"'",new e.QueryParseError(r,s.start,s.end)}}},function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.lunr=t()}(this,function(){return e})}(),function(e,t){"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t(e)}):"object"==typeof module&&module&&module.exports?module.exports=t(e):e.Levenshtein=t(e)}(this,function(e){function t(e,t){var r,i;for(r=-1,i=e.length;++r<i;)t(e[r],r,e)}function r(e,r){var i;return i=Array(e.length),t(e,function(e,t,n){i.push(r(e,t,n))}),i}function i(e,r,i){return t(e,function(e,t,n){i=r(e,t,n)}),i}function n(e,t){return e.charAt(t)}function s(e,t){return e[t]}function o(e,r){var i,o,a,u;if("string"==typeof e&&"string"==typeof r)u=n;else{if("object"!=typeof e||"object"!=typeof r)throw"Levensthtein: input must be two strings or two arrays";u=s}return a=this._matrix=[],e==r?(this.distance=0,this.distance):""===e?(this.distance=r.length,this.distance):""===r?(this.distance=e.length,this.distance):(i=[0],t(e,function(e,t){t++,i[t]=t}),a[0]=i,t(r,function(n,s){o=[++s],t(e,function(t,n){n++,u(e,n-1)==u(r,s-1)?o[n]=i[n-1]:o[n]=Math.min(i[n]+1,o[n-1]+1,i[n-1]+1)}),i=o,a[a.length]=i}),this.distance=o[o.length-1],this.distance)}return o.prototype.toString=o.prototype.inspect=function(e){var t,n,s,o,a;for(t=this.getMatrix(),n=i(t,function(e,t){return Math.max(e,i(t,Math.max,0))},0),s=Array((n+"").length).join(" "),o=[];o.length<(t[0]&&t[0].length||0);)o[o.length]=Array(s.length+1).join("-");return o=o.join("-+")+"-",a=r(t,function(e){var t;return t=r(e,function(e){return(s+e).slice(-s.length)}),t.join(" |")+" "}),a.join("\n"+o+"\n")},o.prototype.getSteps=function(){var e,t,r,i,n,s,o,a;for(e=[],t=this.getMatrix(),r=t.length-1,i=t[0].length-1;0!==r||0!==i;)n=i>0?t[r][i-1]:Number.MAX_VALUE,s=r>0?t[r-1][i]:Number.MAX_VALUE,o=i>0&&r>0?t[r-1][i-1]:Number.MAX_VALUE,a=Math.min(n,s,o),a===o?(o<t[r][i]&&e.push(["substitute",i,r]),r--,i--):a===s?(e.push(["insert",i,r]),r--):(e.push(["delete",i,r]),i--);return e},o.prototype.getMatrix=function(){return this._matrix.slice()},o.prototype.valueOf=function(){return this.distance},o}),e.fn.ghostHunter=function(t){var r=e.extend({},e.fn.ghostHunter.defaults,t);if(r.results)return a.init(this,r),a},e.fn.ghostHunter.defaults={resultsData:!1,onPageLoad:!0,onKeyUp:!1,result_template:"<a id='gh-{{ref}}' class='gh-search-item' href='{{link}}'><p><h2>{{title}}</h2><h4>{{prettyPubDate}}</h4></p></a>",info_template:"<p>Number of posts found: {{amount}}</p>",displaySearchInfo:!0,zeroResultsInfo:!0,before:!1,onComplete:!1,includepages:!1,filterfields:!1,subpath:"",item_preprocessor:!1,indexing_start:!1,indexing_end:!1};var t=function(e){var t=new Date(e),r=["January","February","March","April","May","June","July","August","September","October","November","December"];return t.getDate()+" "+r[t.getMonth()]+" "+t.getFullYear()},r=function(e){return e.replace(/^\//,"").replace(/\//g,"-")},i=null,n=function(){e(".gh-search-item").each(function(){var e=this.getAttribute("id"),t=e.replace(/^new-/,"");this.setAttribute("id",t)})},s=function(e,t,r){for(var i=0,s=r.length;i<s;i++){var o=r[i];if("delete"==o[0])e.eq(o[1]-1).remove();else{var a=t[o[2]-1].ref,u=this.blogData[a],l=this.format(this.result_template,u);if("substitute"===o[0])e.eq(o[1]-1).replaceWith(l);else if("insert"===o[0]){var h;h=0===o[1]?null:o[1]-1,e.eq(h).after(l)}}}n()},o=function(){this.blogData={},this.latestPost=0;var i={limit:"all",include:"tags",formats:["plaintext"]};this.includepages&&(i.filter="(page:true,page:false)");var n=this;e.get(ghost.url.api("posts",i)).done(function(e){var i=e.posts;n.index=lunr(function(){this.ref("id"),this.field("title"),this.field("description"),this.field("plaintext"),this.field("pubDate"),this.field("tag"),i.forEach(function(e){var r=new Date(e.updated_at).getTime(),i=new Date(n.latestPost).getTime();r>i&&(n.latestPost=e.updated_at);var s=e.tags.map(function(e){return e.name});null===e.meta_description&&(e.meta_description="");var o=s.join(", ");o.length<1&&(o="undefined");var a={id:String(e.id),title:String(e.title),description:String(e.custom_excerpt),plaintext:String(e.plaintext),pubDate:String(e.published_at),tag:o};this.add(a);var u=n.subpath+e.url;n.blogData[e.id]={title:e.title,description:e.meta_description,pubDate:t(a.pubDate),link:u,tags:s},n.item_preprocessor&&Object.assign(n.blogData[e.id],n.item_preprocessor(e))},this)});try{var s=r(n.subpath);localStorage.setItem("ghost_"+s+"_lunrIndex",JSON.stringify(n.index)),localStorage.setItem("ghost_"+s+"_blogData",JSON.stringify(n.blogData)),localStorage.setItem("ghost_"+s+"_latestPost",n.latestPost)}catch(o){}n.indexing_end&&n.indexing_end(),n.isInit=!0})},a={isInit:!1,init:function(e,t){var r=this;Object.assign(this,t);var i=function(){};t.onPageLoad?(i=function(){r.loadAPI()},window.setTimeout(i,1)):e.focus(function(){r.loadAPI()}),e.closest("form").submit(function(t){t.preventDefault(),r.find(e.val())}),t.onKeyUp&&(e.keydown(function(e){if(13===e.which)return!1}),e.keyup(function(t){r.find(e.val())}))},loadAPI:function(){if(!this.isInit){this.indexing_start&&this.indexing_start();try{var t=r(this.subpath);this.index=localStorage.getItem("ghost_"+t+"_lunrIndex"),this.blogData=localStorage.getItem("ghost_"+t+"_blogData"),this.latestPost=localStorage.getItem("ghost_"+t+"_latestPost"),this.latestPost&&this.index&&this.blogData&&(this.latestPost=this.latestPost,this.index=lunr.Index.load(JSON.parse(this.index)),this.blogData=JSON.parse(this.blogData),this.isInit=!0)}catch(i){}}if(this.isInit){var n={limit:"all",filter:"updated_at:>'"+this.latestPost.replace(/\..*/,"").replace(/T/," ")+"'",fields:"id"},s=this;e.get(ghost.url.api("posts",n)).done(function(e){e.posts.length>0?o.call(s):(s.indexing_end&&s.indexing_end(),s.isInit=!0)})}else o.call(this)},find:function(t){clearTimeout(i),t||(t=""),t=t.toLowerCase(),i=setTimeout(function(){for(var r=[],i=t.split(/\s+/),o=0,a=i.length;o<a;o++){var u=i[o];u&&r.push(this.index.query(function(e){e.term(u,{usePipeline:!0,boost:100}),e.term(u,{usePipeline:!1,boost:10,wildcard:lunr.Query.wildcard.TRAILING}),e.term(u,{usePipeline:!1,editDistance:1,boost:1})}))}var l;if(r.length>1)for(l=r[0],r=r.slice(1),o=l.length-1;o>-1;o--){var h=l[o].ref;for(j=0,jlen=r.length;j<jlen;j++){for(var d={},c=0,f=r[j].length;c<f;c++)d[r[j][c].ref]=!0;if(!d[h]){l=l.slice(0,o).concat(l.slice(o+1));break}}}else l=1===r.length?r[0]:[];var p=e(this.results),g=[];for(0===l.length?(p.empty(),this.displaySearchInfo&&this.zeroResultsInfo&&p.append(this.format(this.info_template,{amount:0}))):this.displaySearchInfo&&(p.length>0?p.children().eq(0).replaceWith(this.format(this.info_template,{amount:l.length
})):p.append(this.format(this.info_template,{amount:l.length}))),this.before&&this.before(),o=0;o<l.length;o++){var m=l[o].ref,y=this.blogData[m];y&&(y.ref=m,g.push(y))}var v=e(".gh-search-item"),x=v.map(function(){return this.id.slice(3)}).get();if(0===x.length){for(o=0,a=g.length;o<a;o++)p.append(this.format(this.result_template,g[o]));n()}else{var w=[];for(o=0,a=l.length;o<a;o++)w.push(l[o].ref);var b=new Levenshtein(x,w),k=b.getSteps();s.call(this,v,l,k)}this.onComplete&&this.onComplete(g)}.bind(this),100)},clear:function(){e(this.results).empty()},format:function(e,t){return e.replace(/{{([^{}]*)}}/g,function(e,r){var i=t[r];return"string"==typeof i||"number"==typeof i?i:e})}}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiLCJqcXVlcnkuZ2hvc3RodW50ZXIuanMiXSwibmFtZXMiOlsibG9hZEpTIiwidXJsIiwiY2FsbGJhY2siLCJlbCIsImlzSUUiLCJ3aW5kb3ciLCJBY3RpdmVYT2JqZWN0IiwiaXNJRTYiLCJYTUxIdHRwUmVxdWVzdCIsInNjcmlwdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhlYWQiLCJkb2N1bWVudEVsZW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInR5cGUiLCJhc3luYyIsInJlYWR5U3RhdGUiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJvbmxvYWQiLCJzcmMiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsImlzRGVidWciLCIkIiwiZm4iLCJleHRlbmQiLCJpc09uU2NyZWVuVmlzaWJsZSIsImhhc0NsYXNzIiwid2luIiwidmlld3BvcnQiLCJ0b3AiLCJzY3JvbGxUb3AiLCJsZWZ0Iiwic2Nyb2xsTGVmdCIsInJpZ2h0Iiwid2lkdGgiLCJib3R0b20iLCJoZWlnaHQiLCJib3VuZHMiLCJ0aGlzIiwib2Zmc2V0Iiwib3V0ZXJXaWR0aCIsIm91dGVySGVpZ2h0IiwiR2VuZXJhbCIsImlzTW9iaWxlIiwiaXNXZWNoYXQiLCJ2aWV3V2lkdGgiLCJhYnNVcmwiLCJsb2NhdGlvbiIsInByb3RvY29sIiwiaG9zdCIsImluaXQiLCJVQSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiaXNBbmRyb2lkIiwiYXBwVmVyc2lvbiIsIm1hdGNoIiwiYWRkQ2xhc3MiLCJ1cGRhdGVJbWFnZVdpZHRoIiwicmV3YXJkTG9hZGVyIiwid2ViRm9udExvYWRlciIsInNjcm9sbFRvUG9zIiwiJHRoaXMiLCJjb250ZW50V2lkdGgiLCIkcG9zdENvbnRlbnQiLCJpbWFnZVdpZHRoIiwibmF0dXJhbFdpZHRoIiwicmVtb3ZlQ2xhc3MiLCJjYXNwZXJGdWxsSW1nIiwiJGltZyIsImVhY2giLCJvbiIsIldlYkZvbnRDb25maWciLCJsb2FkaW5nIiwiY3VzdG9tIiwiZmFtaWxpZXMiLCJ1cmxzIiwiV2ViRm9udCIsImxvYWQiLCJwb3NpdGlvbiIsIlNUUl9UT19UT1AiLCJidXR0b24iLCJhcHBlbmRUbyIsInNjcm9sbCIsImZhZGVJbiIsImZhZGVPdXQiLCJjbGljayIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImFuaW1hdGUiLCJoYXNoIiwidXJsSWNvbmxpemUiLCJkb21haW4iLCJfb3V0cHV0IiwiaWNvbk1hcCIsInR3aXR0ZXIiLCJxem9uZSIsIndlaWJvIiwiZmFjZWJvb2siLCJnaXRodWIiLCJkb3ViYW4iLCJnb29nbGUiLCJsdW9sZWkiLCJkcmliYmxlIiwidjJleCIsInpoaWh1Iiwid2lraXBlZGlhIiwiamlhbnNodSIsInlvdWt1IiwieW91dHViZSIsImp1ZWppbiIsIndlaXhpbiIsInNlZ21lbnRmYXVsdCIsIm5hbWUiLCJNYXBLZXkiLCJpbmRleE9mIiwiYWRkSWNvbnMiLCJpIiwiX3NyYyIsImF0dHIiLCJ0bXAiLCJocmVmIiwiX3NlbGZEb21haW4iLCJob3N0bmFtZSIsInByZXBlbmQiLCJfc2VsZkNvbG9yIiwiZmluZCIsImNzcyIsIl9vcmlnaW5hbENvbG9yIiwiaG92ZXIiLCJsb2FkUVIiLCJhbGlwYXkiLCJ3ZWNoYXQiLCJodG1sIiwiSW1hZ2VTbWFydExvYWRlciIsImlzV2ViUFN1cHBvcnRlZCIsImlzSW1hZ2VDb21wcmVzc2VkIiwid2ViUENoZWNrIiwiaXNDb21wcmVzc2VkQ2hlY2siLCJmZWF0dXJlIiwiVGVzdEltYWdlcyIsImRlbW8iLCJpbWciLCJJbWFnZSIsIndlYlBMb2FkZXIiLCJvbmVycm9yIiwiaW1nTG9hZGVyIiwibGF6eWxvYWQiLCJhZHZhbmNlZF9sb2FkIiwiZGF0YV9hdHRyaWJ1dGUiLCJ3ZWJQX2xvYWQiLCJpc19zY2FsZSIsInNjYWxlX3dpZHRoIiwicmVhZHkiLCIkd2luZG93Iiwic2Nyb2xsSGludCIsIiRjb3ZlciIsImNsb3Nlc3QiLCJhZGRFdmVudExpc3RlbmVyIiwicGFnZVlPZmZzZXQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJzZWFyY2hGaWVsZCIsImNsZWFyIiwic2V0VGltZW91dCIsImZvY3VzIiwiZGlzcXVzX3Nob3J0bmFtZSIsImRpc3F1c19sb2FkZWQiLCJfdGhpcyIsInNsaWRlVG9nZ2xlIiwiYWpheCIsImRhdGFUeXBlIiwiY2FjaGUiLCJvcHRpb25zIiwidXBkYXRlIiwiY291bnRlciIsImVsZW1lbnRzIiwic2V0dGluZ3MiLCJza2lwX2ludmlzaWJsZSIsImlzIiwiYWJvdmV0aGV0b3AiLCJsZWZ0b2ZiZWdpbiIsImJlbG93dGhlZm9sZCIsInJpZ2h0b2Zmb2xkIiwiZmFpbHVyZV9saW1pdCIsInRyaWdnZXIiLCIkY29udGFpbmVyIiwidGhyZXNob2xkIiwiZXZlbnQiLCJlZmZlY3QiLCJjb250YWluZXIiLCJhcHBlYXIiLCJwbGFjZWhvbGRlciIsInVuZGVmaW5lZCIsImZhaWx1cmVsaW1pdCIsImVmZmVjdHNwZWVkIiwiZWZmZWN0X3NwZWVkIiwiYmluZCIsInNlbGYiLCIkc2VsZiIsImxvYWRlZCIsIm9uZSIsImVsZW1lbnRzX2xlZnQiLCJsZW5ndGgiLCJjYWxsIiwidXBkYXRlZFVybCIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiaGlkZSIsInRlbXAiLCJncmVwIiwiZWxlbWVudCIsInRlc3QiLCJvcmlnaW5hbEV2ZW50IiwicGVyc2lzdGVkIiwiZm9sZCIsImlubmVySGVpZ2h0IiwiaW52aWV3cG9ydCIsImV4cHIiLCJiZWxvdy10aGUtZm9sZCIsImEiLCJhYm92ZS10aGUtdG9wIiwicmlnaHQtb2Ytc2NyZWVuIiwibGVmdC1vZi1zY3JlZW4iLCJpbi12aWV3cG9ydCIsImFib3ZlLXRoZS1mb2xkIiwicmlnaHQtb2YtZm9sZCIsImxlZnQtb2YtZm9sZCIsImx1bnIiLCJjb25maWciLCJidWlsZGVyIiwiQnVpbGRlciIsInBpcGVsaW5lIiwidHJpbW1lciIsInN0b3BXb3JkRmlsdGVyIiwic3RlbW1lciIsInNlYXJjaFBpcGVsaW5lIiwiYnVpbGQiLCJ2ZXJzaW9uIiwidXRpbHMiLCJ3YXJuIiwiZ2xvYmFsIiwibWVzc2FnZSIsImNvbnNvbGUiLCJhc1N0cmluZyIsIm9iaiIsInRvU3RyaW5nIiwiRmllbGRSZWYiLCJkb2NSZWYiLCJmaWVsZE5hbWUiLCJzdHJpbmdWYWx1ZSIsIl9zdHJpbmdWYWx1ZSIsImpvaW5lciIsImZyb21TdHJpbmciLCJzIiwibiIsImZpZWxkUmVmIiwic2xpY2UiLCJwcm90b3R5cGUiLCJpZGYiLCJwb3N0aW5nIiwiZG9jdW1lbnRDb3VudCIsImRvY3VtZW50c1dpdGhUZXJtIiwiT2JqZWN0Iiwia2V5cyIsIngiLCJNYXRoIiwibG9nIiwiYWJzIiwiVG9rZW4iLCJzdHIiLCJtZXRhZGF0YSIsImNsb25lIiwidG9rZW5pemVyIiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwidCIsInRyaW0iLCJsZW4iLCJ0b2tlbnMiLCJzbGljZUVuZCIsInNsaWNlU3RhcnQiLCJjaGFyIiwiY2hhckF0Iiwic2xpY2VMZW5ndGgiLCJzZXBhcmF0b3IiLCJwdXNoIiwiaW5kZXgiLCJQaXBlbGluZSIsIl9zdGFjayIsInJlZ2lzdGVyZWRGdW5jdGlvbnMiLCJjcmVhdGUiLCJyZWdpc3RlckZ1bmN0aW9uIiwibGFiZWwiLCJ3YXJuSWZGdW5jdGlvbk5vdFJlZ2lzdGVyZWQiLCJpc1JlZ2lzdGVyZWQiLCJzZXJpYWxpc2VkIiwiZm9yRWFjaCIsImZuTmFtZSIsIkVycm9yIiwiZm5zIiwiYXJndW1lbnRzIiwiYWZ0ZXIiLCJleGlzdGluZ0ZuIiwibmV3Rm4iLCJwb3MiLCJzcGxpY2UiLCJiZWZvcmUiLCJydW4iLCJzdGFja0xlbmd0aCIsInIiLCJtZW1vIiwidG9rZW4iLCJqIiwicmVzdWx0IiwiY29uY2F0IiwicmVkdWNlIiwicnVuU3RyaW5nIiwicmVzZXQiLCJ0b0pTT04iLCJWZWN0b3IiLCJfbWFnbml0dWRlIiwicG9zaXRpb25Gb3JJbmRleCIsInN0YXJ0IiwiZW5kIiwicGl2b3RQb2ludCIsImZsb29yIiwicGl2b3RJbmRleCIsImluc2VydCIsImluc2VydElkeCIsInZhbCIsInVwc2VydCIsIm1hZ25pdHVkZSIsInN1bU9mU3F1YXJlcyIsImVsZW1lbnRzTGVuZ3RoIiwic3FydCIsImRvdCIsIm90aGVyVmVjdG9yIiwiZG90UHJvZHVjdCIsImIiLCJhTGVuIiwiYkxlbiIsImFWYWwiLCJiVmFsIiwic2ltaWxhcml0eSIsInRvQXJyYXkiLCJvdXRwdXQiLCJzdGVwMmxpc3QiLCJhdGlvbmFsIiwidGlvbmFsIiwiZW5jaSIsImFuY2kiLCJpemVyIiwiYmxpIiwiYWxsaSIsImVudGxpIiwiZWxpIiwib3VzbGkiLCJpemF0aW9uIiwiYXRpb24iLCJhdG9yIiwiYWxpc20iLCJpdmVuZXNzIiwiZnVsbmVzcyIsIm91c25lc3MiLCJhbGl0aSIsIml2aXRpIiwiYmlsaXRpIiwibG9naSIsInN0ZXAzbGlzdCIsImljYXRlIiwiYXRpdmUiLCJhbGl6ZSIsImljaXRpIiwiaWNhbCIsImZ1bCIsIm5lc3MiLCJjIiwidiIsIkMiLCJWIiwibWdyMCIsIm1lcTEiLCJtZ3IxIiwic192IiwicmVfbWdyMCIsIlJlZ0V4cCIsInJlX21ncjEiLCJyZV9tZXExIiwicmVfc192IiwicmVfMWEiLCJyZTJfMWEiLCJyZV8xYiIsInJlMl8xYiIsInJlXzFiXzIiLCJyZTJfMWJfMiIsInJlM18xYl8yIiwicmU0XzFiXzIiLCJyZV8xYyIsInJlXzIiLCJyZV8zIiwicmVfNCIsInJlMl80IiwicmVfNSIsInJlXzVfMSIsInJlM181IiwicG9ydGVyU3RlbW1lciIsInciLCJzdGVtIiwic3VmZml4IiwiZmlyc3RjaCIsInJlIiwicmUyIiwicmUzIiwicmU0Iiwic3Vic3RyIiwidG9VcHBlckNhc2UiLCJyZXBsYWNlIiwiZnAiLCJleGVjIiwiZ2VuZXJhdGVTdG9wV29yZEZpbHRlciIsInN0b3BXb3JkcyIsIndvcmRzIiwic3RvcFdvcmQiLCJUb2tlblNldCIsImVkZ2VzIiwiaWQiLCJfbmV4dElkIiwiZnJvbUFycmF5IiwiYXJyIiwiZmluaXNoIiwicm9vdCIsImZyb21DbGF1c2UiLCJjbGF1c2UiLCJmcm9tRnV6enlTdHJpbmciLCJ0ZXJtIiwiZWRpdERpc3RhbmNlIiwic3RhY2siLCJub2RlIiwiZWRpdHNSZW1haW5pbmciLCJmcmFtZSIsInBvcCIsIm5vRWRpdE5vZGUiLCJkZWxldGlvbk5vZGUiLCJzdWJzdGl0dXRpb25Ob2RlIiwiaW5zZXJ0aW9uTm9kZSIsInRyYW5zcG9zZU5vZGUiLCJjaGFyQSIsImNoYXJCIiwid2lsZGNhcmRGb3VuZCIsImZpbmFsIiwibmV4dCIsInByZWZpeCIsImVkZ2UiLCJfc3RyIiwibGFiZWxzIiwic29ydCIsImludGVyc2VjdCIsInFOb2RlIiwicUVkZ2VzIiwicUxlbiIsIm5FZGdlcyIsIm5MZW4iLCJxIiwicUVkZ2UiLCJuRWRnZSIsInByZXZpb3VzV29yZCIsInVuY2hlY2tlZE5vZGVzIiwibWluaW1pemVkTm9kZXMiLCJ3b3JkIiwiY29tbW9uUHJlZml4IiwibWluaW1pemUiLCJjaGlsZCIsIm5leHROb2RlIiwicGFyZW50IiwiZG93blRvIiwiY2hpbGRLZXkiLCJJbmRleCIsImF0dHJzIiwiaW52ZXJ0ZWRJbmRleCIsImZpZWxkVmVjdG9ycyIsInRva2VuU2V0IiwiZmllbGRzIiwic2VhcmNoIiwicXVlcnlTdHJpbmciLCJxdWVyeSIsInBhcnNlciIsIlF1ZXJ5UGFyc2VyIiwicGFyc2UiLCJRdWVyeSIsIm1hdGNoaW5nRmllbGRzIiwicXVlcnlWZWN0b3JzIiwidGVybUZpZWxkQ2FjaGUiLCJjbGF1c2VzIiwidGVybXMiLCJ1c2VQaXBlbGluZSIsIm0iLCJKU09OIiwic3RyaW5naWZ5IiwidGVybUluZGV4IiwidGVybVRva2VuU2V0IiwiZXhwYW5kZWRUZXJtcyIsImV4cGFuZGVkVGVybSIsIl9pbmRleCIsImsiLCJmaWVsZCIsImZpZWxkUG9zdGluZyIsIm1hdGNoaW5nRG9jdW1lbnRSZWZzIiwidGVybUZpZWxkIiwiYm9vc3QiLCJsIiwiZmllbGRNYXRjaCIsIm1hdGNoaW5nRG9jdW1lbnRSZWYiLCJtYXRjaGluZ0ZpZWxkUmVmIiwiTWF0Y2hEYXRhIiwibWF0Y2hpbmdGaWVsZFJlZnMiLCJyZXN1bHRzIiwibWF0Y2hlcyIsImRvY01hdGNoIiwiZmllbGRWZWN0b3IiLCJzY29yZSIsIm1hdGNoRGF0YSIsImNvbWJpbmUiLCJyZWYiLCJzZXJpYWxpemVkSW5kZXgiLCJzZXJpYWxpemVkVmVjdG9ycyIsInNlcmlhbGl6ZWRJbnZlcnRlZEluZGV4IiwidG9rZW5TZXRCdWlsZGVyIiwidHVwbGUiLCJfcmVmIiwiX2ZpZWxkcyIsImZpZWxkVGVybUZyZXF1ZW5jaWVzIiwiZmllbGRMZW5ndGhzIiwiX2IiLCJfazEiLCJtZXRhZGF0YVdoaXRlbGlzdCIsIm51bWJlciIsImsxIiwiZG9jIiwiZmllbGRUZXJtcyIsIm1ldGFkYXRhS2V5IiwiY2FsY3VsYXRlQXZlcmFnZUZpZWxkTGVuZ3RocyIsImZpZWxkUmVmcyIsIm51bWJlck9mRmllbGRzIiwiYWNjdW11bGF0b3IiLCJkb2N1bWVudHNXaXRoRmllbGQiLCJhdmVyYWdlRmllbGRMZW5ndGgiLCJjcmVhdGVGaWVsZFZlY3RvcnMiLCJmaWVsZFJlZnNMZW5ndGgiLCJ0ZXJtSWRmQ2FjaGUiLCJmaWVsZExlbmd0aCIsInRlcm1GcmVxdWVuY2llcyIsInRlcm1zTGVuZ3RoIiwic2NvcmVXaXRoUHJlY2lzaW9uIiwidGYiLCJyb3VuZCIsImNyZWF0ZVRva2VuU2V0IiwidXNlIiwiYXJncyIsInVuc2hpZnQiLCJhcHBseSIsImNsb25lZE1ldGFkYXRhIiwibWV0YWRhdGFLZXlzIiwia2V5Iiwib3RoZXJNYXRjaERhdGEiLCJhbGxGaWVsZHMiLCJ3aWxkY2FyZCIsIk5PTkUiLCJMRUFESU5HIiwiVFJBSUxJTkciLCJRdWVyeVBhcnNlRXJyb3IiLCJRdWVyeUxleGVyIiwibGV4ZW1lcyIsImVzY2FwZUNoYXJQb3NpdGlvbnMiLCJzdGF0ZSIsImxleFRleHQiLCJzbGljZVN0cmluZyIsInN1YlNsaWNlcyIsImpvaW4iLCJlbWl0IiwiZXNjYXBlQ2hhcmFjdGVyIiwiRU9TIiwiaWdub3JlIiwiYmFja3VwIiwiYWNjZXB0RGlnaXRSdW4iLCJjaGFyQ29kZSIsImNoYXJDb2RlQXQiLCJtb3JlIiwiRklFTEQiLCJURVJNIiwiRURJVF9ESVNUQU5DRSIsIkJPT1NUIiwibGV4RmllbGQiLCJsZXhlciIsImxleFRlcm0iLCJsZXhFZGl0RGlzdGFuY2UiLCJsZXhCb29zdCIsImxleEVPUyIsInRlcm1TZXBhcmF0b3IiLCJjdXJyZW50Q2xhdXNlIiwibGV4ZW1lSWR4IiwicGFyc2VGaWVsZE9yVGVybSIsInBlZWtMZXhlbWUiLCJjb25zdW1lTGV4ZW1lIiwibGV4ZW1lIiwibmV4dENsYXVzZSIsImNvbXBsZXRlZENsYXVzZSIsInBhcnNlRmllbGQiLCJwYXJzZVRlcm0iLCJlcnJvck1lc3NhZ2UiLCJwb3NzaWJsZUZpZWxkcyIsImYiLCJuZXh0TGV4ZW1lIiwicGFyc2VFZGl0RGlzdGFuY2UiLCJwYXJzZUJvb3N0IiwicGFyc2VJbnQiLCJpc05hTiIsImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJleHBvcnRzIiwibW9kdWxlIiwiTGV2ZW5zaHRlaW4iLCJhcnJheSIsImdldENoYXIiLCJpZHgiLCJnZXRBcnJheU1lbWJlciIsInN0cl9tIiwic3RyX24iLCJwcmV2aW91cyIsImN1cnJlbnQiLCJtYXRyaXgiLCJnZXRFbGVtIiwiX21hdHJpeCIsImRpc3RhbmNlIiwibl92YWwiLCJuX2lkeCIsIm1fdmFsIiwibV9pZHgiLCJtaW4iLCJpbnNwZWN0Iiwibm9fcHJpbnQiLCJtYXgiLCJidWZmIiwic2VwIiwicm93cyIsImdldE1hdHJpeCIsIm8iLCJyb3ciLCJjZWxscyIsImNlbGwiLCJnZXRTdGVwcyIsInN0ZXBzIiwieSIsInUiLCJkIiwiTnVtYmVyIiwiTUFYX1ZBTFVFIiwidmFsdWVPZiIsImdob3N0SHVudGVyIiwib3B0cyIsImRlZmF1bHRzIiwicGx1Z2luTWV0aG9kcyIsInJlc3VsdHNEYXRhIiwib25QYWdlTG9hZCIsIm9uS2V5VXAiLCJyZXN1bHRfdGVtcGxhdGUiLCJpbmZvX3RlbXBsYXRlIiwiZGlzcGxheVNlYXJjaEluZm8iLCJ6ZXJvUmVzdWx0c0luZm8iLCJvbkNvbXBsZXRlIiwiaW5jbHVkZXBhZ2VzIiwiZmlsdGVyZmllbGRzIiwic3VicGF0aCIsIml0ZW1fcHJlcHJvY2Vzc29yIiwiaW5kZXhpbmdfc3RhcnQiLCJpbmRleGluZ19lbmQiLCJwcmV0dHlEYXRlIiwiZGF0ZSIsIkRhdGUiLCJtb250aE5hbWVzIiwiZ2V0RGF0ZSIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJnZXRTdWJwYXRoS2V5IiwibGFzdFRpbWVvdXRJRCIsInNldHRsZUlEcyIsIm9sZEF0dHIiLCJnZXRBdHRyaWJ1dGUiLCJuZXdBdHRyIiwic2V0QXR0cmlidXRlIiwidXBkYXRlU2VhcmNoTGlzdCIsImxpc3RJdGVtcyIsImFwaURhdGEiLCJpbGVuIiwic3RlcCIsImVxIiwibHVucnJlZiIsInBvc3REYXRhIiwiYmxvZ0RhdGEiLCJmb3JtYXQiLCJyZXBsYWNlV2l0aCIsImdyYWJBbmRJbmRleCIsImxhdGVzdFBvc3QiLCJwYXJhbXMiLCJsaW1pdCIsImluY2x1ZGUiLCJmb3JtYXRzIiwiZmlsdGVyIiwibWUiLCJnZXQiLCJnaG9zdCIsImFwaSIsImRvbmUiLCJkYXRhIiwiaWR4U3JjIiwicG9zdHMiLCJhcnJheUl0ZW0iLCJpdGVtRGF0ZSIsInVwZGF0ZWRfYXQiLCJnZXRUaW1lIiwicmVjb3JkZWREYXRlIiwidGFnX2FyciIsInRhZ3MiLCJtZXRhX2Rlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJwYXJzZWREYXRhIiwiU3RyaW5nIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImN1c3RvbV9leGNlcnB0IiwicGxhaW50ZXh0IiwicHViRGF0ZSIsInB1Ymxpc2hlZF9hdCIsInRhZyIsImxvY2FsVXJsIiwibGluayIsImFzc2lnbiIsInN1YnBhdGhLZXkiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiaXNJbml0IiwidGFyZ2V0IiwidGhhdCIsIm1pYW0iLCJsb2FkQVBJIiwic3VibWl0Iiwia2V5ZG93biIsIndoaWNoIiwia2V5dXAiLCJnZXRJdGVtIiwidmFsdWUiLCJjbGVhclRpbWVvdXQiLCJ0aGluZ3NGb3VuZCIsInZhbHVlU3BsaXQiLCJzcGxpdCIsInNlYXJjaFJlc3VsdCIsImpsZW4iLCJvdGhlclJlZnMiLCJrbGVuIiwiZW1wdHkiLCJhcHBlbmQiLCJhbW91bnQiLCJjaGlsZHJlbiIsImN1cnJlbnRSZWZzIiwibmV3UmVmcyIsImxldmVuc2h0ZWluIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQUF5QkEsUUFBU0EsUUFBT0MsRUFBS0MsRUFBVUMsR0FDM0IsR0FBSUMsS0FBU0MsT0FBT0MsY0FDaEJDLEVBQVFILElBQVNDLE9BQU9HLGVBQ3hCQyxFQUFTQyxTQUFTQyxjQUFjLFVBQ2hDQyxFQUFPTCxFQUFRRyxTQUFTRyxnQkFBa0JILFNBQVNJLHFCQUFxQixRQUFRLEVBQ3BGTCxHQUFPTSxLQUFPLGtCQUNkTixFQUFPTyxPQUFRLEVBQ1hQLEVBQU9RLFdBQ1BSLEVBQU9TLG1CQUFxQixXQUNDLFVBQXJCVCxFQUFPUSxZQUErQyxZQUFyQlIsRUFBT1EsYUFDeENSLEVBQU9TLG1CQUFxQixLQUN4QmhCLEdBQ0FBLE1BS1pPLEVBQU9VLE9BQVMsV0FDUmpCLEdBQ0FBLEtBSVpPLEVBQU9XLElBQU1uQixFQUNURSxFQUNBTyxTQUFTVyxlQUFlbEIsR0FBSW1CLFlBQVliLEdBRXhDRyxFQUFLVyxhQUFhZCxFQUFRRyxFQUFLWSxZQXBEdkMsR0FBSUMsVUFBVSxDQUVkQyxHQUFFQyxHQUFHQyxRQUVEQyxrQkFBbUIsV0FDZixJQUFLSCxFQUFFLFFBQVFJLFNBQVMsaUJBQ3BCLE9BQU8sQ0FFWCxJQUFJQyxHQUFNTCxFQUFFckIsUUFDUjJCLEdBQ0FDLElBQUtGLEVBQUlHLFlBQ1RDLEtBQU1KLEVBQUlLLGFBRWRKLEdBQVNLLE1BQVFMLEVBQVNHLEtBQU9KLEVBQUlPLFFBQ3JDTixFQUFTTyxPQUFTUCxFQUFTQyxJQUFNRixFQUFJUyxRQUVyQyxJQUFJ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QUN4QzBvQixFQUFRL2QsS0FBS3NkLEVBQWFqb0IsR0FBR3daLElBRy9CLElBQUltUCxHQUFjLEdBQUloSixhQUFZOEksRUFBYUMsR0FDM0NqSCxFQUFRa0gsRUFBWW5ILFVBRXhCd0MsR0FBaUJ4ZSxLQUFLeEssS0FBTWlwQixFQUFXZ0UsRUFBY3hHLEdBR3BEem1CLEtBQUsybkIsWUFDTjNuQixLQUFLMm5CLFdBQVdQLElBRWxCbmQsS0FBS2pLLE1BQU8sTUFHaEIrSCxNQUFjLFdBQ1ovSSxFQUFFZ0IsS0FBS2llLFNBQVNvUCxTQUlsQjVELE9BQWMsU0FBVXhhLEVBQUcyWCxHQUN6QixNQUFPM1gsR0FBRTZJLFFBQVEsZ0JBQWlCLFNBQVV0TSxFQUFHd0gsR0FDN0MsR0FBSTdCLEdBQUl5VixFQUFFNVQsRUFDVixPQUFvQixnQkFBTjdCLElBQStCLGdCQUFOQSxHQUFpQkEsRUFBSTNGLE9BS2hFb2lCIiwiZmlsZSI6ImRldi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgaXNEZWJ1ZyA9IGZhbHNlO1xuXG4kLmZuLmV4dGVuZCh7XG5cbiAgICBpc09uU2NyZWVuVmlzaWJsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghJCgnYm9keScpLmhhc0NsYXNzKCdwb3N0LXRlbXBsYXRlJykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd2luID0gJCh3aW5kb3cpO1xuICAgICAgICB2YXIgdmlld3BvcnQgPSB7XG4gICAgICAgICAgICB0b3A6IHdpbi5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgIGxlZnQ6IHdpbi5zY3JvbGxMZWZ0KClcbiAgICAgICAgfTtcbiAgICAgICAgdmlld3BvcnQucmlnaHQgPSB2aWV3cG9ydC5sZWZ0ICsgd2luLndpZHRoKCk7XG4gICAgICAgIHZpZXdwb3J0LmJvdHRvbSA9IHZpZXdwb3J0LnRvcCArIHdpbi5oZWlnaHQoKTtcblxuICAgICAgICB2YXIgYm91bmRzID0gdGhpcy5vZmZzZXQoKTtcbiAgICAgICAgYm91bmRzLnJpZ2h0ID0gYm91bmRzLmxlZnQgKyB0aGlzLm91dGVyV2lkdGgoKTtcbiAgICAgICAgYm91bmRzLmJvdHRvbSA9IGJvdW5kcy50b3AgKyB0aGlzLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgcmV0dXJuICghKHZpZXdwb3J0LnJpZ2h0IDwgYm91bmRzLmxlZnQgfHwgdmlld3BvcnQubGVmdCA+IGJvdW5kcy5yaWdodCB8fCB2aWV3cG9ydC5ib3R0b20gPCBib3VuZHMudG9wIHx8IHZpZXdwb3J0LnRvcCA+IGJvdW5kcy5ib3R0b20pKTtcbiAgICB9LFxuXG59KTtcblxuZnVuY3Rpb24gbG9hZEpTKHVybCwgY2FsbGJhY2ssIGVsKSB7XG4gICAgdmFyIGlzSUUgPSAhIXdpbmRvdy5BY3RpdmVYT2JqZWN0LFxuICAgICAgICBpc0lFNiA9IGlzSUUgJiYgIXdpbmRvdy5YTUxIdHRwUmVxdWVzdCxcbiAgICAgICAgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxcbiAgICAgICAgaGVhZCA9IGlzSUU2ID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IDogZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xuICAgIHNjcmlwdC50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcbiAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICAgIGlmIChzY3JpcHQucmVhZHlTdGF0ZSkge1xuICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoc2NyaXB0LnJlYWR5U3RhdGUgPT0gXCJsb2FkZWRcIiB8fCBzY3JpcHQucmVhZHlTdGF0ZSA9PSBcImNvbXBsZXRlXCIpIHtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgc2NyaXB0LnNyYyA9IHVybDtcbiAgICBpZiAoZWwpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWwpLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaGVhZC5pbnNlcnRCZWZvcmUoc2NyaXB0LCBoZWFkLmZpcnN0Q2hpbGQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBZYXN1a28g6YWN572u5paH5Lu2XG4gKiDlpJror7Tor4TorrrosIPnlKjnrYlcbiAqL1xuXG52YXIgR2VuZXJhbCA9IHtcbiAgICBpc01vYmlsZTogZmFsc2UsXG4gICAgaXNXZWNoYXQ6IGZhbHNlLFxuICAgIHZpZXdXaWR0aDogJCh3aW5kb3cpLndpZHRoKCksXG4gICAgYWJzVXJsOiBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0LFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgd2luID0gd2luZG93O1xuICAgICAgICB2YXIgZG9jID0gd2luLmRvY3VtZW50O1xuICAgICAgICB2YXIgVUEgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhciBpc0FuZHJvaWQgPSB3aW4ubmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL2FuZHJvaWQvZ2kpO1xuICAgICAgICB2YXIgaXNJUGhvbmUgPSB3aW4ubmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL2lwaG9uZS9naSk7XG4gICAgICAgIGlmIChVQS5tYXRjaCgvTWljcm9NZXNzZW5nZXIvaSkgPT0gXCJtaWNyb21lc3NlbmdlclwiKSB7XG4gICAgICAgICAgICBHZW5lcmFsLmlzV2VjaGF0ID0gdHJ1ZTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnd2VjaGF0LXdlYnZpZXcnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISFpc0FuZHJvaWQpIHtcbiAgICAgICAgICAgIEdlbmVyYWwuaXNNb2JpbGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3Bvc3QtdGVtcGxhdGUnKSkge1xuICAgICAgICAgICAgR2VuZXJhbC51cGRhdGVJbWFnZVdpZHRoKCk7XG4gICAgICAgICAgICBHZW5lcmFsLnJld2FyZExvYWRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgR2VuZXJhbC53ZWJGb250TG9hZGVyKCk7XG4gICAgICAgIEdlbmVyYWwuc2Nyb2xsVG9Qb3MoKTtcbiAgICB9LFxuICAgIHVwZGF0ZUltYWdlV2lkdGg6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgJHBvc3RDb250ZW50ID0gJChcIi5wb3N0LWNvbnRlbnRcIik7XG4gICAgICAgIC8vICRwb3N0Q29udGVudC5maXRWaWRzKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlSW1hZ2VXaWR0aCgpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgY29udGVudFdpZHRoID0gJHBvc3RDb250ZW50Lm91dGVyV2lkdGgoKSwgLy8gV2lkdGggb2YgdGhlIGNvbnRlbnRcbiAgICAgICAgICAgICAgICBpbWFnZVdpZHRoID0gdGhpcy5uYXR1cmFsV2lkdGg7IC8vIE9yaWdpbmFsIGltYWdlIHJlc29sdXRpb25cblxuICAgICAgICAgICAgaWYgKGltYWdlV2lkdGggPj0gY29udGVudFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ2Z1bGwtaW1nJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdmdWxsLWltZycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyICRpbWcgPSAkKFwiLnNpbmdsZS1wb3N0LWlubmVyIGltZ1wiKS5vbignbG9hZCcsIHVwZGF0ZUltYWdlV2lkdGgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNhc3BlckZ1bGxJbWcoKSB7XG4gICAgICAgICAgICAkaW1nLmVhY2godXBkYXRlSW1hZ2VXaWR0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBjYXNwZXJGdWxsSW1nKCk7XG4gICAgfSxcbiAgICB3ZWJGb250TG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgV2ViRm9udENvbmZpZyA9IHtcbiAgICAgICAgICAgIGxvYWRpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBpZiAoaXNEZWJ1Zykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nIGZvbnQnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGN1c3RvbToge1xuICAgICAgICAgICAgICAgIGZhbWlsaWVzOiBbJ0V4bycsICdpY29uZm9udCcsICdmb250YXdlc29tZSddLFxuICAgICAgICAgICAgICAgIHVybHM6IFtHZW5lcmFsLmFic1VybCArICcvYXNzZXRzL2Nzcy9mb250Lm1pbi5jc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICBHZW5lcmFsLmFic1VybCArICcvYXNzZXRzL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcydcbiAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGxvYWRKUyhHZW5lcmFsLmFic1VybCArICcvYXNzZXRzL2pzL3dlYmZvbnQuanMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChpc0RlYnVnKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfliqDovb3lrZfkvZNKUycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgV2ViRm9udC5sb2FkKHtcbiAgICAgICAgICAgICAgICBjdXN0b206IHtcbiAgICAgICAgICAgICAgICAgICAgZmFtaWxpZXM6IFsnRXhvJywgJ2ljb25mb250JywgJ2ZvbnRhd2Vzb21lJ11cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8v5bmz5ruR5rua5Yqo5Yiw6aG26YOoXG4gICAgc2Nyb2xsVG9Qb3M6IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XG4gICAgICAgIHZhciBTVFJfVE9fVE9QID0gJ+aIkeimgemjnuWIsOacgOmrmCcsXG4gICAgICAgICAgICBjb3ZlckhlaWdodCA9IHBvc2l0aW9uIHx8ICQod2luZG93KS5oZWlnaHQoKTsgLy/ojrflvpflm77niYfpq5jluqZcbiAgICAgICAgdmFyIGJ1dHRvbiA9ICQoJzxhIGhyZWY9XCIjXCIgaWQ9XCJ0by10b3BcIiB0aXRsZT1cIicgKyBTVFJfVE9fVE9QICsgJ1wiPiA8ZGl2IGNsYXNzPVwidG8tdG9wLXdyYXBcIj48L2Rpdj48L2E+JykuYXBwZW5kVG8oJ2JvZHknKTtcbiAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiAkKHdpbmRvdykuaGVpZ2h0KCkpIHtcbiAgICAgICAgICAgICAgICBidXR0b24uZmFkZUluKDUwMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5mYWRlT3V0KDUwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJ1dHRvbi5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IDBcbiAgICAgICAgICAgIH0sIDY2NiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnIyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChpc0RlYnVnKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmiJHot7MnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvKue7meaWh+eroOS4reeahHVybOa3u+WKoGljb25mb2505pa55L6/6K+G5YirKi9cbiAgICB1cmxJY29ubGl6ZTogZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIHZhciBkb21haW4sXG4gICAgICAgICAgICBfb3V0cHV0O1xuICAgICAgICB2YXIgaWNvbkZvbnRUYWcgPSAnaWNvbmZvbnQnO1xuICAgICAgICB2YXIgaWNvbk1hcCA9IHsgLyrntKLlvJUg5Y+v5Zyo6L+Z6YeM5re75Yqg5Yy56YWN6KeE5YiZKi9cbiAgICAgICAgICAgICd0d2l0dGVyJzogJ2ljb25mb250LXR3aXR0ZXIgaWNvbi1pY29uZm9udHR3aXR0ZXInLFxuICAgICAgICAgICAgJ3F6b25lJzogJ2ljb25mb250LXF6b25lIGljb24tcXpvbmUnLFxuICAgICAgICAgICAgJ3dlaWJvJzogJ2ljb25mb250LXdlaWJvIGljb24taWNvbmZvbnR3ZWlibycsXG4gICAgICAgICAgICAnZmFjZWJvb2snOiAnaWNvbmZvbnQtZmFjZWJvb2sgaWNvbi1pY29uZm9udGZhY2Vib29rJyxcbiAgICAgICAgICAgICdnaXRodWInOiAnaWNvbmZvbnQtZ2l0aHViIGljb24tZ2l0aHViJyxcbiAgICAgICAgICAgICdkb3ViYW4nOiAnaWNvbmZvbnQtZG91YmFuIGljb24taWNvbmZvbnRkb3ViYW4nLFxuICAgICAgICAgICAgJ2dvb2dsZSc6ICdpY29uZm9udC1nb29nbGUgaWNvbi1pY29uZm9udGdvb2dsZScsXG4gICAgICAgICAgICAnbHVvbGVpJzogJ2ljb25mb250LWx1b2xlaSBpY29uLWx1b2xlaScsXG4gICAgICAgICAgICAnZHJpYmJsZSc6ICdpY29uZm9udC1kcmliYmxlIGljb24tZHJpYmJibGVjaXJjbGVkJyxcbiAgICAgICAgICAgICd2MmV4JzogJ2ljb25mb250LXYyZXggaWNvbi1pY29uZm9udHYyZXgnLFxuICAgICAgICAgICAgJ3poaWh1JzogJ2ljb25mb250LXpoaWh1IGljb24taWNvbmZvbnR6aGlodScsXG4gICAgICAgICAgICAnd2lraXBlZGlhJzogJ2ljb25mb250LXdpa2lwZWRpYSBpY29uLWljb25mb250d2lraXBlZGlhJyxcbiAgICAgICAgICAgICdqaWFuc2h1JzogJ2ljb25mb250LWppYW5zaHUgaWNvbi1qaWFuc2h1JyxcbiAgICAgICAgICAgICd5b3VrdSc6ICdpY29uZm9udC15b3VrdSBpY29uLWljb25mb250eW91a3UnLFxuICAgICAgICAgICAgJ3lvdXR1YmUnOiAnaWNvbmZvbnQteW91dHViZSBpY29uLXlvdXR1YmUnLFxuICAgICAgICAgICAgJ2p1ZWppbic6J2ljb25mb250LWp1ZWppbiBpY29uLWp1ZWppbicsXG4gICAgICAgICAgICAnd2VpeGluJzonaWNvbmZvbnQtd2VpeGluIGljb24taWNvbmZvbnR3ZWNoYXQnLFxuICAgICAgICAgICAgJ3NlZ21lbnRmYXVsdCc6J2ljb25mb250LXNmIGljb24taWNvbnNmLWNvcHknXG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBpY29uTWFwKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGljb25NYXBbbmFtZV0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB2YXIgTWFwS2V5ID0gbmFtZTtcbiAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoTWFwS2V5KSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbWFpbiA9IE1hcEtleTtcbiAgICAgICAgICAgICAgICAgICAgX291dHB1dCA9IGljb25NYXBbTWFwS2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX291dHB1dDtcbiAgICB9LFxuICAgIGFkZEljb25zOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLyrnu5nljZrlrqLmlofnq6DlnLDlnYB1cmzmt7vliqBpY2/or4bliKsqL1xuICAgICAgICAkKCcuc2luZ2xlLXBvc3QtaW5uZXIgIGE6bm90KDpoYXMoaW1nKSknKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgIHZhciBfc3JjID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgICAgICAgICB2YXIgdG1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgdG1wLmhyZWYgPSBfc3JjO1xuICAgICAgICAgICAgX3NlbGZEb21haW4gPSB0bXAuaG9zdG5hbWU7XG4gICAgICAgICAgICBHZW5lcmFsLnVybEljb25saXplKF9zZWxmRG9tYWluKTtcbiAgICAgICAgICAgIGlmIChpc0RlYnVnKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9zZWxmRG9tYWluKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQodGhpcykucHJlcGVuZCgnPGkgY2xhc3M9XCJpY29uZm9udCAnICsgR2VuZXJhbC51cmxJY29ubGl6ZShfc2VsZkRvbWFpbikgKyAnXCI+PC9pPicpO1xuICAgICAgICAgICAgdmFyIF9zZWxmQ29sb3IgPSAkKHRoaXMpLmZpbmQoJ2knKS5jc3MoJ2NvbG9yJyksXG4gICAgICAgICAgICAgICAgX29yaWdpbmFsQ29sb3IgPSAkKHRoaXMpLmNzcygnY29sb3InKTtcblxuICAgICAgICAgICAgLyrpvKDmoIfmgqzmta7ml7YqL1xuICAgICAgICAgICAgJCh0aGlzKS5ob3ZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnY29sb3InLCBfc2VsZkNvbG9yKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhbmltYXRlZCBwdWxzZScpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2NvbG9yJywgX29yaWdpbmFsQ29sb3IpO1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHB1bHNlJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8v5omT6LWPXG4gICAgcmV3YXJkTG9hZGVyOiBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgbG9hZFFSID0ge1xuICAgICAgICAgICAgYWxpcGF5OiAnL2Fzc2V0cy9pbWFnZXMvcXItYWxpcGF5LTI1NS5wbmcnLFxuICAgICAgICAgICAgd2VjaGF0OiAnL2Fzc2V0cy9pbWFnZXMvcXItd2VjaGF0LTI1NS5wbmcnXG4gICAgICAgIH07XG4gICAgICAgIHZhciBsb2FkUVJVcmw7XG4gICAgICAgIGlmICghIUdlbmVyYWwuaXNXZWNoYXQpIHtcbiAgICAgICAgICAgICQoJy53ZWNoYXQtY29kZSBiJykuaHRtbCgn6ZW/5oyJ5LiK5pa55LqM57u056CB5omT6LWP5L2c6ICFJyk7XG4gICAgICAgICAgICAvLyAkKCcucXItY29kZScpLmZhZGVPdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoJy5tb25leS1saWtlIC5yZXdhcmQtYnV0dG9uJykuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoaXNEZWJ1Zykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5oKs5rWuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKCdpbWcud2VjaGF0LWltZycpLmF0dHIoJ3NyYycsIGxvYWRRUi53ZWNoYXQpO1xuICAgICAgICAgICAgJCgnaW1nLmFsaXBheS1pbWcnKS5hdHRyKCdzcmMnLCBsb2FkUVIuYWxpcGF5KTtcbiAgICAgICAgICAgICQoJy5tb25leS1jb2RlJykuZmFkZUluKCk7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcubW9uZXktY29kZScpLmZhZGVPdXQoKTtcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9LCA4MDApO1xuXG4gICAgICAgICQoJy5tb25leS1saWtlIC5yZXdhcmQtYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2ltZy53ZWNoYXQtaW1nJykuYXR0cignc3JjJywgbG9hZFFSLndlY2hhdCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbWcuYWxpcGF5LWltZycpLmF0dHIoJ3NyYycsIGxvYWRRUi5hbGlwYXkpO1xuICAgICAgICAgICAgICAgICQoJy5tb25leS1jb2RlJykuZmFkZU91dCgpO1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5tb25leS1jb2RlJykuZmFkZUluKCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cbnZhciBJbWFnZVNtYXJ0TG9hZGVyID0ge1xuICAgIGlzV2ViUFN1cHBvcnRlZDogZmFsc2UsXG4gICAgaXNJbWFnZUNvbXByZXNzZWQ6IGZhbHNlLFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBJbWFnZVNtYXJ0TG9hZGVyLndlYlBDaGVjaygpO1xuICAgIH0sXG4gICAgaXNDb21wcmVzc2VkQ2hlY2s6IGZ1bmN0aW9uKCkge1xuXG4gICAgfSxcbiAgICB3ZWJQQ2hlY2s6IGZ1bmN0aW9uKGZlYXR1cmUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBUZXN0SW1hZ2VzID0ge1xuICAgICAgICAgICAgZGVtbzogXCJVa2xHUmtvQUFBQlhSVUpRVmxBNFdBb0FBQUFRQUFBQUFBQUFBQUFBUVV4UVNBc0FBQUFCQnhBUkVZaUkvZ2NBQUFCV1VEZ2dHQUFBQURBQkFKMEJLZ0VBQVFBQkFCd2xwQUFEY0FEKy9nYlFBQT09XCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGlzRGVidWcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn5pSv5oyBV2VicOWTpicpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IChpbWcud2lkdGggPiAwKSAmJiAoaW1nLmhlaWdodCA+IDApO1xuICAgICAgICAgICAgaWYgKGlzRGVidWcpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+aUr+aMgVdlYnAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGFsZXJ0KCfmlK/mjIEnKVxuICAgICAgICAgICAgSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgSW1hZ2VTbWFydExvYWRlci53ZWJQTG9hZGVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIGltZy5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoaXNEZWJ1Zykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5LiN5pSv5oyBV2VicCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIEltYWdlU21hcnRMb2FkZXIud2ViUExvYWRlcigpO1xuICAgICAgICB9O1xuICAgICAgICBpbWcuc3JjID0gXCJkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFwiICsgVGVzdEltYWdlcy5kZW1vO1xuXG4gICAgfSxcbiAgICBpbWdMb2FkZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaXNEZWJ1Zykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfliqDovb3pu5jorqTlm77niYcnKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgd2ViUExvYWRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChpc0RlYnVnKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+WKoOi9vXdlYlAnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhbGVydChJbWFnZVNtYXJ0TG9hZGVyLmlzV2ViUFN1cHBvcnRlZCk7XG4gICAgICAgIGlmIChJbWFnZVNtYXJ0TG9hZGVyLmlzV2ViUFN1cHBvcnRlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKGlzRGVidWcpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WuveW6puaYrycgKyBHZW5lcmFsLnZpZXdXaWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoR2VuZXJhbC52aWV3V2lkdGggPT0gNzY4KSB7XG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChHZW5lcmFsLnZpZXdXaWR0aCA8IDc2OCkge1xuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVfd2lkdGg6IDc1MFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBhbGVydCgn5pmu6YCa5pSv5oyBJylcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChHZW5lcmFsLnZpZXdXaWR0aCA9PSA3NjgpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZV93aWR0aDogMTUwMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChHZW5lcmFsLnZpZXdXaWR0aCA8IDc2OCkge1xuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlX3dpZHRoOiA3NTBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoJ+aZrumAmuaUr+aMgScpXG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG59O1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICB2YXIgJHdpbmRvdyA9ICQod2luZG93KTtcblxuICAgIC8vIFNjcm9sbCB0byBjb250ZW50XG5cdFx0Ly8gJCgnLnNjcm9sbC1kb3duJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdC8vIFx0dmFyICRjb3ZlciA9ICQodGhpcykuY2xvc2VzdCgnLmNvdmVyJyk7XG5cdFx0Ly8gXHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG5cdFx0Ly8gXHRcdHNjcm9sbFRvcDogJGNvdmVyLnBvc2l0aW9uKCkudG9wICsgJGNvdmVyLmhlaWdodCgpXG5cdFx0Ly8gXHR9LCA4MDAgKTtcblx0XHQvLyBcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHQvLyB9KTtcblxuICAgIC8vIGFkanVzdENvdmVyKCk7XG4gICAgLy8gdmFyIGxhenlSZXNpemUgPSBkZWJvdW5jZShhZGp1c3RDb3ZlciwgMjAwLCBmYWxzZSk7XG4gICAgLy8gJCh3aW5kb3cpLnJlc2l6ZShsYXp5UmVzaXplKTtcblxuICAgIC8vIFNjcm9sbCB0byBjb250ZW50XG4gICAgdmFyIHNjcm9sbEhpbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Nyb2xsLWhpbnQnKTtcbiAgICBpZiAoc2Nyb2xsSGludCAhPT0gbnVsbCkge1xuICAgICAgLy8gICBzY3JvbGxIaW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAvLyAgICAgaWYgKCFzY3JvbGxIaW50LmNsYXNzTGlzdC5jb250YWlucygndmlzaWJsZScpKVxuICAgICAgLy8gICAgICAgICByZXR1cm47XG4gICAgICAvLyAgICAgICB3aW5kb3cuc2Nyb2xsQnkoe1xuICAgICAgLy8gICAgICAgICB0b3A6IHdpbmRvdy5pbm5lckhlaWdodCxcbiAgICAgIC8vICAgICAgICAgbGVmdDogMCxcbiAgICAgIC8vICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICAvLyAgICAgfSk7XG4gICAgICAvLyB9KTtcblxuICAgICAgLy8gU2Nyb2xsIHRvIGNvbnRlbnRcblx0XHQkKCcuaGVhZGVyLXNjcm9sbC1oaW50Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdFx0dmFyICRjb3ZlciA9ICQodGhpcykuY2xvc2VzdCgnLmNvdmVyJyk7XG5cdFx0XHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG5cdFx0XHRcdHNjcm9sbFRvcDogJGNvdmVyLnBvc2l0aW9uKCkudG9wICsgJGNvdmVyLmhlaWdodCgpXG5cdFx0XHR9LCA0MDAgKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9KTtcblxuICAgICAgLy8gJCgnLmNvdmVyIC5hcnJvdy1kb3duJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgLy8gICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7J3Njcm9sbFRvcCc6ICQoJy5jb3ZlcicpLmhlaWdodCgpfSwgODAwKTtcbiAgICAgIC8vICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gfSk7XG5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgICAgICAgIGlmIChzY3JvbGxUb3AgPiAwKSB7XG4gICAgICAgICAgICAgIHNjcm9sbEhpbnQuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNjcm9sbEhpbnQuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgICAgICAgIGlmIChzY3JvbGxUb3AgPiAwKSB7XG4gICAgICAgICAgICAgIHNjcm9sbEhpbnQuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNjcm9sbEhpbnQuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkanVzdENvdmVyKCkge1xuXHRcdCAgICBzZXRFbGVtZW50SGVpZ2h0KCcucG9zdC1oZWFkZXIuY292ZXInKTtcblx0ICB9XG5cblx0ICAvLyBTZXQgdGhlIG5ldyBoZWlnaHQgb2YgYW4gZWxlbWVudFxuXHQgIGZ1bmN0aW9uIHNldEVsZW1lbnRIZWlnaHQoZWxlbWVudCl7XG5cdFx0ICAgIHZhciB3aW5kb3dIZWlnaHQgPSAoIHRydWU9PT1pc2lQb2QoKSAmJiB0cnVlPT09aXNTYWZhcmkoKSApID8gd2luZG93LnNjcmVlbi5hdmFpbEhlaWdodCA6ICQod2luZG93KS5oZWlnaHQoKTtcblx0XHQgICAgICB2YXIgb2Zmc2V0SGVpZ2h0ID0gJCgnLnNpdGUtaGVhZGVyJykub3V0ZXJIZWlnaHQoKTtcblx0XHQgICAgICAgIHZhciBuZXdIZWlnaHQgPSB3aW5kb3dIZWlnaHQ7XG5cdFx0ICAgICAgICAgIGlmICggJChlbGVtZW50KS5maW5kKCcuc2Nyb2xsLWRvd24nKS5pcygnOmhpZGRlbicpICkge1xuXHRcdFx0ICAgICAgICAgICAgICQoZWxlbWVudCkucmVtb3ZlQXR0cignc3R5bGUnKTtcblx0XHRcdCAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmZpbmQoJy5jb3Zlci1iZycpLmNzcygndG9wJywnJyk7XG5cdFx0ICAgICAgICAgIH1cblx0XHQgICAgICAgICAgZWxzZSB7XG5cdFx0XHQgICAgICAgICAgICAgJChlbGVtZW50KS5vdXRlckhlaWdodChuZXdIZWlnaHQpO1xuXHRcdFx0ICAgICAgICAgICAgICAgICQoZWxlbWVudCkuZmluZCgnLmNvdmVyLWJnJykuY3NzKCd0b3AnLG9mZnNldEhlaWdodCk7XG5cdFx0ICAgICAgICAgIH1cblx0ICB9XG5cblx0ICAvLyBUaHJvdHRsZXMgYW4gYWN0aW9uLlxuXHQgIC8vIFRha2VuIGZyb20gVW5kZXJzY29yZS5qcy5cblx0ICBmdW5jdGlvbiBkZWJvdW5jZSAoZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG5cdFx0ICAgIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcblx0XHQgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHQgICAgICAgICBjb250ZXh0ID0gdGhpcztcblx0XHRcdCAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG5cdFx0XHQgICAgICAgICB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpO1xuXHRcdFx0ICAgICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCAgICAgICAgICAgIHZhciBsYXN0ID0gKG5ldyBEYXRlKCkpIC0gdGltZXN0YW1wO1xuXHRcdFx0XHQgICAgICAgICAgICBpZiAobGFzdCA8IHdhaXQpIHtcblx0XHRcdFx0XHQgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcblx0XHRcdFx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0XHRcdFx0XHQgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgaWYgKCFpbW1lZGlhdGUpIHtcblx0XHRcdFx0XHRcdCAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgfVxuXHRcdFx0XHQgICAgICAgICAgICB9XG5cdFx0XHQgICAgICAgICB9O1xuXHRcdFx0ICAgICAgICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG5cdFx0XHQgICAgICAgICAgICBpZiAoIXRpbWVvdXQpIHtcblx0XHRcdFx0ICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcblx0XHRcdCAgICAgICAgICAgIH1cblx0XHRcdCAgICAgICAgICAgIGlmIChjYWxsTm93KSB7XG5cdFx0XHRcdCAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHRcdFx0ICAgICAgICAgICAgfVxuXHRcdFx0ICAgIHJldHVybiByZXN1bHQ7XG5cdFx0ICAgICAgfTtcblx0ICB9XG5cblx0ICAvLyBDaGVjayBpZiBkZXZpY2UgaXMgYW4gaVBob25lIG9yIGlQb2Rcblx0ICBmdW5jdGlvbiBpc2lQb2QoKXtcblx0XHQgICAgcmV0dXJuKC8oaVBob25lfGlQb2QpL2cpLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5cdCAgfVxuXG5cdCAgLy8gQ2hlY2sgaWYgYnJvd3NlciBpcyBTYWZhcmlcblx0ICBmdW5jdGlvbiBpc1NhZmFyaSgpe1xuXHRcdCAgICByZXR1cm4oLTEhPT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ1NhZmFyaScpJiYtMT09PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykpO1xuXHQgIH1cblxuXHRcdC8vIEhpZGRlbiBzZWN0aW9uc1xuXHRcdCQoJy5zaWRlYmFyLXRvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0Ly8gJCgnYm9keScpLnRvZ2dsZUNsYXNzKCdzaWRlYmFyLW9wZW5lZCcpOyDliIfmjaLnsbvliKvlj6/ku6Xnm7TmjqXnlKggdG9nZ2xlQ2xhc3NcbiAgICAgIGlmICggJCgnYm9keScpLmhhc0NsYXNzKCdzaWRlYmFyLW9wZW5lZCcpICkge1xuXHRcdFx0XHQkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3NpZGViYXItb3BlbmVkJyk7XG4gICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93Jywnc2Nyb2xsJyk7IC8vIOaBouWkjSBib2R577yM5YWB6K645LiL5bGC5ruR5YqoXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCdib2R5JykuYWRkQ2xhc3MoJ3NpZGViYXItb3BlbmVkJyk7XG4gICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywnaGlkZGVuJyk7IC8vIOmUgeWumiBib2R577yM56aB5q2i5LiL5bGC5ruR5YqoXG5cdFx0XHR9XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fSk7XG5cblx0XHQkKCcuc2VhcmNoLXRvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0aWYgKCAkKCdib2R5JykuaGFzQ2xhc3MoJ3NlYXJjaC1vcGVuZWQnKSApIHtcblx0XHRcdFx0JCgnYm9keScpLnJlbW92ZUNsYXNzKCdzZWFyY2gtb3BlbmVkJyk7XG4gICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93Jywnc2Nyb2xsJyk7IC8vIOaBouWkjSBib2R577yM5YWB6K645LiL5bGC5ruR5YqoXG5cdFx0XHRcdHNlYXJjaEZpZWxkLmNsZWFyKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCdib2R5JykuYWRkQ2xhc3MoJ3NlYXJjaC1vcGVuZWQnKTtcbiAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCdoaWRkZW4nKTsgLy8g6ZSB5a6aIGJvZHnvvIznpoHmraLkuIvlsYLmu5Hliqhcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkKCcjc2VhcmNoLWZpZWxkJykuZm9jdXMoKTtcblx0XHRcdFx0fSwgMzAwKTtcblx0XHRcdH1cblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9KTtcblx0XHQkKCcub3ZlcmxheScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0JCgnYm9keScpLnJlbW92ZUNsYXNzKCdzaWRlYmFyLW9wZW5lZCBzZWFyY2gtb3BlbmVkJyk7XG4gICAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsJ3Njcm9sbCcpOyAvLyDmgaLlpI0gYm9kee+8jOWFgeiuuOS4i+Wxgua7keWKqFxuXHRcdFx0c2VhcmNoRmllbGQuY2xlYXIoKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9KTtcblxuICAgIC8vIFNob3cgY29tbWVudHNcblx0XHRpZiAoIHR5cGVvZiBkaXNxdXNfc2hvcnRuYW1lICE9PSAndW5kZWZpbmVkJyApIHtcblx0XHRcdHZhciBkaXNxdXNfbG9hZGVkID0gZmFsc2U7XG5cdFx0XHQkKCcuY29tbWVudHMtdGl0bGUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIF90aGlzID0gJCh0aGlzKTtcblx0XHRcdFx0aWYgKCAhIGRpc3F1c19sb2FkZWQgKSB7XG5cdFx0XHRcdFx0JC5hamF4KHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiR0VUXCIsXG5cdFx0XHRcdFx0XHR1cmw6IFwiLy9cIiArIGRpc3F1c19zaG9ydG5hbWUgKyBcIi5kaXNxdXMuY29tL2VtYmVkLmpzXCIsXG5cdFx0XHRcdFx0XHRkYXRhVHlwZTogXCJzY3JpcHRcIixcblx0XHRcdFx0XHRcdGNhY2hlOiB0cnVlXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0X3RoaXMuYWRkQ2xhc3MoJ3RvZ2dsZWQtb24nKTtcblx0XHRcdFx0XHRkaXNxdXNfbG9hZGVkID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKCcjZGlzcXVzX3RocmVhZCcpLnNsaWRlVG9nZ2xlKCk7XG5cdFx0XHRcdFx0aWYgKCBfdGhpcy5oYXNDbGFzcygndG9nZ2xlZC1vbicpICkge1xuXHRcdFx0XHRcdFx0X3RoaXMucmVtb3ZlQ2xhc3MoJ3RvZ2dsZWQtb24nKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0X3RoaXMuYWRkQ2xhc3MoJ3RvZ2dsZWQtb24nKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuICAgICQuZm4ubGF6eWxvYWQgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXM7XG4gICAgICAgIHZhciAkY29udGFpbmVyO1xuICAgICAgICB2YXIgc2V0dGluZ3MgPSB7XG4gICAgICAgICAgICB0aHJlc2hvbGQ6IDAsXG4gICAgICAgICAgICBmYWlsdXJlX2xpbWl0OiAwLFxuICAgICAgICAgICAgZXZlbnQ6IFwic2Nyb2xsXCIsXG4gICAgICAgICAgICBlZmZlY3Q6IFwic2hvd1wiLFxuICAgICAgICAgICAgY29udGFpbmVyOiB3aW5kb3csXG4gICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogXCJvcmlnaW5hbFwiLFxuICAgICAgICAgICAgc2tpcF9pbnZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgYXBwZWFyOiBudWxsLFxuICAgICAgICAgICAgbG9hZDogbnVsbCxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIlwiLFxuICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogZmFsc2UsXG4gICAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNfc2NhbGU6IGZhbHNlLFxuICAgICAgICAgICAgc2NhbGVfd2lkdGg6IDc1MFxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBjb3VudGVyID0gMDtcblxuICAgICAgICAgICAgZWxlbWVudHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNraXBfaW52aXNpYmxlICYmICEkdGhpcy5pcyhcIjp2aXNpYmxlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCQuYWJvdmV0aGV0b3AodGhpcywgc2V0dGluZ3MpIHx8XG4gICAgICAgICAgICAgICAgICAgICQubGVmdG9mYmVnaW4odGhpcywgc2V0dGluZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qIE5vdGhpbmcuICovXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghJC5iZWxvd3RoZWZvbGQodGhpcywgc2V0dGluZ3MpICYmXG4gICAgICAgICAgICAgICAgICAgICEkLnJpZ2h0b2Zmb2xkKHRoaXMsIHNldHRpbmdzKSkge1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy50cmlnZ2VyKFwiYXBwZWFyXCIpO1xuICAgICAgICAgICAgICAgICAgICAvKiBpZiB3ZSBmb3VuZCBhbiBpbWFnZSB3ZSdsbCBsb2FkLCByZXNldCB0aGUgY291bnRlciAqL1xuICAgICAgICAgICAgICAgICAgICBjb3VudGVyID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKytjb3VudGVyID4gc2V0dGluZ3MuZmFpbHVyZV9saW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICAvKiBNYWludGFpbiBCQyBmb3IgYSBjb3VwbGUgb2YgdmVyc2lvbnMuICovXG4gICAgICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLmZhaWx1cmVsaW1pdCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZmFpbHVyZV9saW1pdCA9IG9wdGlvbnMuZmFpbHVyZWxpbWl0O1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmZhaWx1cmVsaW1pdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZWZmZWN0c3BlZWQpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmVmZmVjdF9zcGVlZCA9IG9wdGlvbnMuZWZmZWN0c3BlZWQ7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZWZmZWN0c3BlZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQuZXh0ZW5kKHNldHRpbmdzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIENhY2hlIGNvbnRhaW5lciBhcyBqUXVlcnkgYXMgb2JqZWN0LiAqL1xuICAgICAgICAkY29udGFpbmVyID0gKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykgPyAkd2luZG93IDogJChzZXR0aW5ncy5jb250YWluZXIpO1xuXG4gICAgICAgIC8qIEZpcmUgb25lIHNjcm9sbCBldmVudCBwZXIgc2Nyb2xsLiBOb3Qgb25lIHNjcm9sbCBldmVudCBwZXIgaW1hZ2UuICovXG4gICAgICAgIGlmICgwID09PSBzZXR0aW5ncy5ldmVudC5pbmRleE9mKFwic2Nyb2xsXCIpKSB7XG4gICAgICAgICAgICAkY29udGFpbmVyLmJpbmQoc2V0dGluZ3MuZXZlbnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfmu5rliqjkuoYxMTEnKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn5rua5YqoJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgJHNlbGYgPSAkKHNlbGYpO1xuXG4gICAgICAgICAgICBzZWxmLmxvYWRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvKiBJZiBubyBzcmMgYXR0cmlidXRlIGdpdmVuIHVzZSBkYXRhOnVyaS4gKi9cbiAgICAgICAgICAgIGlmICgkc2VsZi5hdHRyKFwic3JjXCIpID09PSB1bmRlZmluZWQgfHwgJHNlbGYuYXR0cihcInNyY1wiKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoJHNlbGYuaXMoXCJpbWdcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNlbGYuYXR0cihcInNyY1wiLCBzZXR0aW5ncy5wbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgICRzZWxmLmFkZENsYXNzKFwibG9hZGluZ1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIFdoZW4gYXBwZWFyIGlzIHRyaWdnZXJlZCBsb2FkIG9yaWdpbmFsIGltYWdlLiAqL1xuICAgICAgICAgICAgJHNlbGYub25lKFwiYXBwZWFyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5sb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmFwcGVhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzX2xlZnQgPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5hcHBlYXIuY2FsbChzZWxmLCBlbGVtZW50c19sZWZ0LCBzZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnMS5zZWxmLmF0dHIgPSAnLCRzZWxmKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlZFVybCA9ICRzZWxmLmF0dHIoXCJkYXRhLVwiICsgc2V0dGluZ3MuZGF0YV9hdHRyaWJ1dGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlZFVybCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFVybCA9ICRzZWxmLmF0dHIoXCJzcmNcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRVcmwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmtYvor5UgPSAnLCRzZWxmLnN0eWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsID0gJHNlbGYuc3R5bGUuYmFja2dyb3VuZEltYWdlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkVXJsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWJ1Zykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VwZGF0ZWRVcmwgPSAnLHVwZGF0ZWRVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WbvueJh+WcsOWdgCcgK3VwZGF0ZWRVcmwuaW5kZXhPZignb2I2bWNpMzBnLnFuc3NsLmNvbScpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDRE7lnLDlnYAnICt1cGRhdGVkVXJsLmluZGV4T2YoJ2ZpbGUuaXMyNi5jb20nKSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkVXJsLmluZGV4T2YoJ29iNm1jaTMwZy5xbnNzbC5jb20nKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5hZHZhbmNlZF9sb2FkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsICs9ICc/aW1hZ2VWaWV3Mic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmlzX3NjYWxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsICs9ICcvMC93LycgKyBzZXR0aW5ncy5zY2FsZV93aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Mud2ViUF9sb2FkID09PSB0cnVlICYmIHNldHRpbmdzLmlzX3NjYWxlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFVybCArPSAnLzAvZm9ybWF0L3dlYnAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy53ZWJQX2xvYWQgPT09IHRydWUgJiYgc2V0dGluZ3MuaXNfc2NhbGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRVcmwgKz0gJy9mb3JtYXQvd2VicCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWJ1Zykge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfkuK3pl7TmiZPljbB1cGRhdGVkVXJsJyx1cGRhdGVkVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnKioqKioqKioq5Lit6Ze05omT5Y2wIGltZy5zcmMgPSAnLCRzZWxmLmF0dHIoXCJzcmNcIikpO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcqKioqKioqKirkuK3pl7TmiZPljbAgaW1nID0gJywkKFwiPGltZyAvPlwiKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkKFwiPGltZyAvPlwiKS5iaW5kKFwibG9hZFwiLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLmhpZGUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2VsZi5pcyhcImltZ1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5hdHRyKFwic3JjXCIsIHVwZGF0ZWRVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWJ1Zykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcqKioqKioqKippbWcuc3JjID0gJywkc2VsZi5hdHRyKFwic3JjXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIiwgXCJ1cmwoJ1wiICsgdXBkYXRlZFVybCArIFwiJylcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0RlYnVnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJyoqKioqKioqKmJhY2tncm91bmQtaW1hZ2UgPSAnLCRzZWxmLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmW3NldHRpbmdzLmVmZmVjdF0oc2V0dGluZ3MuZWZmZWN0X3NwZWVkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJlbW92ZSBpbWFnZSBmcm9tIGFycmF5IHNvIGl0IGlzIG5vdCBsb29wZWQgbmV4dCB0aW1lLiAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gJC5ncmVwKGVsZW1lbnRzLCBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhZWxlbWVudC5sb2FkZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMgPSAkKHRlbXApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmxvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzX2xlZnQgPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmxvYWQuY2FsbChzZWxmLCBlbGVtZW50c19sZWZ0LCBzZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLnJlbW92ZUNsYXNzKFwibG9hZGluZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInNyY1wiLCB1cGRhdGVkVXJsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLyogV2hlbiB3YW50ZWQgZXZlbnQgaXMgdHJpZ2dlcmVkIGxvYWQgb3JpZ2luYWwgaW1hZ2UgKi9cbiAgICAgICAgICAgIC8qIGJ5IHRyaWdnZXJpbmcgYXBwZWFyLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoMCAhPT0gc2V0dGluZ3MuZXZlbnQuaW5kZXhPZihcInNjcm9sbFwiKSkge1xuICAgICAgICAgICAgICAgICRzZWxmLmJpbmQoc2V0dGluZ3MuZXZlbnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYubG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi50cmlnZ2VyKFwiYXBwZWFyXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qIENoZWNrIGlmIHNvbWV0aGluZyBhcHBlYXJzIHdoZW4gd2luZG93IGlzIHJlc2l6ZWQuICovXG4gICAgICAgICR3aW5kb3cuYmluZChcInJlc2l6ZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKiBXaXRoIElPUzUgZm9yY2UgbG9hZGluZyBpbWFnZXMgd2hlbiBuYXZpZ2F0aW5nIHdpdGggYmFjayBidXR0b24uICovXG4gICAgICAgIC8qIE5vbiBvcHRpbWFsIHdvcmthcm91bmQuICovXG4gICAgICAgIGlmICgoLyg/OmlwaG9uZXxpcG9kfGlwYWQpLipvcyA1L2dpKS50ZXN0KG5hdmlnYXRvci5hcHBWZXJzaW9uKSkge1xuICAgICAgICAgICAgJHdpbmRvdy5iaW5kKFwicGFnZXNob3dcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQub3JpZ2luYWxFdmVudCAmJiBldmVudC5vcmlnaW5hbEV2ZW50LnBlcnNpc3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKFwiYXBwZWFyXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIEZvcmNlIGluaXRpYWwgY2hlY2sgaWYgaW1hZ2VzIHNob3VsZCBhcHBlYXIuICovXG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKiBDb252ZW5pZW5jZSBtZXRob2RzIGluIGpRdWVyeSBuYW1lc3BhY2UuICAgICAgICAgICAqL1xuICAgIC8qIFVzZSBhcyAgJC5iZWxvd3RoZWZvbGQoZWxlbWVudCwge3RocmVzaG9sZCA6IDEwMCwgY29udGFpbmVyIDogd2luZG93fSkgKi9cblxuICAgICQuYmVsb3d0aGVmb2xkID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICAgICAgdmFyIGZvbGQ7XG5cbiAgICAgICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XG4gICAgICAgICAgICBmb2xkID0gKHdpbmRvdy5pbm5lckhlaWdodCA/IHdpbmRvdy5pbm5lckhlaWdodCA6ICR3aW5kb3cuaGVpZ2h0KCkpICsgJHdpbmRvdy5zY3JvbGxUb3AoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvbGQgPSAkKHNldHRpbmdzLmNvbnRhaW5lcikub2Zmc2V0KCkudG9wICsgJChzZXR0aW5ncy5jb250YWluZXIpLmhlaWdodCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZvbGQgPD0gJChlbGVtZW50KS5vZmZzZXQoKS50b3AgLSBzZXR0aW5ncy50aHJlc2hvbGQ7XG4gICAgfTtcblxuICAgICQucmlnaHRvZmZvbGQgPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xuICAgICAgICB2YXIgZm9sZDtcblxuICAgICAgICBpZiAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHwgc2V0dGluZ3MuY29udGFpbmVyID09PSB3aW5kb3cpIHtcbiAgICAgICAgICAgIGZvbGQgPSAkd2luZG93LndpZHRoKCkgKyAkd2luZG93LnNjcm9sbExlZnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvbGQgPSAkKHNldHRpbmdzLmNvbnRhaW5lcikub2Zmc2V0KCkubGVmdCArICQoc2V0dGluZ3MuY29udGFpbmVyKS53aWR0aCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZvbGQgPD0gJChlbGVtZW50KS5vZmZzZXQoKS5sZWZ0IC0gc2V0dGluZ3MudGhyZXNob2xkO1xuICAgIH07XG5cbiAgICAkLmFib3ZldGhldG9wID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICAgICAgdmFyIGZvbGQ7XG5cbiAgICAgICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XG4gICAgICAgICAgICBmb2xkID0gJHdpbmRvdy5zY3JvbGxUb3AoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvbGQgPSAkKHNldHRpbmdzLmNvbnRhaW5lcikub2Zmc2V0KCkudG9wO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZvbGQgPj0gJChlbGVtZW50KS5vZmZzZXQoKS50b3AgKyBzZXR0aW5ncy50aHJlc2hvbGQgKyAkKGVsZW1lbnQpLmhlaWdodCgpO1xuICAgIH07XG5cbiAgICAkLmxlZnRvZmJlZ2luID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICAgICAgdmFyIGZvbGQ7XG5cbiAgICAgICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XG4gICAgICAgICAgICBmb2xkID0gJHdpbmRvdy5zY3JvbGxMZWZ0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLmxlZnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm9sZCA+PSAkKGVsZW1lbnQpLm9mZnNldCgpLmxlZnQgKyBzZXR0aW5ncy50aHJlc2hvbGQgKyAkKGVsZW1lbnQpLndpZHRoKCk7XG4gICAgfTtcblxuICAgICQuaW52aWV3cG9ydCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG5cbiAgICAgICAgcmV0dXJuICEkLnJpZ2h0b2Zmb2xkKGVsZW1lbnQsIHNldHRpbmdzKSAmJiAhJC5sZWZ0b2ZiZWdpbihlbGVtZW50LCBzZXR0aW5ncykgJiZcbiAgICAgICAgICAgICEkLmJlbG93dGhlZm9sZChlbGVtZW50LCBzZXR0aW5ncykgJiYgISQuYWJvdmV0aGV0b3AoZWxlbWVudCwgc2V0dGluZ3MpO1xuICAgIH07XG5cbiAgICAvKiBDdXN0b20gc2VsZWN0b3JzIGZvciB5b3VyIGNvbnZlbmllbmNlLiAgICovXG4gICAgLyogVXNlIGFzICQoXCJpbWc6YmVsb3ctdGhlLWZvbGRcIikuc29tZXRoaW5nKCkgb3IgKi9cbiAgICAvKiAkKFwiaW1nXCIpLmZpbHRlcihcIjpiZWxvdy10aGUtZm9sZFwiKS5zb21ldGhpbmcoKSB3aGljaCBpcyBmYXN0ZXIgKi9cblxuICAgICQuZXh0ZW5kKCQuZXhwcltcIjpcIl0sIHtcbiAgICAgICAgXCJiZWxvdy10aGUtZm9sZFwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gJC5iZWxvd3RoZWZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwiYWJvdmUtdGhlLXRvcFwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gISQuYmVsb3d0aGVmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcInJpZ2h0LW9mLXNjcmVlblwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gJC5yaWdodG9mZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJsZWZ0LW9mLXNjcmVlblwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gISQucmlnaHRvZmZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwiaW4tdmlld3BvcnRcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICQuaW52aWV3cG9ydChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyogTWFpbnRhaW4gQkMgZm9yIGNvdXBsZSBvZiB2ZXJzaW9ucy4gKi9cbiAgICAgICAgXCJhYm92ZS10aGUtZm9sZFwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gISQuYmVsb3d0aGVmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcInJpZ2h0LW9mLWZvbGRcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICQucmlnaHRvZmZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwibGVmdC1vZi1mb2xkXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAhJC5yaWdodG9mZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgR2VuZXJhbC5pbml0KCk7XG4gICAgSW1hZ2VTbWFydExvYWRlci5pbml0KCk7XG4gICAgaWYgKCQoJ2JvZHknKS5oYXNDbGFzcygncG9zdC10ZW1wbGF0ZScpKSB7XG4gICAgICAgIEdlbmVyYWwuYWRkSWNvbnMoKTtcbiAgICB9XG5cbiAgICAvLyBTaXRlIHNlYXJjaFxuICAgIC8vIHZhciBzZWFyY2hGaWVsZCA9ICQoJyNzZWFyY2gtZmllbGQnKS5naG9zdEh1bnRlcih7XG4gICAgLy8gICByZXN1bHRzIDogXCIjc2VhcmNoLXJlc3VsdHNcIixcbiAgICAvLyAgIG9uS2V5VXAgOiB0cnVlLFxuICAgIC8vICAgb25QYWdlTG9hZCA6IHRydWUsXG4gICAgLy8gICBpbmNsdWRlcGFnZXMgOiB0cnVlLFxuICAgIC8vICAgaW5mb190ZW1wbGF0ZSA6ICc8ZGl2IGNsYXNzPVwicmVzdWx0cy1pbmZvXCI+UG9zdHMgZm91bmQ6IHt7YW1vdW50fX08L2Rpdj4nLFxuICAgIC8vICAgcmVzdWx0X3RlbXBsYXRlIDogJzxkaXYgY2xhc3M9XCJyZXN1bHQtaXRlbVwiPjxhIGhyZWY9XCJ7e2xpbmt9fVwiPjxkaXYgY2xhc3M9XCJyZXN1bHQtdGl0bGVcIj57e3RpdGxlfX08L2Rpdj48ZGl2IGNsYXNzPVwicmVzdWx0LWRhdGVcIj57e3B1YkRhdGV9fTwvZGl2PjwvYT48L2Rpdj4nXG4gICAgLy8gfSk7XG59KTtcbiIsIi8qKlxuKiBnaG9zdEh1bnRlciAtIDAuNS4wXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTQgSmFtYWwgTmV1ZmVsZCAoamFtYWxAaTExdS5tZSlcbiAqIE1JVCBMaWNlbnNlZFxuICogQGxpY2Vuc2VcbiovXG4oZnVuY3Rpb24oICQgKSB7XG5cbiAgLyoqXG4gKiBsdW5yIC0gaHR0cDovL2x1bnJqcy5jb20gLSBBIGJpdCBsaWtlIFNvbHIsIGJ1dCBtdWNoIHNtYWxsZXIgYW5kIG5vdCBhcyBicmlnaHQgLSAyLjEuNVxuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuOyhmdW5jdGlvbigpe1xuXG4vKipcbiAqIEEgY29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIGNvbmZpZ3VyaW5nIGFuZCBjb25zdHJ1Y3RpbmdcbiAqIGEgbmV3IGx1bnIgSW5kZXguXG4gKlxuICogQSBsdW5yLkJ1aWxkZXIgaW5zdGFuY2UgaXMgY3JlYXRlZCBhbmQgdGhlIHBpcGVsaW5lIHNldHVwXG4gKiB3aXRoIGEgdHJpbW1lciwgc3RvcCB3b3JkIGZpbHRlciBhbmQgc3RlbW1lci5cbiAqXG4gKiBUaGlzIGJ1aWxkZXIgb2JqZWN0IGlzIHlpZWxkZWQgdG8gdGhlIGNvbmZpZ3VyYXRpb24gZnVuY3Rpb25cbiAqIHRoYXQgaXMgcGFzc2VkIGFzIGEgcGFyYW1ldGVyLCBhbGxvd2luZyB0aGUgbGlzdCBvZiBmaWVsZHNcbiAqIGFuZCBvdGhlciBidWlsZGVyIHBhcmFtZXRlcnMgdG8gYmUgY3VzdG9taXNlZC5cbiAqXG4gKiBBbGwgZG9jdW1lbnRzIF9tdXN0XyBiZSBhZGRlZCB3aXRoaW4gdGhlIHBhc3NlZCBjb25maWcgZnVuY3Rpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBpZHggPSBsdW5yKGZ1bmN0aW9uICgpIHtcbiAqICAgdGhpcy5maWVsZCgndGl0bGUnKVxuICogICB0aGlzLmZpZWxkKCdib2R5JylcbiAqICAgdGhpcy5yZWYoJ2lkJylcbiAqXG4gKiAgIGRvY3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHtcbiAqICAgICB0aGlzLmFkZChkb2MpXG4gKiAgIH0sIHRoaXMpXG4gKiB9KVxuICpcbiAqIEBzZWUge0BsaW5rIGx1bnIuQnVpbGRlcn1cbiAqIEBzZWUge0BsaW5rIGx1bnIuUGlwZWxpbmV9XG4gKiBAc2VlIHtAbGluayBsdW5yLnRyaW1tZXJ9XG4gKiBAc2VlIHtAbGluayBsdW5yLnN0b3BXb3JkRmlsdGVyfVxuICogQHNlZSB7QGxpbmsgbHVuci5zdGVtbWVyfVxuICogQG5hbWVzcGFjZSB7ZnVuY3Rpb259IGx1bnJcbiAqL1xudmFyIGx1bnIgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gIHZhciBidWlsZGVyID0gbmV3IGx1bnIuQnVpbGRlcigpO1xuXG4gIGJ1aWxkZXIucGlwZWxpbmUuYWRkKFxuICAgIGx1bnIudHJpbW1lcixcbiAgICBsdW5yLnN0b3BXb3JkRmlsdGVyLFxuICAgIGx1bnIuc3RlbW1lclxuICApO1xuXG4gIGJ1aWxkZXIuc2VhcmNoUGlwZWxpbmUuYWRkKFxuICAgIGx1bnIuc3RlbW1lclxuICApO1xuXG4gIGNvbmZpZy5jYWxsKGJ1aWxkZXIsIGJ1aWxkZXIpO1xuICByZXR1cm4gYnVpbGRlci5idWlsZCgpO1xufTtcblxubHVuci52ZXJzaW9uID0gXCIyLjEuNVwiO1xuLyohXG4gKiBsdW5yLnV0aWxzXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBBIG5hbWVzcGFjZSBjb250YWluaW5nIHV0aWxzIGZvciB0aGUgcmVzdCBvZiB0aGUgbHVuciBsaWJyYXJ5XG4gKi9cbmx1bnIudXRpbHMgPSB7fTtcblxuLyoqXG4gKiBQcmludCBhIHdhcm5pbmcgbWVzc2FnZSB0byB0aGUgY29uc29sZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBiZSBwcmludGVkLlxuICogQG1lbWJlck9mIFV0aWxzXG4gKi9cbmx1bnIudXRpbHMud2FybiA9IChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbiAgcmV0dXJuIGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgaWYgKGdsb2JhbC5jb25zb2xlICYmIGNvbnNvbGUud2Fybikge1xuICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgIH1cbiAgfTtcbiAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXG59KSh0aGlzKTtcblxuLyoqXG4gKiBDb252ZXJ0IGFuIG9iamVjdCB0byBhIHN0cmluZy5cbiAqXG4gKiBJbiB0aGUgY2FzZSBvZiBgbnVsbGAgYW5kIGB1bmRlZmluZWRgIHRoZSBmdW5jdGlvbiByZXR1cm5zXG4gKiB0aGUgZW1wdHkgc3RyaW5nLCBpbiBhbGwgb3RoZXIgY2FzZXMgdGhlIHJlc3VsdCBvZiBjYWxsaW5nXG4gKiBgdG9TdHJpbmdgIG9uIHRoZSBwYXNzZWQgb2JqZWN0IGlzIHJldHVybmVkLlxuICpcbiAqIEBwYXJhbSB7QW55fSBvYmogVGhlIG9iamVjdCB0byBjb252ZXJ0IHRvIGEgc3RyaW5nLlxuICogQHJldHVybiB7U3RyaW5nfSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHBhc3NlZCBvYmplY3QuXG4gKiBAbWVtYmVyT2YgVXRpbHNcbiAqL1xubHVuci51dGlscy5hc1N0cmluZyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgaWYgKG9iaiA9PT0gdm9pZCAwIHx8IG9iaiA9PT0gbnVsbCkge1xuICAgIHJldHVybiBcIlwiO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBvYmoudG9TdHJpbmcoKTtcbiAgfVxufTtcbmx1bnIuRmllbGRSZWYgPSBmdW5jdGlvbiAoZG9jUmVmLCBmaWVsZE5hbWUsIHN0cmluZ1ZhbHVlKSB7XG4gIHRoaXMuZG9jUmVmID0gZG9jUmVmO1xuICB0aGlzLmZpZWxkTmFtZSA9IGZpZWxkTmFtZTtcbiAgdGhpcy5fc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTtcbn07XG5cbmx1bnIuRmllbGRSZWYuam9pbmVyID0gXCIvXCI7XG5cbmx1bnIuRmllbGRSZWYuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7XG4gIHZhciBuID0gcy5pbmRleE9mKGx1bnIuRmllbGRSZWYuam9pbmVyKTtcblxuICBpZiAobiA9PT0gLTEpIHtcbiAgICB0aHJvdyBcIm1hbGZvcm1lZCBmaWVsZCByZWYgc3RyaW5nXCI7XG4gIH1cblxuICB2YXIgZmllbGRSZWYgPSBzLnNsaWNlKDAsIG4pLFxuICAgICAgZG9jUmVmID0gcy5zbGljZShuICsgMSk7XG5cbiAgcmV0dXJuIG5ldyBsdW5yLkZpZWxkUmVmIChkb2NSZWYsIGZpZWxkUmVmLCBzKTtcbn07XG5cbmx1bnIuRmllbGRSZWYucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5fc3RyaW5nVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX3N0cmluZ1ZhbHVlID0gdGhpcy5maWVsZE5hbWUgKyBsdW5yLkZpZWxkUmVmLmpvaW5lciArIHRoaXMuZG9jUmVmO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuX3N0cmluZ1ZhbHVlO1xufTtcbi8qKlxuICogQSBmdW5jdGlvbiB0byBjYWxjdWxhdGUgdGhlIGludmVyc2UgZG9jdW1lbnQgZnJlcXVlbmN5IGZvclxuICogYSBwb3N0aW5nLiBUaGlzIGlzIHNoYXJlZCBiZXR3ZWVuIHRoZSBidWlsZGVyIGFuZCB0aGUgaW5kZXhcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtvYmplY3R9IHBvc3RpbmcgLSBUaGUgcG9zdGluZyBmb3IgYSBnaXZlbiB0ZXJtXG4gKiBAcGFyYW0ge251bWJlcn0gZG9jdW1lbnRDb3VudCAtIFRoZSB0b3RhbCBudW1iZXIgb2YgZG9jdW1lbnRzLlxuICovXG5sdW5yLmlkZiA9IGZ1bmN0aW9uIChwb3N0aW5nLCBkb2N1bWVudENvdW50KSB7XG4gIHZhciBkb2N1bWVudHNXaXRoVGVybSA9IDA7XG5cbiAgZm9yICh2YXIgZmllbGROYW1lIGluIHBvc3RpbmcpIHtcbiAgICBpZiAoZmllbGROYW1lID09ICdfaW5kZXgnKSBjb250aW51ZTsgLy8gSWdub3JlIHRoZSB0ZXJtIGluZGV4LCBpdHMgbm90IGEgZmllbGRcbiAgICBkb2N1bWVudHNXaXRoVGVybSArPSBPYmplY3Qua2V5cyhwb3N0aW5nW2ZpZWxkTmFtZV0pLmxlbmd0aDtcbiAgfVxuXG4gIHZhciB4ID0gKGRvY3VtZW50Q291bnQgLSBkb2N1bWVudHNXaXRoVGVybSArIDAuNSkgLyAoZG9jdW1lbnRzV2l0aFRlcm0gKyAwLjUpO1xuXG4gIHJldHVybiBNYXRoLmxvZygxICsgTWF0aC5hYnMoeCkpO1xufTtcblxuLyoqXG4gKiBBIHRva2VuIHdyYXBzIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgdG9rZW5cbiAqIGFzIGl0IGlzIHBhc3NlZCB0aHJvdWdoIHRoZSB0ZXh0IHByb2Nlc3NpbmcgcGlwZWxpbmUuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge3N0cmluZ30gW3N0cj0nJ10gLSBUaGUgc3RyaW5nIHRva2VuIGJlaW5nIHdyYXBwZWQuXG4gKiBAcGFyYW0ge29iamVjdH0gW21ldGFkYXRhPXt9XSAtIE1ldGFkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHRva2VuLlxuICovXG5sdW5yLlRva2VuID0gZnVuY3Rpb24gKHN0ciwgbWV0YWRhdGEpIHtcbiAgdGhpcy5zdHIgPSBzdHIgfHwgXCJcIjtcbiAgdGhpcy5tZXRhZGF0YSA9IG1ldGFkYXRhIHx8IHt9O1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB0b2tlbiBzdHJpbmcgdGhhdCBpcyBiZWluZyB3cmFwcGVkIGJ5IHRoaXMgb2JqZWN0LlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmx1bnIuVG9rZW4ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5zdHI7XG59O1xuXG4vKipcbiAqIEEgdG9rZW4gdXBkYXRlIGZ1bmN0aW9uIGlzIHVzZWQgd2hlbiB1cGRhdGluZyBvciBvcHRpb25hbGx5XG4gKiB3aGVuIGNsb25pbmcgYSB0b2tlbi5cbiAqXG4gKiBAY2FsbGJhY2sgbHVuci5Ub2tlbn51cGRhdGVGdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHRva2VuLlxuICogQHBhcmFtIHtPYmplY3R9IG1ldGFkYXRhIC0gQWxsIG1ldGFkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHRva2VuLlxuICovXG5cbi8qKlxuICogQXBwbGllcyB0aGUgZ2l2ZW4gZnVuY3Rpb24gdG8gdGhlIHdyYXBwZWQgc3RyaW5nIHRva2VuLlxuICpcbiAqIEBleGFtcGxlXG4gKiB0b2tlbi51cGRhdGUoZnVuY3Rpb24gKHN0ciwgbWV0YWRhdGEpIHtcbiAqICAgcmV0dXJuIHN0ci50b1VwcGVyQ2FzZSgpXG4gKiB9KVxuICpcbiAqIEBwYXJhbSB7bHVuci5Ub2tlbn51cGRhdGVGdW5jdGlvbn0gZm4gLSBBIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIHRoZSB0b2tlbiBzdHJpbmcuXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlbn1cbiAqL1xubHVuci5Ub2tlbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGZuKSB7XG4gIHRoaXMuc3RyID0gZm4odGhpcy5zdHIsIHRoaXMubWV0YWRhdGEpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoaXMgdG9rZW4uIE9wdGlvbmFsbHkgYSBmdW5jdGlvbiBjYW4gYmVcbiAqIGFwcGxpZWQgdG8gdGhlIGNsb25lZCB0b2tlbi5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuVG9rZW5+dXBkYXRlRnVuY3Rpb259IFtmbl0gLSBBbiBvcHRpb25hbCBmdW5jdGlvbiB0byBhcHBseSB0byB0aGUgY2xvbmVkIHRva2VuLlxuICogQHJldHVybnMge2x1bnIuVG9rZW59XG4gKi9cbmx1bnIuVG9rZW4ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKGZuKSB7XG4gIGZuID0gZm4gfHwgZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHM7IH07XG4gIHJldHVybiBuZXcgbHVuci5Ub2tlbiAoZm4odGhpcy5zdHIsIHRoaXMubWV0YWRhdGEpLCB0aGlzLm1ldGFkYXRhKTtcbn07XG4vKiFcbiAqIGx1bnIudG9rZW5pemVyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIGZvciBzcGxpdHRpbmcgYSBzdHJpbmcgaW50byB0b2tlbnMgcmVhZHkgdG8gYmUgaW5zZXJ0ZWQgaW50b1xuICogdGhlIHNlYXJjaCBpbmRleC4gVXNlcyBgbHVuci50b2tlbml6ZXIuc2VwYXJhdG9yYCB0byBzcGxpdCBzdHJpbmdzLCBjaGFuZ2VcbiAqIHRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5IHRvIGNoYW5nZSBob3cgc3RyaW5ncyBhcmUgc3BsaXQgaW50byB0b2tlbnMuXG4gKlxuICogVGhpcyB0b2tlbml6ZXIgd2lsbCBjb252ZXJ0IGl0cyBwYXJhbWV0ZXIgdG8gYSBzdHJpbmcgYnkgY2FsbGluZyBgdG9TdHJpbmdgIGFuZFxuICogdGhlbiB3aWxsIHNwbGl0IHRoaXMgc3RyaW5nIG9uIHRoZSBjaGFyYWN0ZXIgaW4gYGx1bnIudG9rZW5pemVyLnNlcGFyYXRvcmAuXG4gKiBBcnJheXMgd2lsbCBoYXZlIHRoZWlyIGVsZW1lbnRzIGNvbnZlcnRlZCB0byBzdHJpbmdzIGFuZCB3cmFwcGVkIGluIGEgbHVuci5Ub2tlbi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcGFyYW0gez8oc3RyaW5nfG9iamVjdHxvYmplY3RbXSl9IG9iaiAtIFRoZSBvYmplY3QgdG8gY29udmVydCBpbnRvIHRva2Vuc1xuICogQHJldHVybnMge2x1bnIuVG9rZW5bXX1cbiAqL1xubHVuci50b2tlbml6ZXIgPSBmdW5jdGlvbiAob2JqKSB7XG4gIGlmIChvYmogPT09IG51bGwgfHwgb2JqID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgcmV0dXJuIG9iai5tYXAoZnVuY3Rpb24gKHQpIHtcbiAgICAgIHJldHVybiBuZXcgbHVuci5Ub2tlbihsdW5yLnV0aWxzLmFzU3RyaW5nKHQpLnRvTG93ZXJDYXNlKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIHN0ciA9IG9iai50b1N0cmluZygpLnRyaW0oKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgbGVuID0gc3RyLmxlbmd0aCxcbiAgICAgIHRva2VucyA9IFtdO1xuXG4gIGZvciAodmFyIHNsaWNlRW5kID0gMCwgc2xpY2VTdGFydCA9IDA7IHNsaWNlRW5kIDw9IGxlbjsgc2xpY2VFbmQrKykge1xuICAgIHZhciBjaGFyID0gc3RyLmNoYXJBdChzbGljZUVuZCksXG4gICAgICAgIHNsaWNlTGVuZ3RoID0gc2xpY2VFbmQgLSBzbGljZVN0YXJ0O1xuXG4gICAgaWYgKChjaGFyLm1hdGNoKGx1bnIudG9rZW5pemVyLnNlcGFyYXRvcikgfHwgc2xpY2VFbmQgPT0gbGVuKSkge1xuXG4gICAgICBpZiAoc2xpY2VMZW5ndGggPiAwKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKFxuICAgICAgICAgIG5ldyBsdW5yLlRva2VuIChzdHIuc2xpY2Uoc2xpY2VTdGFydCwgc2xpY2VFbmQpLCB7XG4gICAgICAgICAgICBwb3NpdGlvbjogW3NsaWNlU3RhcnQsIHNsaWNlTGVuZ3RoXSxcbiAgICAgICAgICAgIGluZGV4OiB0b2tlbnMubGVuZ3RoXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgc2xpY2VTdGFydCA9IHNsaWNlRW5kICsgMTtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiB0b2tlbnM7XG59O1xuXG4vKipcbiAqIFRoZSBzZXBhcmF0b3IgdXNlZCB0byBzcGxpdCBhIHN0cmluZyBpbnRvIHRva2Vucy4gT3ZlcnJpZGUgdGhpcyBwcm9wZXJ0eSB0byBjaGFuZ2UgdGhlIGJlaGF2aW91ciBvZlxuICogYGx1bnIudG9rZW5pemVyYCBiZWhhdmlvdXIgd2hlbiB0b2tlbml6aW5nIHN0cmluZ3MuIEJ5IGRlZmF1bHQgdGhpcyBzcGxpdHMgb24gd2hpdGVzcGFjZSBhbmQgaHlwaGVucy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAc2VlIGx1bnIudG9rZW5pemVyXG4gKi9cbmx1bnIudG9rZW5pemVyLnNlcGFyYXRvciA9IC9bXFxzXFwtXSsvO1xuLyohXG4gKiBsdW5yLlBpcGVsaW5lXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBsdW5yLlBpcGVsaW5lcyBtYWludGFpbiBhbiBvcmRlcmVkIGxpc3Qgb2YgZnVuY3Rpb25zIHRvIGJlIGFwcGxpZWQgdG8gYWxsXG4gKiB0b2tlbnMgaW4gZG9jdW1lbnRzIGVudGVyaW5nIHRoZSBzZWFyY2ggaW5kZXggYW5kIHF1ZXJpZXMgYmVpbmcgcmFuIGFnYWluc3RcbiAqIHRoZSBpbmRleC5cbiAqXG4gKiBBbiBpbnN0YW5jZSBvZiBsdW5yLkluZGV4IGNyZWF0ZWQgd2l0aCB0aGUgbHVuciBzaG9ydGN1dCB3aWxsIGNvbnRhaW4gYVxuICogcGlwZWxpbmUgd2l0aCBhIHN0b3Agd29yZCBmaWx0ZXIgYW5kIGFuIEVuZ2xpc2ggbGFuZ3VhZ2Ugc3RlbW1lci4gRXh0cmFcbiAqIGZ1bmN0aW9ucyBjYW4gYmUgYWRkZWQgYmVmb3JlIG9yIGFmdGVyIGVpdGhlciBvZiB0aGVzZSBmdW5jdGlvbnMgb3IgdGhlc2VcbiAqIGRlZmF1bHQgZnVuY3Rpb25zIGNhbiBiZSByZW1vdmVkLlxuICpcbiAqIFdoZW4gcnVuIHRoZSBwaXBlbGluZSB3aWxsIGNhbGwgZWFjaCBmdW5jdGlvbiBpbiB0dXJuLCBwYXNzaW5nIGEgdG9rZW4sIHRoZVxuICogaW5kZXggb2YgdGhhdCB0b2tlbiBpbiB0aGUgb3JpZ2luYWwgbGlzdCBvZiBhbGwgdG9rZW5zIGFuZCBmaW5hbGx5IGEgbGlzdCBvZlxuICogYWxsIHRoZSBvcmlnaW5hbCB0b2tlbnMuXG4gKlxuICogVGhlIG91dHB1dCBvZiBmdW5jdGlvbnMgaW4gdGhlIHBpcGVsaW5lIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBuZXh0IGZ1bmN0aW9uXG4gKiBpbiB0aGUgcGlwZWxpbmUuIFRvIGV4Y2x1ZGUgYSB0b2tlbiBmcm9tIGVudGVyaW5nIHRoZSBpbmRleCB0aGUgZnVuY3Rpb25cbiAqIHNob3VsZCByZXR1cm4gdW5kZWZpbmVkLCB0aGUgcmVzdCBvZiB0aGUgcGlwZWxpbmUgd2lsbCBub3QgYmUgY2FsbGVkIHdpdGhcbiAqIHRoaXMgdG9rZW4uXG4gKlxuICogRm9yIHNlcmlhbGlzYXRpb24gb2YgcGlwZWxpbmVzIHRvIHdvcmssIGFsbCBmdW5jdGlvbnMgdXNlZCBpbiBhbiBpbnN0YW5jZSBvZlxuICogYSBwaXBlbGluZSBzaG91bGQgYmUgcmVnaXN0ZXJlZCB3aXRoIGx1bnIuUGlwZWxpbmUuIFJlZ2lzdGVyZWQgZnVuY3Rpb25zIGNhblxuICogdGhlbiBiZSBsb2FkZWQuIElmIHRyeWluZyB0byBsb2FkIGEgc2VyaWFsaXNlZCBwaXBlbGluZSB0aGF0IHVzZXMgZnVuY3Rpb25zXG4gKiB0aGF0IGFyZSBub3QgcmVnaXN0ZXJlZCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqXG4gKiBJZiBub3QgcGxhbm5pbmcgb24gc2VyaWFsaXNpbmcgdGhlIHBpcGVsaW5lIHRoZW4gcmVnaXN0ZXJpbmcgcGlwZWxpbmUgZnVuY3Rpb25zXG4gKiBpcyBub3QgbmVjZXNzYXJ5LlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5sdW5yLlBpcGVsaW5lID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9zdGFjayA9IFtdO1xufTtcblxubHVuci5QaXBlbGluZS5yZWdpc3RlcmVkRnVuY3Rpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuLyoqXG4gKiBBIHBpcGVsaW5lIGZ1bmN0aW9uIG1hcHMgbHVuci5Ub2tlbiB0byBsdW5yLlRva2VuLiBBIGx1bnIuVG9rZW4gY29udGFpbnMgdGhlIHRva2VuXG4gKiBzdHJpbmcgYXMgd2VsbCBhcyBhbGwga25vd24gbWV0YWRhdGEuIEEgcGlwZWxpbmUgZnVuY3Rpb24gY2FuIG11dGF0ZSB0aGUgdG9rZW4gc3RyaW5nXG4gKiBvciBtdXRhdGUgKG9yIGFkZCkgbWV0YWRhdGEgZm9yIGEgZ2l2ZW4gdG9rZW4uXG4gKlxuICogQSBwaXBlbGluZSBmdW5jdGlvbiBjYW4gaW5kaWNhdGUgdGhhdCB0aGUgcGFzc2VkIHRva2VuIHNob3VsZCBiZSBkaXNjYXJkZWQgYnkgcmV0dXJuaW5nXG4gKiBudWxsLiBUaGlzIHRva2VuIHdpbGwgbm90IGJlIHBhc3NlZCB0byBhbnkgZG93bnN0cmVhbSBwaXBlbGluZSBmdW5jdGlvbnMgYW5kIHdpbGwgbm90IGJlXG4gKiBhZGRlZCB0byB0aGUgaW5kZXguXG4gKlxuICogTXVsdGlwbGUgdG9rZW5zIGNhbiBiZSByZXR1cm5lZCBieSByZXR1cm5pbmcgYW4gYXJyYXkgb2YgdG9rZW5zLiBFYWNoIHRva2VuIHdpbGwgYmUgcGFzc2VkXG4gKiB0byBhbnkgZG93bnN0cmVhbSBwaXBlbGluZSBmdW5jdGlvbnMgYW5kIGFsbCB3aWxsIHJldHVybmVkIHRva2VucyB3aWxsIGJlIGFkZGVkIHRvIHRoZSBpbmRleC5cbiAqXG4gKiBBbnkgbnVtYmVyIG9mIHBpcGVsaW5lIGZ1bmN0aW9ucyBtYXkgYmUgY2hhaW5lZCB0b2dldGhlciB1c2luZyBhIGx1bnIuUGlwZWxpbmUuXG4gKlxuICogQGludGVyZmFjZSBsdW5yLlBpcGVsaW5lRnVuY3Rpb25cbiAqIEBwYXJhbSB7bHVuci5Ub2tlbn0gdG9rZW4gLSBBIHRva2VuIGZyb20gdGhlIGRvY3VtZW50IGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpIC0gVGhlIGluZGV4IG9mIHRoaXMgdG9rZW4gaW4gdGhlIGNvbXBsZXRlIGxpc3Qgb2YgdG9rZW5zIGZvciB0aGlzIGRvY3VtZW50L2ZpZWxkLlxuICogQHBhcmFtIHtsdW5yLlRva2VuW119IHRva2VucyAtIEFsbCB0b2tlbnMgZm9yIHRoaXMgZG9jdW1lbnQvZmllbGQuXG4gKiBAcmV0dXJucyB7KD9sdW5yLlRva2VufGx1bnIuVG9rZW5bXSl9XG4gKi9cblxuLyoqXG4gKiBSZWdpc3RlciBhIGZ1bmN0aW9uIHdpdGggdGhlIHBpcGVsaW5lLlxuICpcbiAqIEZ1bmN0aW9ucyB0aGF0IGFyZSB1c2VkIGluIHRoZSBwaXBlbGluZSBzaG91bGQgYmUgcmVnaXN0ZXJlZCBpZiB0aGUgcGlwZWxpbmVcbiAqIG5lZWRzIHRvIGJlIHNlcmlhbGlzZWQsIG9yIGEgc2VyaWFsaXNlZCBwaXBlbGluZSBuZWVkcyB0byBiZSBsb2FkZWQuXG4gKlxuICogUmVnaXN0ZXJpbmcgYSBmdW5jdGlvbiBkb2VzIG5vdCBhZGQgaXQgdG8gYSBwaXBlbGluZSwgZnVuY3Rpb25zIG11c3Qgc3RpbGwgYmVcbiAqIGFkZGVkIHRvIGluc3RhbmNlcyBvZiB0aGUgcGlwZWxpbmUgZm9yIHRoZW0gdG8gYmUgdXNlZCB3aGVuIHJ1bm5pbmcgYSBwaXBlbGluZS5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gY2hlY2sgZm9yLlxuICogQHBhcmFtIHtTdHJpbmd9IGxhYmVsIC0gVGhlIGxhYmVsIHRvIHJlZ2lzdGVyIHRoaXMgZnVuY3Rpb24gd2l0aFxuICovXG5sdW5yLlBpcGVsaW5lLnJlZ2lzdGVyRnVuY3Rpb24gPSBmdW5jdGlvbiAoZm4sIGxhYmVsKSB7XG4gIGlmIChsYWJlbCBpbiB0aGlzLnJlZ2lzdGVyZWRGdW5jdGlvbnMpIHtcbiAgICBsdW5yLnV0aWxzLndhcm4oJ092ZXJ3cml0aW5nIGV4aXN0aW5nIHJlZ2lzdGVyZWQgZnVuY3Rpb246ICcgKyBsYWJlbCk7XG4gIH1cblxuICBmbi5sYWJlbCA9IGxhYmVsO1xuICBsdW5yLlBpcGVsaW5lLnJlZ2lzdGVyZWRGdW5jdGlvbnNbZm4ubGFiZWxdID0gZm47XG59O1xuXG4vKipcbiAqIFdhcm5zIGlmIHRoZSBmdW5jdGlvbiBpcyBub3QgcmVnaXN0ZXJlZCBhcyBhIFBpcGVsaW5lIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufSBmbiAtIFRoZSBmdW5jdGlvbiB0byBjaGVjayBmb3IuXG4gKiBAcHJpdmF0ZVxuICovXG5sdW5yLlBpcGVsaW5lLndhcm5JZkZ1bmN0aW9uTm90UmVnaXN0ZXJlZCA9IGZ1bmN0aW9uIChmbikge1xuICB2YXIgaXNSZWdpc3RlcmVkID0gZm4ubGFiZWwgJiYgKGZuLmxhYmVsIGluIHRoaXMucmVnaXN0ZXJlZEZ1bmN0aW9ucyk7XG5cbiAgaWYgKCFpc1JlZ2lzdGVyZWQpIHtcbiAgICBsdW5yLnV0aWxzLndhcm4oJ0Z1bmN0aW9uIGlzIG5vdCByZWdpc3RlcmVkIHdpdGggcGlwZWxpbmUuIFRoaXMgbWF5IGNhdXNlIHByb2JsZW1zIHdoZW4gc2VyaWFsaXNpbmcgdGhlIGluZGV4LlxcbicsIGZuKTtcbiAgfVxufTtcblxuLyoqXG4gKiBMb2FkcyBhIHByZXZpb3VzbHkgc2VyaWFsaXNlZCBwaXBlbGluZS5cbiAqXG4gKiBBbGwgZnVuY3Rpb25zIHRvIGJlIGxvYWRlZCBtdXN0IGFscmVhZHkgYmUgcmVnaXN0ZXJlZCB3aXRoIGx1bnIuUGlwZWxpbmUuXG4gKiBJZiBhbnkgZnVuY3Rpb24gZnJvbSB0aGUgc2VyaWFsaXNlZCBkYXRhIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkIHRoZW4gYW5cbiAqIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXJpYWxpc2VkIC0gVGhlIHNlcmlhbGlzZWQgcGlwZWxpbmUgdG8gbG9hZC5cbiAqIEByZXR1cm5zIHtsdW5yLlBpcGVsaW5lfVxuICovXG5sdW5yLlBpcGVsaW5lLmxvYWQgPSBmdW5jdGlvbiAoc2VyaWFsaXNlZCkge1xuICB2YXIgcGlwZWxpbmUgPSBuZXcgbHVuci5QaXBlbGluZSgpO1xuXG4gIHNlcmlhbGlzZWQuZm9yRWFjaChmdW5jdGlvbiAoZm5OYW1lKSB7XG4gICAgdmFyIGZuID0gbHVuci5QaXBlbGluZS5yZWdpc3RlcmVkRnVuY3Rpb25zW2ZuTmFtZV07XG5cbiAgICBpZiAoZm4pIHtcbiAgICAgIHBpcGVsaW5lLmFkZChmbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGxvYWQgdW5yZWdpc3RlcmVkIGZ1bmN0aW9uOiAnICsgZm5OYW1lKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwaXBlbGluZTtcbn07XG5cbi8qKlxuICogQWRkcyBuZXcgZnVuY3Rpb25zIHRvIHRoZSBlbmQgb2YgdGhlIHBpcGVsaW5lLlxuICpcbiAqIExvZ3MgYSB3YXJuaW5nIGlmIHRoZSBmdW5jdGlvbiBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZC5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbltdfSBmdW5jdGlvbnMgLSBBbnkgbnVtYmVyIG9mIGZ1bmN0aW9ucyB0byBhZGQgdG8gdGhlIHBpcGVsaW5lLlxuICovXG5sdW5yLlBpcGVsaW5lLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBmbnMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXG4gIGZucy5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgIGx1bnIuUGlwZWxpbmUud2FybklmRnVuY3Rpb25Ob3RSZWdpc3RlcmVkKGZuKTtcbiAgICB0aGlzLl9zdGFjay5wdXNoKGZuKTtcbiAgfSwgdGhpcyk7XG59O1xuXG4vKipcbiAqIEFkZHMgYSBzaW5nbGUgZnVuY3Rpb24gYWZ0ZXIgYSBmdW5jdGlvbiB0aGF0IGFscmVhZHkgZXhpc3RzIGluIHRoZVxuICogcGlwZWxpbmUuXG4gKlxuICogTG9ncyBhIHdhcm5pbmcgaWYgdGhlIGZ1bmN0aW9uIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLlxuICpcbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufSBleGlzdGluZ0ZuIC0gQSBmdW5jdGlvbiB0aGF0IGFscmVhZHkgZXhpc3RzIGluIHRoZSBwaXBlbGluZS5cbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufSBuZXdGbiAtIFRoZSBuZXcgZnVuY3Rpb24gdG8gYWRkIHRvIHRoZSBwaXBlbGluZS5cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUuYWZ0ZXIgPSBmdW5jdGlvbiAoZXhpc3RpbmdGbiwgbmV3Rm4pIHtcbiAgbHVuci5QaXBlbGluZS53YXJuSWZGdW5jdGlvbk5vdFJlZ2lzdGVyZWQobmV3Rm4pO1xuXG4gIHZhciBwb3MgPSB0aGlzLl9zdGFjay5pbmRleE9mKGV4aXN0aW5nRm4pO1xuICBpZiAocG9zID09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZmluZCBleGlzdGluZ0ZuJyk7XG4gIH1cblxuICBwb3MgPSBwb3MgKyAxO1xuICB0aGlzLl9zdGFjay5zcGxpY2UocG9zLCAwLCBuZXdGbik7XG59O1xuXG4vKipcbiAqIEFkZHMgYSBzaW5nbGUgZnVuY3Rpb24gYmVmb3JlIGEgZnVuY3Rpb24gdGhhdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGVcbiAqIHBpcGVsaW5lLlxuICpcbiAqIExvZ3MgYSB3YXJuaW5nIGlmIHRoZSBmdW5jdGlvbiBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZC5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZXhpc3RpbmdGbiAtIEEgZnVuY3Rpb24gdGhhdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgcGlwZWxpbmUuXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gbmV3Rm4gLSBUaGUgbmV3IGZ1bmN0aW9uIHRvIGFkZCB0byB0aGUgcGlwZWxpbmUuXG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLmJlZm9yZSA9IGZ1bmN0aW9uIChleGlzdGluZ0ZuLCBuZXdGbikge1xuICBsdW5yLlBpcGVsaW5lLndhcm5JZkZ1bmN0aW9uTm90UmVnaXN0ZXJlZChuZXdGbik7XG5cbiAgdmFyIHBvcyA9IHRoaXMuX3N0YWNrLmluZGV4T2YoZXhpc3RpbmdGbik7XG4gIGlmIChwb3MgPT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBmaW5kIGV4aXN0aW5nRm4nKTtcbiAgfVxuXG4gIHRoaXMuX3N0YWNrLnNwbGljZShwb3MsIDAsIG5ld0ZuKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlcyBhIGZ1bmN0aW9uIGZyb20gdGhlIHBpcGVsaW5lLlxuICpcbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gcmVtb3ZlIGZyb20gdGhlIHBpcGVsaW5lLlxuICovXG5sdW5yLlBpcGVsaW5lLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoZm4pIHtcbiAgdmFyIHBvcyA9IHRoaXMuX3N0YWNrLmluZGV4T2YoZm4pO1xuICBpZiAocG9zID09IC0xKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5fc3RhY2suc3BsaWNlKHBvcywgMSk7XG59O1xuXG4vKipcbiAqIFJ1bnMgdGhlIGN1cnJlbnQgbGlzdCBvZiBmdW5jdGlvbnMgdGhhdCBtYWtlIHVwIHRoZSBwaXBlbGluZSBhZ2FpbnN0IHRoZVxuICogcGFzc2VkIHRva2Vucy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSB0b2tlbnMgVGhlIHRva2VucyB0byBydW4gdGhyb3VnaCB0aGUgcGlwZWxpbmUuXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICh0b2tlbnMpIHtcbiAgdmFyIHN0YWNrTGVuZ3RoID0gdGhpcy5fc3RhY2subGVuZ3RoO1xuXG4gIHZhciByID0gZnVuY3Rpb24gKG1lbW8sIHRva2VuLCBqKSB7XG4gICAgdmFyIHJlc3VsdCA9IGZuKHRva2VuLCBqLCB0b2tlbnMpO1xuICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCB8fCByZXN1bHQgPT09ICcnKSByZXR1cm4gbWVtbztcbiAgICByZXR1cm4gbWVtby5jb25jYXQocmVzdWx0KTtcbiAgfTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YWNrTGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZm4gPSB0aGlzLl9zdGFja1tpXTtcbiAgICB0b2tlbnMgPSB0b2tlbnMucmVkdWNlKHIsIFtdKTtcbiAgfVxuXG4gIHJldHVybiB0b2tlbnM7XG59O1xuXG4vKipcbiAqIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgcGFzc2luZyBhIHN0cmluZyB0aHJvdWdoIGEgcGlwZWxpbmUgYW5kIGdldHRpbmdcbiAqIHN0cmluZ3Mgb3V0LiBUaGlzIG1ldGhvZCB0YWtlcyBjYXJlIG9mIHdyYXBwaW5nIHRoZSBwYXNzZWQgc3RyaW5nIGluIGFcbiAqIHRva2VuIGFuZCBtYXBwaW5nIHRoZSByZXN1bHRpbmcgdG9rZW5zIGJhY2sgdG8gc3RyaW5ncy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIC0gVGhlIHN0cmluZyB0byBwYXNzIHRocm91Z2ggdGhlIHBpcGVsaW5lLlxuICogQHJldHVybnMge3N0cmluZ1tdfVxuICovXG5sdW5yLlBpcGVsaW5lLnByb3RvdHlwZS5ydW5TdHJpbmcgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHZhciB0b2tlbiA9IG5ldyBsdW5yLlRva2VuIChzdHIpO1xuXG4gIHJldHVybiB0aGlzLnJ1bihbdG9rZW5dKS5tYXAoZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gdC50b1N0cmluZygpO1xuICB9KTtcbn07XG5cbi8qKlxuICogUmVzZXRzIHRoZSBwaXBlbGluZSBieSByZW1vdmluZyBhbnkgZXhpc3RpbmcgcHJvY2Vzc29ycy5cbiAqXG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9zdGFjayA9IFtdO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIHBpcGVsaW5lIHJlYWR5IGZvciBzZXJpYWxpc2F0aW9uLlxuICpcbiAqIExvZ3MgYSB3YXJuaW5nIGlmIHRoZSBmdW5jdGlvbiBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZC5cbiAqXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuX3N0YWNrLm1hcChmdW5jdGlvbiAoZm4pIHtcbiAgICBsdW5yLlBpcGVsaW5lLndhcm5JZkZ1bmN0aW9uTm90UmVnaXN0ZXJlZChmbik7XG4gICAgcmV0dXJuIGZuLmxhYmVsO1xuICB9KTtcbn07XG4vKiFcbiAqIGx1bnIuVmVjdG9yXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBBIHZlY3RvciBpcyB1c2VkIHRvIGNvbnN0cnVjdCB0aGUgdmVjdG9yIHNwYWNlIG9mIGRvY3VtZW50cyBhbmQgcXVlcmllcy4gVGhlc2VcbiAqIHZlY3RvcnMgc3VwcG9ydCBvcGVyYXRpb25zIHRvIGRldGVybWluZSB0aGUgc2ltaWxhcml0eSBiZXR3ZWVuIHR3byBkb2N1bWVudHMgb3JcbiAqIGEgZG9jdW1lbnQgYW5kIGEgcXVlcnkuXG4gKlxuICogTm9ybWFsbHkgbm8gcGFyYW1ldGVycyBhcmUgcmVxdWlyZWQgZm9yIGluaXRpYWxpemluZyBhIHZlY3RvciwgYnV0IGluIHRoZSBjYXNlIG9mXG4gKiBsb2FkaW5nIGEgcHJldmlvdXNseSBkdW1wZWQgdmVjdG9yIHRoZSByYXcgZWxlbWVudHMgY2FuIGJlIHByb3ZpZGVkIHRvIHRoZSBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBGb3IgcGVyZm9ybWFuY2UgcmVhc29ucyB2ZWN0b3JzIGFyZSBpbXBsZW1lbnRlZCB3aXRoIGEgZmxhdCBhcnJheSwgd2hlcmUgYW4gZWxlbWVudHNcbiAqIGluZGV4IGlzIGltbWVkaWF0ZWx5IGZvbGxvd2VkIGJ5IGl0cyB2YWx1ZS4gRS5nLiBbaW5kZXgsIHZhbHVlLCBpbmRleCwgdmFsdWVdLiBUaGlzXG4gKiBhbGxvd3MgdGhlIHVuZGVybHlpbmcgYXJyYXkgdG8gYmUgYXMgc3BhcnNlIGFzIHBvc3NpYmxlIGFuZCBzdGlsbCBvZmZlciBkZWNlbnRcbiAqIHBlcmZvcm1hbmNlIHdoZW4gYmVpbmcgdXNlZCBmb3IgdmVjdG9yIGNhbGN1bGF0aW9ucy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyW119IFtlbGVtZW50c10gLSBUaGUgZmxhdCBsaXN0IG9mIGVsZW1lbnQgaW5kZXggYW5kIGVsZW1lbnQgdmFsdWUgcGFpcnMuXG4gKi9cbmx1bnIuVmVjdG9yID0gZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gIHRoaXMuX21hZ25pdHVkZSA9IDA7XG4gIHRoaXMuZWxlbWVudHMgPSBlbGVtZW50cyB8fCBbXTtcbn07XG5cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBwb3NpdGlvbiB3aXRoaW4gdGhlIHZlY3RvciB0byBpbnNlcnQgYSBnaXZlbiBpbmRleC5cbiAqXG4gKiBUaGlzIGlzIHVzZWQgaW50ZXJuYWxseSBieSBpbnNlcnQgYW5kIHVwc2VydC4gSWYgdGhlcmUgYXJlIGR1cGxpY2F0ZSBpbmRleGVzIHRoZW5cbiAqIHRoZSBwb3NpdGlvbiBpcyByZXR1cm5lZCBhcyBpZiB0aGUgdmFsdWUgZm9yIHRoYXQgaW5kZXggd2VyZSB0byBiZSB1cGRhdGVkLCBidXQgaXRcbiAqIGlzIHRoZSBjYWxsZXJzIHJlc3BvbnNpYmlsaXR5IHRvIGNoZWNrIHdoZXRoZXIgdGhlcmUgaXMgYSBkdXBsaWNhdGUgYXQgdGhhdCBpbmRleFxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbnNlcnRJZHggLSBUaGUgaW5kZXggYXQgd2hpY2ggdGhlIGVsZW1lbnQgc2hvdWxkIGJlIGluc2VydGVkLlxuICogQHJldHVybnMge051bWJlcn1cbiAqL1xubHVuci5WZWN0b3IucHJvdG90eXBlLnBvc2l0aW9uRm9ySW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgLy8gRm9yIGFuIGVtcHR5IHZlY3RvciB0aGUgdHVwbGUgY2FuIGJlIGluc2VydGVkIGF0IHRoZSBiZWdpbm5pbmdcbiAgaWYgKHRoaXMuZWxlbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICB2YXIgc3RhcnQgPSAwLFxuICAgICAgZW5kID0gdGhpcy5lbGVtZW50cy5sZW5ndGggLyAyLFxuICAgICAgc2xpY2VMZW5ndGggPSBlbmQgLSBzdGFydCxcbiAgICAgIHBpdm90UG9pbnQgPSBNYXRoLmZsb29yKHNsaWNlTGVuZ3RoIC8gMiksXG4gICAgICBwaXZvdEluZGV4ID0gdGhpcy5lbGVtZW50c1twaXZvdFBvaW50ICogMl07XG5cbiAgd2hpbGUgKHNsaWNlTGVuZ3RoID4gMSkge1xuICAgIGlmIChwaXZvdEluZGV4IDwgaW5kZXgpIHtcbiAgICAgIHN0YXJ0ID0gcGl2b3RQb2ludDtcbiAgICB9XG5cbiAgICBpZiAocGl2b3RJbmRleCA+IGluZGV4KSB7XG4gICAgICBlbmQgPSBwaXZvdFBvaW50O1xuICAgIH1cblxuICAgIGlmIChwaXZvdEluZGV4ID09IGluZGV4KSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBzbGljZUxlbmd0aCA9IGVuZCAtIHN0YXJ0O1xuICAgIHBpdm90UG9pbnQgPSBzdGFydCArIE1hdGguZmxvb3Ioc2xpY2VMZW5ndGggLyAyKTtcbiAgICBwaXZvdEluZGV4ID0gdGhpcy5lbGVtZW50c1twaXZvdFBvaW50ICogMl07XG4gIH1cblxuICBpZiAocGl2b3RJbmRleCA9PSBpbmRleCkge1xuICAgIHJldHVybiBwaXZvdFBvaW50ICogMjtcbiAgfVxuXG4gIGlmIChwaXZvdEluZGV4ID4gaW5kZXgpIHtcbiAgICByZXR1cm4gcGl2b3RQb2ludCAqIDI7XG4gIH1cblxuICBpZiAocGl2b3RJbmRleCA8IGluZGV4KSB7XG4gICAgcmV0dXJuIChwaXZvdFBvaW50ICsgMSkgKiAyO1xuICB9XG59O1xuXG4vKipcbiAqIEluc2VydHMgYW4gZWxlbWVudCBhdCBhbiBpbmRleCB3aXRoaW4gdGhlIHZlY3Rvci5cbiAqXG4gKiBEb2VzIG5vdCBhbGxvdyBkdXBsaWNhdGVzLCB3aWxsIHRocm93IGFuIGVycm9yIGlmIHRoZXJlIGlzIGFscmVhZHkgYW4gZW50cnlcbiAqIGZvciB0aGlzIGluZGV4LlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbnNlcnRJZHggLSBUaGUgaW5kZXggYXQgd2hpY2ggdGhlIGVsZW1lbnQgc2hvdWxkIGJlIGluc2VydGVkLlxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbCAtIFRoZSB2YWx1ZSB0byBiZSBpbnNlcnRlZCBpbnRvIHRoZSB2ZWN0b3IuXG4gKi9cbmx1bnIuVmVjdG9yLnByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbiAoaW5zZXJ0SWR4LCB2YWwpIHtcbiAgdGhpcy51cHNlcnQoaW5zZXJ0SWR4LCB2YWwsIGZ1bmN0aW9uICgpIHtcbiAgICB0aHJvdyBcImR1cGxpY2F0ZSBpbmRleFwiO1xuICB9KTtcbn07XG5cbi8qKlxuICogSW5zZXJ0cyBvciB1cGRhdGVzIGFuIGV4aXN0aW5nIGluZGV4IHdpdGhpbiB0aGUgdmVjdG9yLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbnNlcnRJZHggLSBUaGUgaW5kZXggYXQgd2hpY2ggdGhlIGVsZW1lbnQgc2hvdWxkIGJlIGluc2VydGVkLlxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbCAtIFRoZSB2YWx1ZSB0byBiZSBpbnNlcnRlZCBpbnRvIHRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiAtIEEgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgZm9yIHVwZGF0ZXMsIHRoZSBleGlzdGluZyB2YWx1ZSBhbmQgdGhlXG4gKiByZXF1ZXN0ZWQgdmFsdWUgYXJlIHBhc3NlZCBhcyBhcmd1bWVudHNcbiAqL1xubHVuci5WZWN0b3IucHJvdG90eXBlLnVwc2VydCA9IGZ1bmN0aW9uIChpbnNlcnRJZHgsIHZhbCwgZm4pIHtcbiAgdGhpcy5fbWFnbml0dWRlID0gMDtcbiAgdmFyIHBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbkZvckluZGV4KGluc2VydElkeCk7XG5cbiAgaWYgKHRoaXMuZWxlbWVudHNbcG9zaXRpb25dID09IGluc2VydElkeCkge1xuICAgIHRoaXMuZWxlbWVudHNbcG9zaXRpb24gKyAxXSA9IGZuKHRoaXMuZWxlbWVudHNbcG9zaXRpb24gKyAxXSwgdmFsKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmVsZW1lbnRzLnNwbGljZShwb3NpdGlvbiwgMCwgaW5zZXJ0SWR4LCB2YWwpO1xuICB9XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIG1hZ25pdHVkZSBvZiB0aGlzIHZlY3Rvci5cbiAqXG4gKiBAcmV0dXJucyB7TnVtYmVyfVxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUubWFnbml0dWRlID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5fbWFnbml0dWRlKSByZXR1cm4gdGhpcy5fbWFnbml0dWRlO1xuXG4gIHZhciBzdW1PZlNxdWFyZXMgPSAwLFxuICAgICAgZWxlbWVudHNMZW5ndGggPSB0aGlzLmVsZW1lbnRzLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMTsgaSA8IGVsZW1lbnRzTGVuZ3RoOyBpICs9IDIpIHtcbiAgICB2YXIgdmFsID0gdGhpcy5lbGVtZW50c1tpXTtcbiAgICBzdW1PZlNxdWFyZXMgKz0gdmFsICogdmFsO1xuICB9XG5cbiAgdGhpcy5fbWFnbml0dWRlID0gTWF0aC5zcXJ0KHN1bU9mU3F1YXJlcyk7XG4gIHJldHVybiB0aGlzLl9tYWduaXR1ZGU7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHRoaXMgdmVjdG9yIGFuZCBhbm90aGVyIHZlY3Rvci5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuVmVjdG9yfSBvdGhlclZlY3RvciAtIFRoZSB2ZWN0b3IgdG8gY29tcHV0ZSB0aGUgZG90IHByb2R1Y3Qgd2l0aC5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gKi9cbmx1bnIuVmVjdG9yLnByb3RvdHlwZS5kb3QgPSBmdW5jdGlvbiAob3RoZXJWZWN0b3IpIHtcbiAgdmFyIGRvdFByb2R1Y3QgPSAwLFxuICAgICAgYSA9IHRoaXMuZWxlbWVudHMsIGIgPSBvdGhlclZlY3Rvci5lbGVtZW50cyxcbiAgICAgIGFMZW4gPSBhLmxlbmd0aCwgYkxlbiA9IGIubGVuZ3RoLFxuICAgICAgYVZhbCA9IDAsIGJWYWwgPSAwLFxuICAgICAgaSA9IDAsIGogPSAwO1xuXG4gIHdoaWxlIChpIDwgYUxlbiAmJiBqIDwgYkxlbikge1xuICAgIGFWYWwgPSBhW2ldOyBiVmFsID0gYltqXTtcbiAgICBpZiAoYVZhbCA8IGJWYWwpIHtcbiAgICAgIGkgKz0gMjtcbiAgICB9IGVsc2UgaWYgKGFWYWwgPiBiVmFsKSB7XG4gICAgICBqICs9IDI7XG4gICAgfSBlbHNlIGlmIChhVmFsID09IGJWYWwpIHtcbiAgICAgIGRvdFByb2R1Y3QgKz0gYVtpICsgMV0gKiBiW2ogKyAxXTtcbiAgICAgIGkgKz0gMjtcbiAgICAgIGogKz0gMjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZG90UHJvZHVjdDtcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgY29zaW5lIHNpbWlsYXJpdHkgYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlclxuICogdmVjdG9yLlxuICpcbiAqIEBwYXJhbSB7bHVuci5WZWN0b3J9IG90aGVyVmVjdG9yIC0gVGhlIG90aGVyIHZlY3RvciB0byBjYWxjdWxhdGUgdGhlXG4gKiBzaW1pbGFyaXR5IHdpdGguXG4gKiBAcmV0dXJucyB7TnVtYmVyfVxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUuc2ltaWxhcml0eSA9IGZ1bmN0aW9uIChvdGhlclZlY3Rvcikge1xuICByZXR1cm4gdGhpcy5kb3Qob3RoZXJWZWN0b3IpIC8gKHRoaXMubWFnbml0dWRlKCkgKiBvdGhlclZlY3Rvci5tYWduaXR1ZGUoKSk7XG59O1xuXG4vKipcbiAqIENvbnZlcnRzIHRoZSB2ZWN0b3IgdG8gYW4gYXJyYXkgb2YgdGhlIGVsZW1lbnRzIHdpdGhpbiB0aGUgdmVjdG9yLlxuICpcbiAqIEByZXR1cm5zIHtOdW1iZXJbXX1cbiAqL1xubHVuci5WZWN0b3IucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBvdXRwdXQgPSBuZXcgQXJyYXkgKHRoaXMuZWxlbWVudHMubGVuZ3RoIC8gMik7XG5cbiAgZm9yICh2YXIgaSA9IDEsIGogPSAwOyBpIDwgdGhpcy5lbGVtZW50cy5sZW5ndGg7IGkgKz0gMiwgaisrKSB7XG4gICAgb3V0cHV0W2pdID0gdGhpcy5lbGVtZW50c1tpXTtcbiAgfVxuXG4gIHJldHVybiBvdXRwdXQ7XG59O1xuXG4vKipcbiAqIEEgSlNPTiBzZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlY3Rvci5cbiAqXG4gKiBAcmV0dXJucyB7TnVtYmVyW119XG4gKi9cbmx1bnIuVmVjdG9yLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmVsZW1lbnRzO1xufTtcbi8qIGVzbGludC1kaXNhYmxlICovXG4vKiFcbiAqIGx1bnIuc3RlbW1lclxuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICogSW5jbHVkZXMgY29kZSBmcm9tIC0gaHR0cDovL3RhcnRhcnVzLm9yZy9+bWFydGluL1BvcnRlclN0ZW1tZXIvanMudHh0XG4gKi9cblxuLyoqXG4gKiBsdW5yLnN0ZW1tZXIgaXMgYW4gZW5nbGlzaCBsYW5ndWFnZSBzdGVtbWVyLCB0aGlzIGlzIGEgSmF2YVNjcmlwdFxuICogaW1wbGVtZW50YXRpb24gb2YgdGhlIFBvcnRlclN0ZW1tZXIgdGFrZW4gZnJvbSBodHRwOi8vdGFydGFydXMub3JnL35tYXJ0aW5cbiAqXG4gKiBAc3RhdGljXG4gKiBAaW1wbGVtZW50cyB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufVxuICogQHBhcmFtIHtsdW5yLlRva2VufSB0b2tlbiAtIFRoZSBzdHJpbmcgdG8gc3RlbVxuICogQHJldHVybnMge2x1bnIuVG9rZW59XG4gKiBAc2VlIHtAbGluayBsdW5yLlBpcGVsaW5lfVxuICovXG5sdW5yLnN0ZW1tZXIgPSAoZnVuY3Rpb24oKXtcbiAgdmFyIHN0ZXAybGlzdCA9IHtcbiAgICAgIFwiYXRpb25hbFwiIDogXCJhdGVcIixcbiAgICAgIFwidGlvbmFsXCIgOiBcInRpb25cIixcbiAgICAgIFwiZW5jaVwiIDogXCJlbmNlXCIsXG4gICAgICBcImFuY2lcIiA6IFwiYW5jZVwiLFxuICAgICAgXCJpemVyXCIgOiBcIml6ZVwiLFxuICAgICAgXCJibGlcIiA6IFwiYmxlXCIsXG4gICAgICBcImFsbGlcIiA6IFwiYWxcIixcbiAgICAgIFwiZW50bGlcIiA6IFwiZW50XCIsXG4gICAgICBcImVsaVwiIDogXCJlXCIsXG4gICAgICBcIm91c2xpXCIgOiBcIm91c1wiLFxuICAgICAgXCJpemF0aW9uXCIgOiBcIml6ZVwiLFxuICAgICAgXCJhdGlvblwiIDogXCJhdGVcIixcbiAgICAgIFwiYXRvclwiIDogXCJhdGVcIixcbiAgICAgIFwiYWxpc21cIiA6IFwiYWxcIixcbiAgICAgIFwiaXZlbmVzc1wiIDogXCJpdmVcIixcbiAgICAgIFwiZnVsbmVzc1wiIDogXCJmdWxcIixcbiAgICAgIFwib3VzbmVzc1wiIDogXCJvdXNcIixcbiAgICAgIFwiYWxpdGlcIiA6IFwiYWxcIixcbiAgICAgIFwiaXZpdGlcIiA6IFwiaXZlXCIsXG4gICAgICBcImJpbGl0aVwiIDogXCJibGVcIixcbiAgICAgIFwibG9naVwiIDogXCJsb2dcIlxuICAgIH0sXG5cbiAgICBzdGVwM2xpc3QgPSB7XG4gICAgICBcImljYXRlXCIgOiBcImljXCIsXG4gICAgICBcImF0aXZlXCIgOiBcIlwiLFxuICAgICAgXCJhbGl6ZVwiIDogXCJhbFwiLFxuICAgICAgXCJpY2l0aVwiIDogXCJpY1wiLFxuICAgICAgXCJpY2FsXCIgOiBcImljXCIsXG4gICAgICBcImZ1bFwiIDogXCJcIixcbiAgICAgIFwibmVzc1wiIDogXCJcIlxuICAgIH0sXG5cbiAgICBjID0gXCJbXmFlaW91XVwiLCAgICAgICAgICAvLyBjb25zb25hbnRcbiAgICB2ID0gXCJbYWVpb3V5XVwiLCAgICAgICAgICAvLyB2b3dlbFxuICAgIEMgPSBjICsgXCJbXmFlaW91eV0qXCIsICAgIC8vIGNvbnNvbmFudCBzZXF1ZW5jZVxuICAgIFYgPSB2ICsgXCJbYWVpb3VdKlwiLCAgICAgIC8vIHZvd2VsIHNlcXVlbmNlXG5cbiAgICBtZ3IwID0gXCJeKFwiICsgQyArIFwiKT9cIiArIFYgKyBDLCAgICAgICAgICAgICAgIC8vIFtDXVZDLi4uIGlzIG0+MFxuICAgIG1lcTEgPSBcIl4oXCIgKyBDICsgXCIpP1wiICsgViArIEMgKyBcIihcIiArIFYgKyBcIik/JFwiLCAgLy8gW0NdVkNbVl0gaXMgbT0xXG4gICAgbWdyMSA9IFwiXihcIiArIEMgKyBcIik/XCIgKyBWICsgQyArIFYgKyBDLCAgICAgICAvLyBbQ11WQ1ZDLi4uIGlzIG0+MVxuICAgIHNfdiA9IFwiXihcIiArIEMgKyBcIik/XCIgKyB2OyAgICAgICAgICAgICAgICAgICAvLyB2b3dlbCBpbiBzdGVtXG5cbiAgdmFyIHJlX21ncjAgPSBuZXcgUmVnRXhwKG1ncjApO1xuICB2YXIgcmVfbWdyMSA9IG5ldyBSZWdFeHAobWdyMSk7XG4gIHZhciByZV9tZXExID0gbmV3IFJlZ0V4cChtZXExKTtcbiAgdmFyIHJlX3NfdiA9IG5ldyBSZWdFeHAoc192KTtcblxuICB2YXIgcmVfMWEgPSAvXiguKz8pKHNzfGkpZXMkLztcbiAgdmFyIHJlMl8xYSA9IC9eKC4rPykoW15zXSlzJC87XG4gIHZhciByZV8xYiA9IC9eKC4rPyllZWQkLztcbiAgdmFyIHJlMl8xYiA9IC9eKC4rPykoZWR8aW5nKSQvO1xuICB2YXIgcmVfMWJfMiA9IC8uJC87XG4gIHZhciByZTJfMWJfMiA9IC8oYXR8Ymx8aXopJC87XG4gIHZhciByZTNfMWJfMiA9IG5ldyBSZWdFeHAoXCIoW15hZWlvdXlsc3pdKVxcXFwxJFwiKTtcbiAgdmFyIHJlNF8xYl8yID0gbmV3IFJlZ0V4cChcIl5cIiArIEMgKyB2ICsgXCJbXmFlaW91d3h5XSRcIik7XG5cbiAgdmFyIHJlXzFjID0gL14oLis/W15hZWlvdV0peSQvO1xuICB2YXIgcmVfMiA9IC9eKC4rPykoYXRpb25hbHx0aW9uYWx8ZW5jaXxhbmNpfGl6ZXJ8YmxpfGFsbGl8ZW50bGl8ZWxpfG91c2xpfGl6YXRpb258YXRpb258YXRvcnxhbGlzbXxpdmVuZXNzfGZ1bG5lc3N8b3VzbmVzc3xhbGl0aXxpdml0aXxiaWxpdGl8bG9naSkkLztcblxuICB2YXIgcmVfMyA9IC9eKC4rPykoaWNhdGV8YXRpdmV8YWxpemV8aWNpdGl8aWNhbHxmdWx8bmVzcykkLztcblxuICB2YXIgcmVfNCA9IC9eKC4rPykoYWx8YW5jZXxlbmNlfGVyfGljfGFibGV8aWJsZXxhbnR8ZW1lbnR8bWVudHxlbnR8b3V8aXNtfGF0ZXxpdGl8b3VzfGl2ZXxpemUpJC87XG4gIHZhciByZTJfNCA9IC9eKC4rPykoc3x0KShpb24pJC87XG5cbiAgdmFyIHJlXzUgPSAvXiguKz8pZSQvO1xuICB2YXIgcmVfNV8xID0gL2xsJC87XG4gIHZhciByZTNfNSA9IG5ldyBSZWdFeHAoXCJeXCIgKyBDICsgdiArIFwiW15hZWlvdXd4eV0kXCIpO1xuXG4gIHZhciBwb3J0ZXJTdGVtbWVyID0gZnVuY3Rpb24gcG9ydGVyU3RlbW1lcih3KSB7XG4gICAgdmFyIHN0ZW0sXG4gICAgICBzdWZmaXgsXG4gICAgICBmaXJzdGNoLFxuICAgICAgcmUsXG4gICAgICByZTIsXG4gICAgICByZTMsXG4gICAgICByZTQ7XG5cbiAgICBpZiAody5sZW5ndGggPCAzKSB7IHJldHVybiB3OyB9XG5cbiAgICBmaXJzdGNoID0gdy5zdWJzdHIoMCwxKTtcbiAgICBpZiAoZmlyc3RjaCA9PSBcInlcIikge1xuICAgICAgdyA9IGZpcnN0Y2gudG9VcHBlckNhc2UoKSArIHcuc3Vic3RyKDEpO1xuICAgIH1cblxuICAgIC8vIFN0ZXAgMWFcbiAgICByZSA9IHJlXzFhO1xuICAgIHJlMiA9IHJlMl8xYTtcblxuICAgIGlmIChyZS50ZXN0KHcpKSB7IHcgPSB3LnJlcGxhY2UocmUsXCIkMSQyXCIpOyB9XG4gICAgZWxzZSBpZiAocmUyLnRlc3QodykpIHsgdyA9IHcucmVwbGFjZShyZTIsXCIkMSQyXCIpOyB9XG5cbiAgICB2YXIgZnA7XG4gICAgLy8gU3RlcCAxYlxuICAgIHJlID0gcmVfMWI7XG4gICAgcmUyID0gcmUyXzFiO1xuICAgIGlmIChyZS50ZXN0KHcpKSB7XG4gICAgICBmcCA9IHJlLmV4ZWModyk7XG4gICAgICByZSA9IHJlX21ncjA7XG4gICAgICBpZiAocmUudGVzdChmcFsxXSkpIHtcbiAgICAgICAgcmUgPSByZV8xYl8yO1xuICAgICAgICB3ID0gdy5yZXBsYWNlKHJlLFwiXCIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmUyLnRlc3QodykpIHtcbiAgICAgIGZwID0gcmUyLmV4ZWModyk7XG4gICAgICBzdGVtID0gZnBbMV07XG4gICAgICByZTIgPSByZV9zX3Y7XG4gICAgICBpZiAocmUyLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgdyA9IHN0ZW07XG4gICAgICAgIHJlMiA9IHJlMl8xYl8yO1xuICAgICAgICByZTMgPSByZTNfMWJfMjtcbiAgICAgICAgcmU0ID0gcmU0XzFiXzI7XG4gICAgICAgIGlmIChyZTIudGVzdCh3KSkgeyB3ID0gdyArIFwiZVwiOyB9XG4gICAgICAgIGVsc2UgaWYgKHJlMy50ZXN0KHcpKSB7IHJlID0gcmVfMWJfMjsgdyA9IHcucmVwbGFjZShyZSxcIlwiKTsgfVxuICAgICAgICBlbHNlIGlmIChyZTQudGVzdCh3KSkgeyB3ID0gdyArIFwiZVwiOyB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RlcCAxYyAtIHJlcGxhY2Ugc3VmZml4IHkgb3IgWSBieSBpIGlmIHByZWNlZGVkIGJ5IGEgbm9uLXZvd2VsIHdoaWNoIGlzIG5vdCB0aGUgZmlyc3QgbGV0dGVyIG9mIHRoZSB3b3JkIChzbyBjcnkgLT4gY3JpLCBieSAtPiBieSwgc2F5IC0+IHNheSlcbiAgICByZSA9IHJlXzFjO1xuICAgIGlmIChyZS50ZXN0KHcpKSB7XG4gICAgICBmcCA9IHJlLmV4ZWModyk7XG4gICAgICBzdGVtID0gZnBbMV07XG4gICAgICB3ID0gc3RlbSArIFwiaVwiO1xuICAgIH1cblxuICAgIC8vIFN0ZXAgMlxuICAgIHJlID0gcmVfMjtcbiAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgZnAgPSByZS5leGVjKHcpO1xuICAgICAgc3RlbSA9IGZwWzFdO1xuICAgICAgc3VmZml4ID0gZnBbMl07XG4gICAgICByZSA9IHJlX21ncjA7XG4gICAgICBpZiAocmUudGVzdChzdGVtKSkge1xuICAgICAgICB3ID0gc3RlbSArIHN0ZXAybGlzdFtzdWZmaXhdO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN0ZXAgM1xuICAgIHJlID0gcmVfMztcbiAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgZnAgPSByZS5leGVjKHcpO1xuICAgICAgc3RlbSA9IGZwWzFdO1xuICAgICAgc3VmZml4ID0gZnBbMl07XG4gICAgICByZSA9IHJlX21ncjA7XG4gICAgICBpZiAocmUudGVzdChzdGVtKSkge1xuICAgICAgICB3ID0gc3RlbSArIHN0ZXAzbGlzdFtzdWZmaXhdO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN0ZXAgNFxuICAgIHJlID0gcmVfNDtcbiAgICByZTIgPSByZTJfNDtcbiAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgZnAgPSByZS5leGVjKHcpO1xuICAgICAgc3RlbSA9IGZwWzFdO1xuICAgICAgcmUgPSByZV9tZ3IxO1xuICAgICAgaWYgKHJlLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgdyA9IHN0ZW07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChyZTIudGVzdCh3KSkge1xuICAgICAgZnAgPSByZTIuZXhlYyh3KTtcbiAgICAgIHN0ZW0gPSBmcFsxXSArIGZwWzJdO1xuICAgICAgcmUyID0gcmVfbWdyMTtcbiAgICAgIGlmIChyZTIudGVzdChzdGVtKSkge1xuICAgICAgICB3ID0gc3RlbTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdGVwIDVcbiAgICByZSA9IHJlXzU7XG4gICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgIHN0ZW0gPSBmcFsxXTtcbiAgICAgIHJlID0gcmVfbWdyMTtcbiAgICAgIHJlMiA9IHJlX21lcTE7XG4gICAgICByZTMgPSByZTNfNTtcbiAgICAgIGlmIChyZS50ZXN0KHN0ZW0pIHx8IChyZTIudGVzdChzdGVtKSAmJiAhKHJlMy50ZXN0KHN0ZW0pKSkpIHtcbiAgICAgICAgdyA9IHN0ZW07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmUgPSByZV81XzE7XG4gICAgcmUyID0gcmVfbWdyMTtcbiAgICBpZiAocmUudGVzdCh3KSAmJiByZTIudGVzdCh3KSkge1xuICAgICAgcmUgPSByZV8xYl8yO1xuICAgICAgdyA9IHcucmVwbGFjZShyZSxcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBhbmQgdHVybiBpbml0aWFsIFkgYmFjayB0byB5XG5cbiAgICBpZiAoZmlyc3RjaCA9PSBcInlcIikge1xuICAgICAgdyA9IGZpcnN0Y2gudG9Mb3dlckNhc2UoKSArIHcuc3Vic3RyKDEpO1xuICAgIH1cblxuICAgIHJldHVybiB3O1xuICB9O1xuXG4gIHJldHVybiBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICByZXR1cm4gdG9rZW4udXBkYXRlKHBvcnRlclN0ZW1tZXIpO1xuICB9O1xufSkoKTtcblxubHVuci5QaXBlbGluZS5yZWdpc3RlckZ1bmN0aW9uKGx1bnIuc3RlbW1lciwgJ3N0ZW1tZXInKTtcbi8qIVxuICogbHVuci5zdG9wV29yZEZpbHRlclxuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogbHVuci5nZW5lcmF0ZVN0b3BXb3JkRmlsdGVyIGJ1aWxkcyBhIHN0b3BXb3JkRmlsdGVyIGZ1bmN0aW9uIGZyb20gdGhlIHByb3ZpZGVkXG4gKiBsaXN0IG9mIHN0b3Agd29yZHMuXG4gKlxuICogVGhlIGJ1aWx0IGluIGx1bnIuc3RvcFdvcmRGaWx0ZXIgaXMgYnVpbHQgdXNpbmcgdGhpcyBnZW5lcmF0b3IgYW5kIGNhbiBiZSB1c2VkXG4gKiB0byBnZW5lcmF0ZSBjdXN0b20gc3RvcFdvcmRGaWx0ZXJzIGZvciBhcHBsaWNhdGlvbnMgb3Igbm9uIEVuZ2xpc2ggbGFuZ3VhZ2VzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHRva2VuIFRoZSB0b2tlbiB0byBwYXNzIHRocm91Z2ggdGhlIGZpbHRlclxuICogQHJldHVybnMge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn1cbiAqIEBzZWUgbHVuci5QaXBlbGluZVxuICogQHNlZSBsdW5yLnN0b3BXb3JkRmlsdGVyXG4gKi9cbmx1bnIuZ2VuZXJhdGVTdG9wV29yZEZpbHRlciA9IGZ1bmN0aW9uIChzdG9wV29yZHMpIHtcbiAgdmFyIHdvcmRzID0gc3RvcFdvcmRzLnJlZHVjZShmdW5jdGlvbiAobWVtbywgc3RvcFdvcmQpIHtcbiAgICBtZW1vW3N0b3BXb3JkXSA9IHN0b3BXb3JkO1xuICAgIHJldHVybiBtZW1vO1xuICB9LCB7fSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICh0b2tlbikge1xuICAgIGlmICh0b2tlbiAmJiB3b3Jkc1t0b2tlbi50b1N0cmluZygpXSAhPT0gdG9rZW4udG9TdHJpbmcoKSkgcmV0dXJuIHRva2VuO1xuICB9O1xufTtcblxuLyoqXG4gKiBsdW5yLnN0b3BXb3JkRmlsdGVyIGlzIGFuIEVuZ2xpc2ggbGFuZ3VhZ2Ugc3RvcCB3b3JkIGxpc3QgZmlsdGVyLCBhbnkgd29yZHNcbiAqIGNvbnRhaW5lZCBpbiB0aGUgbGlzdCB3aWxsIG5vdCBiZSBwYXNzZWQgdGhyb3VnaCB0aGUgZmlsdGVyLlxuICpcbiAqIFRoaXMgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBpbiB0aGUgUGlwZWxpbmUuIElmIHRoZSB0b2tlbiBkb2VzIG5vdCBwYXNzIHRoZVxuICogZmlsdGVyIHRoZW4gdW5kZWZpbmVkIHdpbGwgYmUgcmV0dXJuZWQuXG4gKlxuICogQGltcGxlbWVudHMge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn1cbiAqIEBwYXJhbXMge2x1bnIuVG9rZW59IHRva2VuIC0gQSB0b2tlbiB0byBjaGVjayBmb3IgYmVpbmcgYSBzdG9wIHdvcmQuXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlbn1cbiAqIEBzZWUge0BsaW5rIGx1bnIuUGlwZWxpbmV9XG4gKi9cbmx1bnIuc3RvcFdvcmRGaWx0ZXIgPSBsdW5yLmdlbmVyYXRlU3RvcFdvcmRGaWx0ZXIoW1xuICAnYScsXG4gICdhYmxlJyxcbiAgJ2Fib3V0JyxcbiAgJ2Fjcm9zcycsXG4gICdhZnRlcicsXG4gICdhbGwnLFxuICAnYWxtb3N0JyxcbiAgJ2Fsc28nLFxuICAnYW0nLFxuICAnYW1vbmcnLFxuICAnYW4nLFxuICAnYW5kJyxcbiAgJ2FueScsXG4gICdhcmUnLFxuICAnYXMnLFxuICAnYXQnLFxuICAnYmUnLFxuICAnYmVjYXVzZScsXG4gICdiZWVuJyxcbiAgJ2J1dCcsXG4gICdieScsXG4gICdjYW4nLFxuICAnY2Fubm90JyxcbiAgJ2NvdWxkJyxcbiAgJ2RlYXInLFxuICAnZGlkJyxcbiAgJ2RvJyxcbiAgJ2RvZXMnLFxuICAnZWl0aGVyJyxcbiAgJ2Vsc2UnLFxuICAnZXZlcicsXG4gICdldmVyeScsXG4gICdmb3InLFxuICAnZnJvbScsXG4gICdnZXQnLFxuICAnZ290JyxcbiAgJ2hhZCcsXG4gICdoYXMnLFxuICAnaGF2ZScsXG4gICdoZScsXG4gICdoZXInLFxuICAnaGVycycsXG4gICdoaW0nLFxuICAnaGlzJyxcbiAgJ2hvdycsXG4gICdob3dldmVyJyxcbiAgJ2knLFxuICAnaWYnLFxuICAnaW4nLFxuICAnaW50bycsXG4gICdpcycsXG4gICdpdCcsXG4gICdpdHMnLFxuICAnanVzdCcsXG4gICdsZWFzdCcsXG4gICdsZXQnLFxuICAnbGlrZScsXG4gICdsaWtlbHknLFxuICAnbWF5JyxcbiAgJ21lJyxcbiAgJ21pZ2h0JyxcbiAgJ21vc3QnLFxuICAnbXVzdCcsXG4gICdteScsXG4gICduZWl0aGVyJyxcbiAgJ25vJyxcbiAgJ25vcicsXG4gICdub3QnLFxuICAnb2YnLFxuICAnb2ZmJyxcbiAgJ29mdGVuJyxcbiAgJ29uJyxcbiAgJ29ubHknLFxuICAnb3InLFxuICAnb3RoZXInLFxuICAnb3VyJyxcbiAgJ293bicsXG4gICdyYXRoZXInLFxuICAnc2FpZCcsXG4gICdzYXknLFxuICAnc2F5cycsXG4gICdzaGUnLFxuICAnc2hvdWxkJyxcbiAgJ3NpbmNlJyxcbiAgJ3NvJyxcbiAgJ3NvbWUnLFxuICAndGhhbicsXG4gICd0aGF0JyxcbiAgJ3RoZScsXG4gICd0aGVpcicsXG4gICd0aGVtJyxcbiAgJ3RoZW4nLFxuICAndGhlcmUnLFxuICAndGhlc2UnLFxuICAndGhleScsXG4gICd0aGlzJyxcbiAgJ3RpcycsXG4gICd0bycsXG4gICd0b28nLFxuICAndHdhcycsXG4gICd1cycsXG4gICd3YW50cycsXG4gICd3YXMnLFxuICAnd2UnLFxuICAnd2VyZScsXG4gICd3aGF0JyxcbiAgJ3doZW4nLFxuICAnd2hlcmUnLFxuICAnd2hpY2gnLFxuICAnd2hpbGUnLFxuICAnd2hvJyxcbiAgJ3dob20nLFxuICAnd2h5JyxcbiAgJ3dpbGwnLFxuICAnd2l0aCcsXG4gICd3b3VsZCcsXG4gICd5ZXQnLFxuICAneW91JyxcbiAgJ3lvdXInXG5dKTtcblxubHVuci5QaXBlbGluZS5yZWdpc3RlckZ1bmN0aW9uKGx1bnIuc3RvcFdvcmRGaWx0ZXIsICdzdG9wV29yZEZpbHRlcicpO1xuLyohXG4gKiBsdW5yLnRyaW1tZXJcbiAqIENvcHlyaWdodCAoQykgMjAxNyBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIGx1bnIudHJpbW1lciBpcyBhIHBpcGVsaW5lIGZ1bmN0aW9uIGZvciB0cmltbWluZyBub24gd29yZFxuICogY2hhcmFjdGVycyBmcm9tIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiB0b2tlbnMgYmVmb3JlIHRoZXlcbiAqIGVudGVyIHRoZSBpbmRleC5cbiAqXG4gKiBUaGlzIGltcGxlbWVudGF0aW9uIG1heSBub3Qgd29yayBjb3JyZWN0bHkgZm9yIG5vbiBsYXRpblxuICogY2hhcmFjdGVycyBhbmQgc2hvdWxkIGVpdGhlciBiZSByZW1vdmVkIG9yIGFkYXB0ZWQgZm9yIHVzZVxuICogd2l0aCBsYW5ndWFnZXMgd2l0aCBub24tbGF0aW4gY2hhcmFjdGVycy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAaW1wbGVtZW50cyB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufVxuICogQHBhcmFtIHtsdW5yLlRva2VufSB0b2tlbiBUaGUgdG9rZW4gdG8gcGFzcyB0aHJvdWdoIHRoZSBmaWx0ZXJcbiAqIEByZXR1cm5zIHtsdW5yLlRva2VufVxuICogQHNlZSBsdW5yLlBpcGVsaW5lXG4gKi9cbmx1bnIudHJpbW1lciA9IGZ1bmN0aW9uICh0b2tlbikge1xuICByZXR1cm4gdG9rZW4udXBkYXRlKGZ1bmN0aW9uIChzKSB7XG4gICAgcmV0dXJuIHMucmVwbGFjZSgvXlxcVysvLCAnJykucmVwbGFjZSgvXFxXKyQvLCAnJyk7XG4gIH0pO1xufTtcblxubHVuci5QaXBlbGluZS5yZWdpc3RlckZ1bmN0aW9uKGx1bnIudHJpbW1lciwgJ3RyaW1tZXInKTtcbi8qIVxuICogbHVuci5Ub2tlblNldFxuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogQSB0b2tlbiBzZXQgaXMgdXNlZCB0byBzdG9yZSB0aGUgdW5pcXVlIGxpc3Qgb2YgYWxsIHRva2Vuc1xuICogd2l0aGluIGFuIGluZGV4LiBUb2tlbiBzZXRzIGFyZSBhbHNvIHVzZWQgdG8gcmVwcmVzZW50IGFuXG4gKiBpbmNvbWluZyBxdWVyeSB0byB0aGUgaW5kZXgsIHRoaXMgcXVlcnkgdG9rZW4gc2V0IGFuZCBpbmRleFxuICogdG9rZW4gc2V0IGFyZSB0aGVuIGludGVyc2VjdGVkIHRvIGZpbmQgd2hpY2ggdG9rZW5zIHRvIGxvb2tcbiAqIHVwIGluIHRoZSBpbnZlcnRlZCBpbmRleC5cbiAqXG4gKiBBIHRva2VuIHNldCBjYW4gaG9sZCBtdWx0aXBsZSB0b2tlbnMsIGFzIGluIHRoZSBjYXNlIG9mIHRoZVxuICogaW5kZXggdG9rZW4gc2V0LCBvciBpdCBjYW4gaG9sZCBhIHNpbmdsZSB0b2tlbiBhcyBpbiB0aGVcbiAqIGNhc2Ugb2YgYSBzaW1wbGUgcXVlcnkgdG9rZW4gc2V0LlxuICpcbiAqIEFkZGl0aW9uYWxseSB0b2tlbiBzZXRzIGFyZSB1c2VkIHRvIHBlcmZvcm0gd2lsZGNhcmQgbWF0Y2hpbmcuXG4gKiBMZWFkaW5nLCBjb250YWluZWQgYW5kIHRyYWlsaW5nIHdpbGRjYXJkcyBhcmUgc3VwcG9ydGVkLCBhbmRcbiAqIGZyb20gdGhpcyBlZGl0IGRpc3RhbmNlIG1hdGNoaW5nIGNhbiBhbHNvIGJlIHByb3ZpZGVkLlxuICpcbiAqIFRva2VuIHNldHMgYXJlIGltcGxlbWVudGVkIGFzIGEgbWluaW1hbCBmaW5pdGUgc3RhdGUgYXV0b21hdGEsXG4gKiB3aGVyZSBib3RoIGNvbW1vbiBwcmVmaXhlcyBhbmQgc3VmZml4ZXMgYXJlIHNoYXJlZCBiZXR3ZWVuIHRva2Vucy5cbiAqIFRoaXMgaGVscHMgdG8gcmVkdWNlIHRoZSBzcGFjZSB1c2VkIGZvciBzdG9yaW5nIHRoZSB0b2tlbiBzZXQuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmx1bnIuVG9rZW5TZXQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZmluYWwgPSBmYWxzZTtcbiAgdGhpcy5lZGdlcyA9IHt9O1xuICB0aGlzLmlkID0gbHVuci5Ub2tlblNldC5fbmV4dElkO1xuICBsdW5yLlRva2VuU2V0Ll9uZXh0SWQgKz0gMTtcbn07XG5cbi8qKlxuICogS2VlcHMgdHJhY2sgb2YgdGhlIG5leHQsIGF1dG8gaW5jcmVtZW50LCBpZGVudGlmaWVyIHRvIGFzc2lnblxuICogdG8gYSBuZXcgdG9rZW5TZXQuXG4gKlxuICogVG9rZW5TZXRzIHJlcXVpcmUgYSB1bmlxdWUgaWRlbnRpZmllciB0byBiZSBjb3JyZWN0bHkgbWluaW1pc2VkLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmx1bnIuVG9rZW5TZXQuX25leHRJZCA9IDE7XG5cbi8qKlxuICogQ3JlYXRlcyBhIFRva2VuU2V0IGluc3RhbmNlIGZyb20gdGhlIGdpdmVuIHNvcnRlZCBhcnJheSBvZiB3b3Jkcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ1tdfSBhcnIgLSBBIHNvcnRlZCBhcnJheSBvZiBzdHJpbmdzIHRvIGNyZWF0ZSB0aGUgc2V0IGZyb20uXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlblNldH1cbiAqIEB0aHJvd3MgV2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGUgaW5wdXQgYXJyYXkgaXMgbm90IHNvcnRlZC5cbiAqL1xubHVuci5Ub2tlblNldC5mcm9tQXJyYXkgPSBmdW5jdGlvbiAoYXJyKSB7XG4gIHZhciBidWlsZGVyID0gbmV3IGx1bnIuVG9rZW5TZXQuQnVpbGRlcigpO1xuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBidWlsZGVyLmluc2VydChhcnJbaV0pO1xuICB9XG5cbiAgYnVpbGRlci5maW5pc2goKTtcbiAgcmV0dXJuIGJ1aWxkZXIucm9vdDtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIHRva2VuIHNldCBmcm9tIGEgcXVlcnkgY2xhdXNlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gY2xhdXNlIC0gQSBzaW5nbGUgY2xhdXNlIGZyb20gbHVuci5RdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjbGF1c2UudGVybSAtIFRoZSBxdWVyeSBjbGF1c2UgdGVybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbY2xhdXNlLmVkaXREaXN0YW5jZV0gLSBUaGUgb3B0aW9uYWwgZWRpdCBkaXN0YW5jZSBmb3IgdGhlIHRlcm0uXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlblNldH1cbiAqL1xubHVuci5Ub2tlblNldC5mcm9tQ2xhdXNlID0gZnVuY3Rpb24gKGNsYXVzZSkge1xuICBpZiAoJ2VkaXREaXN0YW5jZScgaW4gY2xhdXNlKSB7XG4gICAgcmV0dXJuIGx1bnIuVG9rZW5TZXQuZnJvbUZ1enp5U3RyaW5nKGNsYXVzZS50ZXJtLCBjbGF1c2UuZWRpdERpc3RhbmNlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbHVuci5Ub2tlblNldC5mcm9tU3RyaW5nKGNsYXVzZS50ZXJtKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgdG9rZW4gc2V0IHJlcHJlc2VudGluZyBhIHNpbmdsZSBzdHJpbmcgd2l0aCBhIHNwZWNpZmllZFxuICogZWRpdCBkaXN0YW5jZS5cbiAqXG4gKiBJbnNlcnRpb25zLCBkZWxldGlvbnMsIHN1YnN0aXR1dGlvbnMgYW5kIHRyYW5zcG9zaXRpb25zIGFyZSBlYWNoXG4gKiB0cmVhdGVkIGFzIGFuIGVkaXQgZGlzdGFuY2Ugb2YgMS5cbiAqXG4gKiBJbmNyZWFzaW5nIHRoZSBhbGxvd2VkIGVkaXQgZGlzdGFuY2Ugd2lsbCBoYXZlIGEgZHJhbWF0aWMgaW1wYWN0XG4gKiBvbiB0aGUgcGVyZm9ybWFuY2Ugb2YgYm90aCBjcmVhdGluZyBhbmQgaW50ZXJzZWN0aW5nIHRoZXNlIFRva2VuU2V0cy5cbiAqIEl0IGlzIGFkdmlzZWQgdG8ga2VlcCB0aGUgZWRpdCBkaXN0YW5jZSBsZXNzIHRoYW4gMy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIC0gVGhlIHN0cmluZyB0byBjcmVhdGUgdGhlIHRva2VuIHNldCBmcm9tLlxuICogQHBhcmFtIHtudW1iZXJ9IGVkaXREaXN0YW5jZSAtIFRoZSBhbGxvd2VkIGVkaXQgZGlzdGFuY2UgdG8gbWF0Y2guXG4gKiBAcmV0dXJucyB7bHVuci5WZWN0b3J9XG4gKi9cbmx1bnIuVG9rZW5TZXQuZnJvbUZ1enp5U3RyaW5nID0gZnVuY3Rpb24gKHN0ciwgZWRpdERpc3RhbmNlKSB7XG4gIHZhciByb290ID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcblxuICB2YXIgc3RhY2sgPSBbe1xuICAgIG5vZGU6IHJvb3QsXG4gICAgZWRpdHNSZW1haW5pbmc6IGVkaXREaXN0YW5jZSxcbiAgICBzdHI6IHN0clxuICB9XTtcblxuICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgdmFyIGZyYW1lID0gc3RhY2sucG9wKCk7XG5cbiAgICB2YXIgY2hhcjtcbiAgICAvLyBubyBlZGl0XG4gICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPiAwKSB7XG4gICAgICBjaGFyID0gZnJhbWUuc3RyLmNoYXJBdCgwKTtcblxuICAgICAgdmFyIG5vRWRpdE5vZGU7XG4gICAgICBpZiAoY2hhciBpbiBmcmFtZS5ub2RlLmVkZ2VzKSB7XG4gICAgICAgIG5vRWRpdE5vZGUgPSBmcmFtZS5ub2RlLmVkZ2VzW2NoYXJdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9FZGl0Tm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG4gICAgICAgIGZyYW1lLm5vZGUuZWRnZXNbY2hhcl0gPSBub0VkaXROb2RlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZnJhbWUuc3RyLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIG5vRWRpdE5vZGUuZmluYWwgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgbm9kZTogbm9FZGl0Tm9kZSxcbiAgICAgICAgICBlZGl0c1JlbWFpbmluZzogZnJhbWUuZWRpdHNSZW1haW5pbmcsXG4gICAgICAgICAgc3RyOiBmcmFtZS5zdHIuc2xpY2UoMSlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZGVsZXRpb25cbiAgICAvLyBjYW4gb25seSBkbyBhIGRlbGV0aW9uIGlmIHdlIGhhdmUgZW5vdWdoIGVkaXRzIHJlbWFpbmluZ1xuICAgIC8vIGFuZCBpZiB0aGVyZSBhcmUgY2hhcmFjdGVycyBsZWZ0IHRvIGRlbGV0ZSBpbiB0aGUgc3RyaW5nXG4gICAgaWYgKGZyYW1lLmVkaXRzUmVtYWluaW5nID4gMCAmJiBmcmFtZS5zdHIubGVuZ3RoID4gMSkge1xuICAgICAgY2hhciA9IGZyYW1lLnN0ci5jaGFyQXQoMSk7XG5cbiAgICAgIHZhciBkZWxldGlvbk5vZGU7XG4gICAgICBpZiAoY2hhciBpbiBmcmFtZS5ub2RlLmVkZ2VzKSB7XG4gICAgICAgIGRlbGV0aW9uTm9kZSA9IGZyYW1lLm5vZGUuZWRnZXNbY2hhcl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWxldGlvbk5vZGUgPSBuZXcgbHVuci5Ub2tlblNldCgpO1xuICAgICAgICBmcmFtZS5ub2RlLmVkZ2VzW2NoYXJdID0gZGVsZXRpb25Ob2RlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZnJhbWUuc3RyLmxlbmd0aCA8PSAyKSB7XG4gICAgICAgIGRlbGV0aW9uTm9kZS5maW5hbCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICBub2RlOiBkZWxldGlvbk5vZGUsXG4gICAgICAgICAgZWRpdHNSZW1haW5pbmc6IGZyYW1lLmVkaXRzUmVtYWluaW5nIC0gMSxcbiAgICAgICAgICBzdHI6IGZyYW1lLnN0ci5zbGljZSgyKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBkZWxldGlvblxuICAgIC8vIGp1c3QgcmVtb3ZpbmcgdGhlIGxhc3QgY2hhcmFjdGVyIGZyb20gdGhlIHN0clxuICAgIGlmIChmcmFtZS5lZGl0c1JlbWFpbmluZyA+IDAgJiYgZnJhbWUuc3RyLmxlbmd0aCA9PSAxKSB7XG4gICAgICBmcmFtZS5ub2RlLmZpbmFsID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgc3Vic3RpdHV0aW9uTm9kZTtcbiAgICAvLyBzdWJzdGl0dXRpb25cbiAgICAvLyBjYW4gb25seSBkbyBhIHN1YnN0aXR1dGlvbiBpZiB3ZSBoYXZlIGVub3VnaCBlZGl0cyByZW1haW5pbmdcbiAgICAvLyBhbmQgaWYgdGhlcmUgYXJlIGNoYXJhY3RlcnMgbGVmdCB0byBzdWJzdGl0dXRlXG4gICAgaWYgKGZyYW1lLmVkaXRzUmVtYWluaW5nID4gMCAmJiBmcmFtZS5zdHIubGVuZ3RoID49IDEpIHtcbiAgICAgIGlmIChcIipcIiBpbiBmcmFtZS5ub2RlLmVkZ2VzKSB7XG4gICAgICAgIHN1YnN0aXR1dGlvbk5vZGUgPSBmcmFtZS5ub2RlLmVkZ2VzW1wiKlwiXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1YnN0aXR1dGlvbk5vZGUgPSBuZXcgbHVuci5Ub2tlblNldCgpO1xuICAgICAgICBmcmFtZS5ub2RlLmVkZ2VzW1wiKlwiXSA9IHN1YnN0aXR1dGlvbk5vZGU7XG4gICAgICB9XG5cbiAgICAgIGlmIChmcmFtZS5zdHIubGVuZ3RoID09IDEpIHtcbiAgICAgICAgc3Vic3RpdHV0aW9uTm9kZS5maW5hbCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICBub2RlOiBzdWJzdGl0dXRpb25Ob2RlLFxuICAgICAgICAgIGVkaXRzUmVtYWluaW5nOiBmcmFtZS5lZGl0c1JlbWFpbmluZyAtIDEsXG4gICAgICAgICAgc3RyOiBmcmFtZS5zdHIuc2xpY2UoMSlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGluc2VydGlvbk5vZGU7XG4gICAgLy8gaW5zZXJ0aW9uXG4gICAgLy8gY2FuIG9ubHkgZG8gaW5zZXJ0aW9uIGlmIHRoZXJlIGFyZSBlZGl0cyByZW1haW5pbmdcbiAgICBpZiAoZnJhbWUuZWRpdHNSZW1haW5pbmcgPiAwKSB7XG4gICAgICBpZiAoXCIqXCIgaW4gZnJhbWUubm9kZS5lZGdlcykge1xuICAgICAgICBpbnNlcnRpb25Ob2RlID0gZnJhbWUubm9kZS5lZGdlc1tcIipcIl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnNlcnRpb25Ob2RlID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgICAgICAgZnJhbWUubm9kZS5lZGdlc1tcIipcIl0gPSBpbnNlcnRpb25Ob2RlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZnJhbWUuc3RyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpbnNlcnRpb25Ob2RlLmZpbmFsID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YWNrLnB1c2goe1xuICAgICAgICAgIG5vZGU6IGluc2VydGlvbk5vZGUsXG4gICAgICAgICAgZWRpdHNSZW1haW5pbmc6IGZyYW1lLmVkaXRzUmVtYWluaW5nIC0gMSxcbiAgICAgICAgICBzdHI6IGZyYW1lLnN0clxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB0cmFuc3Bvc2l0aW9uXG4gICAgLy8gY2FuIG9ubHkgZG8gYSB0cmFuc3Bvc2l0aW9uIGlmIHRoZXJlIGFyZSBlZGl0cyByZW1haW5pbmdcbiAgICAvLyBhbmQgdGhlcmUgYXJlIGVub3VnaCBjaGFyYWN0ZXJzIHRvIHRyYW5zcG9zZVxuICAgIGlmIChmcmFtZS5lZGl0c1JlbWFpbmluZyA+IDAgJiYgZnJhbWUuc3RyLmxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBjaGFyQSA9IGZyYW1lLnN0ci5jaGFyQXQoMCksXG4gICAgICAgICAgY2hhckIgPSBmcmFtZS5zdHIuY2hhckF0KDEpLFxuICAgICAgICAgIHRyYW5zcG9zZU5vZGU7XG5cbiAgICAgIGlmIChjaGFyQiBpbiBmcmFtZS5ub2RlLmVkZ2VzKSB7XG4gICAgICAgIHRyYW5zcG9zZU5vZGUgPSBmcmFtZS5ub2RlLmVkZ2VzW2NoYXJCXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyYW5zcG9zZU5vZGUgPSBuZXcgbHVuci5Ub2tlblNldCgpO1xuICAgICAgICBmcmFtZS5ub2RlLmVkZ2VzW2NoYXJCXSA9IHRyYW5zcG9zZU5vZGU7XG4gICAgICB9XG5cbiAgICAgIGlmIChmcmFtZS5zdHIubGVuZ3RoID09IDEpIHtcbiAgICAgICAgdHJhbnNwb3NlTm9kZS5maW5hbCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICBub2RlOiB0cmFuc3Bvc2VOb2RlLFxuICAgICAgICAgIGVkaXRzUmVtYWluaW5nOiBmcmFtZS5lZGl0c1JlbWFpbmluZyAtIDEsXG4gICAgICAgICAgc3RyOiBjaGFyQSArIGZyYW1lLnN0ci5zbGljZSgyKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcm9vdDtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIFRva2VuU2V0IGZyb20gYSBzdHJpbmcuXG4gKlxuICogVGhlIHN0cmluZyBtYXkgY29udGFpbiBvbmUgb3IgbW9yZSB3aWxkY2FyZCBjaGFyYWN0ZXJzICgqKVxuICogdGhhdCB3aWxsIGFsbG93IHdpbGRjYXJkIG1hdGNoaW5nIHdoZW4gaW50ZXJzZWN0aW5nIHdpdGhcbiAqIGFub3RoZXIgVG9rZW5TZXQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIFRoZSBzdHJpbmcgdG8gY3JlYXRlIGEgVG9rZW5TZXQgZnJvbS5cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VuU2V0fVxuICovXG5sdW5yLlRva2VuU2V0LmZyb21TdHJpbmcgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHZhciBub2RlID0gbmV3IGx1bnIuVG9rZW5TZXQoKSxcbiAgICAgIHJvb3QgPSBub2RlLFxuICAgICAgd2lsZGNhcmRGb3VuZCA9IGZhbHNlO1xuXG4gIC8qXG4gICAqIEl0ZXJhdGVzIHRocm91Z2ggYWxsIGNoYXJhY3RlcnMgd2l0aGluIHRoZSBwYXNzZWQgc3RyaW5nXG4gICAqIGFwcGVuZGluZyBhIG5vZGUgZm9yIGVhY2ggY2hhcmFjdGVyLlxuICAgKlxuICAgKiBBcyBzb29uIGFzIGEgd2lsZGNhcmQgY2hhcmFjdGVyIGlzIGZvdW5kIHRoZW4gYSBzZWxmXG4gICAqIHJlZmVyZW5jaW5nIGVkZ2UgaXMgaW50cm9kdWNlZCB0byBjb250aW51YWxseSBtYXRjaFxuICAgKiBhbnkgbnVtYmVyIG9mIGFueSBjaGFyYWN0ZXJzLlxuICAgKi9cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHN0ci5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBjaGFyID0gc3RyW2ldLFxuICAgICAgICBmaW5hbCA9IChpID09IGxlbiAtIDEpO1xuXG4gICAgaWYgKGNoYXIgPT0gXCIqXCIpIHtcbiAgICAgIHdpbGRjYXJkRm91bmQgPSB0cnVlO1xuICAgICAgbm9kZS5lZGdlc1tjaGFyXSA9IG5vZGU7XG4gICAgICBub2RlLmZpbmFsID0gZmluYWw7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG5leHQgPSBuZXcgbHVuci5Ub2tlblNldCgpO1xuICAgICAgbmV4dC5maW5hbCA9IGZpbmFsO1xuXG4gICAgICBub2RlLmVkZ2VzW2NoYXJdID0gbmV4dDtcbiAgICAgIG5vZGUgPSBuZXh0O1xuXG4gICAgICAvLyBUT0RPOiBpcyB0aGlzIG5lZWRlZCBhbnltb3JlP1xuICAgICAgaWYgKHdpbGRjYXJkRm91bmQpIHtcbiAgICAgICAgbm9kZS5lZGdlc1tcIipcIl0gPSByb290O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByb290O1xufTtcblxuLyoqXG4gKiBDb252ZXJ0cyB0aGlzIFRva2VuU2V0IGludG8gYW4gYXJyYXkgb2Ygc3RyaW5nc1xuICogY29udGFpbmVkIHdpdGhpbiB0aGUgVG9rZW5TZXQuXG4gKlxuICogQHJldHVybnMge3N0cmluZ1tdfVxuICovXG5sdW5yLlRva2VuU2V0LnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgd29yZHMgPSBbXTtcblxuICB2YXIgc3RhY2sgPSBbe1xuICAgIHByZWZpeDogXCJcIixcbiAgICBub2RlOiB0aGlzXG4gIH1dO1xuXG4gIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICB2YXIgZnJhbWUgPSBzdGFjay5wb3AoKSxcbiAgICAgICAgZWRnZXMgPSBPYmplY3Qua2V5cyhmcmFtZS5ub2RlLmVkZ2VzKSxcbiAgICAgICAgbGVuID0gZWRnZXMubGVuZ3RoO1xuXG4gICAgaWYgKGZyYW1lLm5vZGUuZmluYWwpIHtcbiAgICAgIHdvcmRzLnB1c2goZnJhbWUucHJlZml4KTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgZWRnZSA9IGVkZ2VzW2ldO1xuXG4gICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgcHJlZml4OiBmcmFtZS5wcmVmaXguY29uY2F0KGVkZ2UpLFxuICAgICAgICBub2RlOiBmcmFtZS5ub2RlLmVkZ2VzW2VkZ2VdXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gd29yZHM7XG59O1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIFRva2VuU2V0LlxuICpcbiAqIFRoaXMgaXMgaW50ZW5kZWQgdG8gYWxsb3cgVG9rZW5TZXRzIHRvIGJlIHVzZWQgYXMga2V5c1xuICogaW4gb2JqZWN0cywgbGFyZ2VseSB0byBhaWQgdGhlIGNvbnN0cnVjdGlvbiBhbmQgbWluaW1pc2F0aW9uXG4gKiBvZiBhIFRva2VuU2V0LiBBcyBzdWNoIGl0IGlzIG5vdCBkZXNpZ25lZCB0byBiZSBhIGh1bWFuXG4gKiBmcmllbmRseSByZXByZXNlbnRhdGlvbiBvZiB0aGUgVG9rZW5TZXQuXG4gKlxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xubHVuci5Ub2tlblNldC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIE5PVEU6IFVzaW5nIE9iamVjdC5rZXlzIGhlcmUgYXMgdGhpcy5lZGdlcyBpcyB2ZXJ5IGxpa2VseVxuICAvLyB0byBlbnRlciAnaGFzaC1tb2RlJyB3aXRoIG1hbnkga2V5cyBiZWluZyBhZGRlZFxuICAvL1xuICAvLyBhdm9pZGluZyBhIGZvci1pbiBsb29wIGhlcmUgYXMgaXQgbGVhZHMgdG8gdGhlIGZ1bmN0aW9uXG4gIC8vIGJlaW5nIGRlLW9wdGltaXNlZCAoYXQgbGVhc3QgaW4gVjgpLiBGcm9tIHNvbWUgc2ltcGxlXG4gIC8vIGJlbmNobWFya3MgdGhlIHBlcmZvcm1hbmNlIGlzIGNvbXBhcmFibGUsIGJ1dCBhbGxvd2luZ1xuICAvLyBWOCB0byBvcHRpbWl6ZSBtYXkgbWVhbiBlYXN5IHBlcmZvcm1hbmNlIHdpbnMgaW4gdGhlIGZ1dHVyZS5cblxuICBpZiAodGhpcy5fc3RyKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0cjtcbiAgfVxuXG4gIHZhciBzdHIgPSB0aGlzLmZpbmFsID8gJzEnIDogJzAnLFxuICAgICAgbGFiZWxzID0gT2JqZWN0LmtleXModGhpcy5lZGdlcykuc29ydCgpLFxuICAgICAgbGVuID0gbGFiZWxzLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgdmFyIGxhYmVsID0gbGFiZWxzW2ldLFxuICAgICAgICBub2RlID0gdGhpcy5lZGdlc1tsYWJlbF07XG5cbiAgICBzdHIgPSBzdHIgKyBsYWJlbCArIG5vZGUuaWQ7XG4gIH1cblxuICByZXR1cm4gc3RyO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IFRva2VuU2V0IHRoYXQgaXMgdGhlIGludGVyc2VjdGlvbiBvZlxuICogdGhpcyBUb2tlblNldCBhbmQgdGhlIHBhc3NlZCBUb2tlblNldC5cbiAqXG4gKiBUaGlzIGludGVyc2VjdGlvbiB3aWxsIHRha2UgaW50byBhY2NvdW50IGFueSB3aWxkY2FyZHNcbiAqIGNvbnRhaW5lZCB3aXRoaW4gdGhlIFRva2VuU2V0LlxuICpcbiAqIEBwYXJhbSB7bHVuci5Ub2tlblNldH0gYiAtIEFuIG90aGVyIFRva2VuU2V0IHRvIGludGVyc2VjdCB3aXRoLlxuICogQHJldHVybnMge2x1bnIuVG9rZW5TZXR9XG4gKi9cbmx1bnIuVG9rZW5TZXQucHJvdG90eXBlLmludGVyc2VjdCA9IGZ1bmN0aW9uIChiKSB7XG4gIHZhciBvdXRwdXQgPSBuZXcgbHVuci5Ub2tlblNldCgpO1xuICB2YXIgZnJhbWU7XG5cbiAgdmFyIHN0YWNrID0gW3tcbiAgICBxTm9kZTogYixcbiAgICBvdXRwdXQ6IG91dHB1dCxcbiAgICBub2RlOiB0aGlzXG4gIH1dO1xuXG4gIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICBmcmFtZSA9IHN0YWNrLnBvcCgpO1xuXG4gICAgLy8gTk9URTogQXMgd2l0aCB0aGUgI3RvU3RyaW5nIG1ldGhvZCwgd2UgYXJlIHVzaW5nXG4gICAgLy8gT2JqZWN0LmtleXMgYW5kIGEgZm9yIGxvb3AgaW5zdGVhZCBvZiBhIGZvci1pbiBsb29wXG4gICAgLy8gYXMgYm90aCBvZiB0aGVzZSBvYmplY3RzIGVudGVyICdoYXNoJyBtb2RlLCBjYXVzaW5nXG4gICAgLy8gdGhlIGZ1bmN0aW9uIHRvIGJlIGRlLW9wdGltaXNlZCBpbiBWOFxuICAgIHZhciBxRWRnZXMgPSBPYmplY3Qua2V5cyhmcmFtZS5xTm9kZS5lZGdlcyksXG4gICAgICAgIHFMZW4gPSBxRWRnZXMubGVuZ3RoLFxuICAgICAgICBuRWRnZXMgPSBPYmplY3Qua2V5cyhmcmFtZS5ub2RlLmVkZ2VzKSxcbiAgICAgICAgbkxlbiA9IG5FZGdlcy5sZW5ndGg7XG5cbiAgICBmb3IgKHZhciBxID0gMDsgcSA8IHFMZW47IHErKykge1xuICAgICAgdmFyIHFFZGdlID0gcUVkZ2VzW3FdO1xuXG4gICAgICBmb3IgKHZhciBuID0gMDsgbiA8IG5MZW47IG4rKykge1xuICAgICAgICB2YXIgbkVkZ2UgPSBuRWRnZXNbbl07XG5cbiAgICAgICAgaWYgKG5FZGdlID09IHFFZGdlIHx8IHFFZGdlID09ICcqJykge1xuICAgICAgICAgIHZhciBub2RlID0gZnJhbWUubm9kZS5lZGdlc1tuRWRnZV0sXG4gICAgICAgICAgICAgIHFOb2RlID0gZnJhbWUucU5vZGUuZWRnZXNbcUVkZ2VdLFxuICAgICAgICAgICAgICBmaW5hbCA9IG5vZGUuZmluYWwgJiYgcU5vZGUuZmluYWwsXG4gICAgICAgICAgICAgIG5leHQ7XG5cbiAgICAgICAgICBpZiAobkVkZ2UgaW4gZnJhbWUub3V0cHV0LmVkZ2VzKSB7XG4gICAgICAgICAgICAvLyBhbiBlZGdlIGFscmVhZHkgZXhpc3RzIGZvciB0aGlzIGNoYXJhY3RlclxuICAgICAgICAgICAgLy8gbm8gbmVlZCB0byBjcmVhdGUgYSBuZXcgbm9kZSwganVzdCBzZXQgdGhlIGZpbmFsaXR5XG4gICAgICAgICAgICAvLyBiaXQgdW5sZXNzIHRoaXMgbm9kZSBpcyBhbHJlYWR5IGZpbmFsXG4gICAgICAgICAgICBuZXh0ID0gZnJhbWUub3V0cHV0LmVkZ2VzW25FZGdlXTtcbiAgICAgICAgICAgIG5leHQuZmluYWwgPSBuZXh0LmZpbmFsIHx8IGZpbmFsO1xuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIG5vIGVkZ2UgZXhpc3RzIHlldCwgbXVzdCBjcmVhdGUgb25lXG4gICAgICAgICAgICAvLyBzZXQgdGhlIGZpbmFsaXR5IGJpdCBhbmQgaW5zZXJ0IGl0XG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBvdXRwdXRcbiAgICAgICAgICAgIG5leHQgPSBuZXcgbHVuci5Ub2tlblNldCgpO1xuICAgICAgICAgICAgbmV4dC5maW5hbCA9IGZpbmFsO1xuICAgICAgICAgICAgZnJhbWUub3V0cHV0LmVkZ2VzW25FZGdlXSA9IG5leHQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgICBxTm9kZTogcU5vZGUsXG4gICAgICAgICAgICBvdXRwdXQ6IG5leHQsXG4gICAgICAgICAgICBub2RlOiBub2RlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gb3V0cHV0O1xufTtcbmx1bnIuVG9rZW5TZXQuQnVpbGRlciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5wcmV2aW91c1dvcmQgPSBcIlwiO1xuICB0aGlzLnJvb3QgPSBuZXcgbHVuci5Ub2tlblNldCgpO1xuICB0aGlzLnVuY2hlY2tlZE5vZGVzID0gW107XG4gIHRoaXMubWluaW1pemVkTm9kZXMgPSB7fTtcbn07XG5cbmx1bnIuVG9rZW5TZXQuQnVpbGRlci5wcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24gKHdvcmQpIHtcbiAgdmFyIG5vZGUsXG4gICAgICBjb21tb25QcmVmaXggPSAwO1xuXG4gIGlmICh3b3JkIDwgdGhpcy5wcmV2aW91c1dvcmQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IgKFwiT3V0IG9mIG9yZGVyIHdvcmQgaW5zZXJ0aW9uXCIpO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB3b3JkLmxlbmd0aCAmJiBpIDwgdGhpcy5wcmV2aW91c1dvcmQubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAod29yZFtpXSAhPSB0aGlzLnByZXZpb3VzV29yZFtpXSkgYnJlYWs7XG4gICAgY29tbW9uUHJlZml4Kys7XG4gIH1cblxuICB0aGlzLm1pbmltaXplKGNvbW1vblByZWZpeCk7XG5cbiAgaWYgKHRoaXMudW5jaGVja2VkTm9kZXMubGVuZ3RoID09PSAwKSB7XG4gICAgbm9kZSA9IHRoaXMucm9vdDtcbiAgfSBlbHNlIHtcbiAgICBub2RlID0gdGhpcy51bmNoZWNrZWROb2Rlc1t0aGlzLnVuY2hlY2tlZE5vZGVzLmxlbmd0aCAtIDFdLmNoaWxkO1xuICB9XG5cbiAgZm9yICh2YXIgaiA9IGNvbW1vblByZWZpeDsgaiA8IHdvcmQubGVuZ3RoOyBqKyspIHtcbiAgICB2YXIgbmV4dE5vZGUgPSBuZXcgbHVuci5Ub2tlblNldCgpLFxuICAgICAgICBjaGFyID0gd29yZFtqXTtcblxuICAgIG5vZGUuZWRnZXNbY2hhcl0gPSBuZXh0Tm9kZTtcblxuICAgIHRoaXMudW5jaGVja2VkTm9kZXMucHVzaCh7XG4gICAgICBwYXJlbnQ6IG5vZGUsXG4gICAgICBjaGFyOiBjaGFyLFxuICAgICAgY2hpbGQ6IG5leHROb2RlXG4gICAgfSk7XG5cbiAgICBub2RlID0gbmV4dE5vZGU7XG4gIH1cblxuICBub2RlLmZpbmFsID0gdHJ1ZTtcbiAgdGhpcy5wcmV2aW91c1dvcmQgPSB3b3JkO1xufTtcblxubHVuci5Ub2tlblNldC5CdWlsZGVyLnByb3RvdHlwZS5maW5pc2ggPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMubWluaW1pemUoMCk7XG59O1xuXG5sdW5yLlRva2VuU2V0LkJ1aWxkZXIucHJvdG90eXBlLm1pbmltaXplID0gZnVuY3Rpb24gKGRvd25Ubykge1xuICBmb3IgKHZhciBpID0gdGhpcy51bmNoZWNrZWROb2Rlcy5sZW5ndGggLSAxOyBpID49IGRvd25UbzsgaS0tKSB7XG4gICAgdmFyIG5vZGUgPSB0aGlzLnVuY2hlY2tlZE5vZGVzW2ldLFxuICAgICAgICBjaGlsZEtleSA9IG5vZGUuY2hpbGQudG9TdHJpbmcoKTtcblxuICAgIGlmIChjaGlsZEtleSBpbiB0aGlzLm1pbmltaXplZE5vZGVzKSB7XG4gICAgICBub2RlLnBhcmVudC5lZGdlc1tub2RlLmNoYXJdID0gdGhpcy5taW5pbWl6ZWROb2Rlc1tjaGlsZEtleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENhY2hlIHRoZSBrZXkgZm9yIHRoaXMgbm9kZSBzaW5jZVxuICAgICAgLy8gd2Uga25vdyBpdCBjYW4ndCBjaGFuZ2UgYW55bW9yZVxuICAgICAgbm9kZS5jaGlsZC5fc3RyID0gY2hpbGRLZXk7XG5cbiAgICAgIHRoaXMubWluaW1pemVkTm9kZXNbY2hpbGRLZXldID0gbm9kZS5jaGlsZDtcbiAgICB9XG5cbiAgICB0aGlzLnVuY2hlY2tlZE5vZGVzLnBvcCgpO1xuICB9XG59O1xuLyohXG4gKiBsdW5yLkluZGV4XG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBBbiBpbmRleCBjb250YWlucyB0aGUgYnVpbHQgaW5kZXggb2YgYWxsIGRvY3VtZW50cyBhbmQgcHJvdmlkZXMgYSBxdWVyeSBpbnRlcmZhY2VcbiAqIHRvIHRoZSBpbmRleC5cbiAqXG4gKiBVc3VhbGx5IGluc3RhbmNlcyBvZiBsdW5yLkluZGV4IHdpbGwgbm90IGJlIGNyZWF0ZWQgdXNpbmcgdGhpcyBjb25zdHJ1Y3RvciwgaW5zdGVhZFxuICogbHVuci5CdWlsZGVyIHNob3VsZCBiZSB1c2VkIHRvIGNvbnN0cnVjdCBuZXcgaW5kZXhlcywgb3IgbHVuci5JbmRleC5sb2FkIHNob3VsZCBiZVxuICogdXNlZCB0byBsb2FkIHByZXZpb3VzbHkgYnVpbHQgYW5kIHNlcmlhbGl6ZWQgaW5kZXhlcy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBhdHRycyAtIFRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBidWlsdCBzZWFyY2ggaW5kZXguXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0cnMuaW52ZXJ0ZWRJbmRleCAtIEFuIGluZGV4IG9mIHRlcm0vZmllbGQgdG8gZG9jdW1lbnQgcmVmZXJlbmNlLlxuICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBsdW5yLlZlY3Rvcj59IGF0dHJzLmRvY3VtZW50VmVjdG9ycyAtIERvY3VtZW50IHZlY3RvcnMga2V5ZWQgYnkgZG9jdW1lbnQgcmVmZXJlbmNlLlxuICogQHBhcmFtIHtsdW5yLlRva2VuU2V0fSBhdHRycy50b2tlblNldCAtIEFuIHNldCBvZiBhbGwgY29ycHVzIHRva2Vucy5cbiAqIEBwYXJhbSB7c3RyaW5nW119IGF0dHJzLmZpZWxkcyAtIFRoZSBuYW1lcyBvZiBpbmRleGVkIGRvY3VtZW50IGZpZWxkcy5cbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZX0gYXR0cnMucGlwZWxpbmUgLSBUaGUgcGlwZWxpbmUgdG8gdXNlIGZvciBzZWFyY2ggdGVybXMuXG4gKi9cbmx1bnIuSW5kZXggPSBmdW5jdGlvbiAoYXR0cnMpIHtcbiAgdGhpcy5pbnZlcnRlZEluZGV4ID0gYXR0cnMuaW52ZXJ0ZWRJbmRleDtcbiAgdGhpcy5maWVsZFZlY3RvcnMgPSBhdHRycy5maWVsZFZlY3RvcnM7XG4gIHRoaXMudG9rZW5TZXQgPSBhdHRycy50b2tlblNldDtcbiAgdGhpcy5maWVsZHMgPSBhdHRycy5maWVsZHM7XG4gIHRoaXMucGlwZWxpbmUgPSBhdHRycy5waXBlbGluZTtcbn07XG5cbi8qKlxuICogQSByZXN1bHQgY29udGFpbnMgZGV0YWlscyBvZiBhIGRvY3VtZW50IG1hdGNoaW5nIGEgc2VhcmNoIHF1ZXJ5LlxuICogQHR5cGVkZWYge09iamVjdH0gbHVuci5JbmRleH5SZXN1bHRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSByZWYgLSBUaGUgcmVmZXJlbmNlIG9mIHRoZSBkb2N1bWVudCB0aGlzIHJlc3VsdCByZXByZXNlbnRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHNjb3JlIC0gQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyBob3cgc2ltaWxhciB0aGlzIGRvY3VtZW50IGlzIHRvIHRoZSBxdWVyeS5cbiAqIEBwcm9wZXJ0eSB7bHVuci5NYXRjaERhdGF9IG1hdGNoRGF0YSAtIENvbnRhaW5zIG1ldGFkYXRhIGFib3V0IHRoaXMgbWF0Y2ggaW5jbHVkaW5nIHdoaWNoIHRlcm0ocykgY2F1c2VkIHRoZSBtYXRjaC5cbiAqL1xuXG4vKipcbiAqIEFsdGhvdWdoIGx1bnIgcHJvdmlkZXMgdGhlIGFiaWxpdHkgdG8gY3JlYXRlIHF1ZXJpZXMgdXNpbmcgbHVuci5RdWVyeSwgaXQgYWxzbyBwcm92aWRlcyBhIHNpbXBsZVxuICogcXVlcnkgbGFuZ3VhZ2Ugd2hpY2ggaXRzZWxmIGlzIHBhcnNlZCBpbnRvIGFuIGluc3RhbmNlIG9mIGx1bnIuUXVlcnkuXG4gKlxuICogRm9yIHByb2dyYW1tYXRpY2FsbHkgYnVpbGRpbmcgcXVlcmllcyBpdCBpcyBhZHZpc2VkIHRvIGRpcmVjdGx5IHVzZSBsdW5yLlF1ZXJ5LCB0aGUgcXVlcnkgbGFuZ3VhZ2VcbiAqIGlzIGJlc3QgdXNlZCBmb3IgaHVtYW4gZW50ZXJlZCB0ZXh0IHJhdGhlciB0aGFuIHByb2dyYW0gZ2VuZXJhdGVkIHRleHQuXG4gKlxuICogQXQgaXRzIHNpbXBsZXN0IHF1ZXJpZXMgY2FuIGp1c3QgYmUgYSBzaW5nbGUgdGVybSwgZS5nLiBgaGVsbG9gLCBtdWx0aXBsZSB0ZXJtcyBhcmUgYWxzbyBzdXBwb3J0ZWRcbiAqIGFuZCB3aWxsIGJlIGNvbWJpbmVkIHdpdGggT1IsIGUuZyBgaGVsbG8gd29ybGRgIHdpbGwgbWF0Y2ggZG9jdW1lbnRzIHRoYXQgY29udGFpbiBlaXRoZXIgJ2hlbGxvJ1xuICogb3IgJ3dvcmxkJywgdGhvdWdoIHRob3NlIHRoYXQgY29udGFpbiBib3RoIHdpbGwgcmFuayBoaWdoZXIgaW4gdGhlIHJlc3VsdHMuXG4gKlxuICogV2lsZGNhcmRzIGNhbiBiZSBpbmNsdWRlZCBpbiB0ZXJtcyB0byBtYXRjaCBvbmUgb3IgbW9yZSB1bnNwZWNpZmllZCBjaGFyYWN0ZXJzLCB0aGVzZSB3aWxkY2FyZHMgY2FuXG4gKiBiZSBpbnNlcnRlZCBhbnl3aGVyZSB3aXRoaW4gdGhlIHRlcm0sIGFuZCBtb3JlIHRoYW4gb25lIHdpbGRjYXJkIGNhbiBleGlzdCBpbiBhIHNpbmdsZSB0ZXJtLiBBZGRpbmdcbiAqIHdpbGRjYXJkcyB3aWxsIGluY3JlYXNlIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgd2lsbCBiZSBmb3VuZCBidXQgY2FuIGFsc28gaGF2ZSBhIG5lZ2F0aXZlXG4gKiBpbXBhY3Qgb24gcXVlcnkgcGVyZm9ybWFuY2UsIGVzcGVjaWFsbHkgd2l0aCB3aWxkY2FyZHMgYXQgdGhlIGJlZ2lubmluZyBvZiBhIHRlcm0uXG4gKlxuICogVGVybXMgY2FuIGJlIHJlc3RyaWN0ZWQgdG8gc3BlY2lmaWMgZmllbGRzLCBlLmcuIGB0aXRsZTpoZWxsb2AsIG9ubHkgZG9jdW1lbnRzIHdpdGggdGhlIHRlcm1cbiAqIGhlbGxvIGluIHRoZSB0aXRsZSBmaWVsZCB3aWxsIG1hdGNoIHRoaXMgcXVlcnkuIFVzaW5nIGEgZmllbGQgbm90IHByZXNlbnQgaW4gdGhlIGluZGV4IHdpbGwgbGVhZFxuICogdG8gYW4gZXJyb3IgYmVpbmcgdGhyb3duLlxuICpcbiAqIE1vZGlmaWVycyBjYW4gYWxzbyBiZSBhZGRlZCB0byB0ZXJtcywgbHVuciBzdXBwb3J0cyBlZGl0IGRpc3RhbmNlIGFuZCBib29zdCBtb2RpZmllcnMgb24gdGVybXMuIEEgdGVybVxuICogYm9vc3Qgd2lsbCBtYWtlIGRvY3VtZW50cyBtYXRjaGluZyB0aGF0IHRlcm0gc2NvcmUgaGlnaGVyLCBlLmcuIGBmb29eNWAuIEVkaXQgZGlzdGFuY2UgaXMgYWxzbyBzdXBwb3J0ZWRcbiAqIHRvIHByb3ZpZGUgZnV6enkgbWF0Y2hpbmcsIGUuZy4gJ2hlbGxvfjInIHdpbGwgbWF0Y2ggZG9jdW1lbnRzIHdpdGggaGVsbG8gd2l0aCBhbiBlZGl0IGRpc3RhbmNlIG9mIDIuXG4gKiBBdm9pZCBsYXJnZSB2YWx1ZXMgZm9yIGVkaXQgZGlzdGFuY2UgdG8gaW1wcm92ZSBxdWVyeSBwZXJmb3JtYW5jZS5cbiAqXG4gKiBUbyBlc2NhcGUgc3BlY2lhbCBjaGFyYWN0ZXJzIHRoZSBiYWNrc2xhc2ggY2hhcmFjdGVyICdcXCcgY2FuIGJlIHVzZWQsIHRoaXMgYWxsb3dzIHNlYXJjaGVzIHRvIGluY2x1ZGVcbiAqIGNoYXJhY3RlcnMgdGhhdCB3b3VsZCBub3JtYWxseSBiZSBjb25zaWRlcmVkIG1vZGlmaWVycywgZS5nLiBgZm9vXFx+MmAgd2lsbCBzZWFyY2ggZm9yIGEgdGVybSBcImZvb34yXCIgaW5zdGVhZFxuICogb2YgYXR0ZW1wdGluZyB0byBhcHBseSBhIGJvb3N0IG9mIDIgdG8gdGhlIHNlYXJjaCB0ZXJtIFwiZm9vXCIuXG4gKlxuICogQHR5cGVkZWYge3N0cmluZ30gbHVuci5JbmRleH5RdWVyeVN0cmluZ1xuICogQGV4YW1wbGUgPGNhcHRpb24+U2ltcGxlIHNpbmdsZSB0ZXJtIHF1ZXJ5PC9jYXB0aW9uPlxuICogaGVsbG9cbiAqIEBleGFtcGxlIDxjYXB0aW9uPk11bHRpcGxlIHRlcm0gcXVlcnk8L2NhcHRpb24+XG4gKiBoZWxsbyB3b3JsZFxuICogQGV4YW1wbGUgPGNhcHRpb24+dGVybSBzY29wZWQgdG8gYSBmaWVsZDwvY2FwdGlvbj5cbiAqIHRpdGxlOmhlbGxvXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj50ZXJtIHdpdGggYSBib29zdCBvZiAxMDwvY2FwdGlvbj5cbiAqIGhlbGxvXjEwXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj50ZXJtIHdpdGggYW4gZWRpdCBkaXN0YW5jZSBvZiAyPC9jYXB0aW9uPlxuICogaGVsbG9+MlxuICovXG5cbi8qKlxuICogUGVyZm9ybXMgYSBzZWFyY2ggYWdhaW5zdCB0aGUgaW5kZXggdXNpbmcgbHVuciBxdWVyeSBzeW50YXguXG4gKlxuICogUmVzdWx0cyB3aWxsIGJlIHJldHVybmVkIHNvcnRlZCBieSB0aGVpciBzY29yZSwgdGhlIG1vc3QgcmVsZXZhbnQgcmVzdWx0c1xuICogd2lsbCBiZSByZXR1cm5lZCBmaXJzdC5cbiAqXG4gKiBGb3IgbW9yZSBwcm9ncmFtbWF0aWMgcXVlcnlpbmcgdXNlIGx1bnIuSW5kZXgjcXVlcnkuXG4gKlxuICogQHBhcmFtIHtsdW5yLkluZGV4flF1ZXJ5U3RyaW5nfSBxdWVyeVN0cmluZyAtIEEgc3RyaW5nIGNvbnRhaW5pbmcgYSBsdW5yIHF1ZXJ5LlxuICogQHRocm93cyB7bHVuci5RdWVyeVBhcnNlRXJyb3J9IElmIHRoZSBwYXNzZWQgcXVlcnkgc3RyaW5nIGNhbm5vdCBiZSBwYXJzZWQuXG4gKiBAcmV0dXJucyB7bHVuci5JbmRleH5SZXN1bHRbXX1cbiAqL1xubHVuci5JbmRleC5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKHF1ZXJ5U3RyaW5nKSB7XG4gIHJldHVybiB0aGlzLnF1ZXJ5KGZ1bmN0aW9uIChxdWVyeSkge1xuICAgIHZhciBwYXJzZXIgPSBuZXcgbHVuci5RdWVyeVBhcnNlcihxdWVyeVN0cmluZywgcXVlcnkpO1xuICAgIHBhcnNlci5wYXJzZSgpO1xuICB9KTtcbn07XG5cbi8qKlxuICogQSBxdWVyeSBidWlsZGVyIGNhbGxiYWNrIHByb3ZpZGVzIGEgcXVlcnkgb2JqZWN0IHRvIGJlIHVzZWQgdG8gZXhwcmVzc1xuICogdGhlIHF1ZXJ5IHRvIHBlcmZvcm0gb24gdGhlIGluZGV4LlxuICpcbiAqIEBjYWxsYmFjayBsdW5yLkluZGV4fnF1ZXJ5QnVpbGRlclxuICogQHBhcmFtIHtsdW5yLlF1ZXJ5fSBxdWVyeSAtIFRoZSBxdWVyeSBvYmplY3QgdG8gYnVpbGQgdXAuXG4gKiBAdGhpcyBsdW5yLlF1ZXJ5XG4gKi9cblxuLyoqXG4gKiBQZXJmb3JtcyBhIHF1ZXJ5IGFnYWluc3QgdGhlIGluZGV4IHVzaW5nIHRoZSB5aWVsZGVkIGx1bnIuUXVlcnkgb2JqZWN0LlxuICpcbiAqIElmIHBlcmZvcm1pbmcgcHJvZ3JhbW1hdGljIHF1ZXJpZXMgYWdhaW5zdCB0aGUgaW5kZXgsIHRoaXMgbWV0aG9kIGlzIHByZWZlcnJlZFxuICogb3ZlciBsdW5yLkluZGV4I3NlYXJjaCBzbyBhcyB0byBhdm9pZCB0aGUgYWRkaXRpb25hbCBxdWVyeSBwYXJzaW5nIG92ZXJoZWFkLlxuICpcbiAqIEEgcXVlcnkgb2JqZWN0IGlzIHlpZWxkZWQgdG8gdGhlIHN1cHBsaWVkIGZ1bmN0aW9uIHdoaWNoIHNob3VsZCBiZSB1c2VkIHRvXG4gKiBleHByZXNzIHRoZSBxdWVyeSB0byBiZSBydW4gYWdhaW5zdCB0aGUgaW5kZXguXG4gKlxuICogTm90ZSB0aGF0IGFsdGhvdWdoIHRoaXMgZnVuY3Rpb24gdGFrZXMgYSBjYWxsYmFjayBwYXJhbWV0ZXIgaXQgaXMgX25vdF8gYW5cbiAqIGFzeW5jaHJvbm91cyBvcGVyYXRpb24sIHRoZSBjYWxsYmFjayBpcyBqdXN0IHlpZWxkZWQgYSBxdWVyeSBvYmplY3QgdG8gYmVcbiAqIGN1c3RvbWl6ZWQuXG4gKlxuICogQHBhcmFtIHtsdW5yLkluZGV4fnF1ZXJ5QnVpbGRlcn0gZm4gLSBBIGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCB0byBidWlsZCB0aGUgcXVlcnkuXG4gKiBAcmV0dXJucyB7bHVuci5JbmRleH5SZXN1bHRbXX1cbiAqL1xubHVuci5JbmRleC5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAoZm4pIHtcbiAgLy8gZm9yIGVhY2ggcXVlcnkgY2xhdXNlXG4gIC8vICogcHJvY2VzcyB0ZXJtc1xuICAvLyAqIGV4cGFuZCB0ZXJtcyBmcm9tIHRva2VuIHNldFxuICAvLyAqIGZpbmQgbWF0Y2hpbmcgZG9jdW1lbnRzIGFuZCBtZXRhZGF0YVxuICAvLyAqIGdldCBkb2N1bWVudCB2ZWN0b3JzXG4gIC8vICogc2NvcmUgZG9jdW1lbnRzXG5cbiAgdmFyIHF1ZXJ5ID0gbmV3IGx1bnIuUXVlcnkodGhpcy5maWVsZHMpLFxuICAgICAgbWF0Y2hpbmdGaWVsZHMgPSBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgICAgcXVlcnlWZWN0b3JzID0gT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgIHRlcm1GaWVsZENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICBmbi5jYWxsKHF1ZXJ5LCBxdWVyeSk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWVyeS5jbGF1c2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgLypcbiAgICAgKiBVbmxlc3MgdGhlIHBpcGVsaW5lIGhhcyBiZWVuIGRpc2FibGVkIGZvciB0aGlzIHRlcm0sIHdoaWNoIGlzXG4gICAgICogdGhlIGNhc2UgZm9yIHRlcm1zIHdpdGggd2lsZGNhcmRzLCB3ZSBuZWVkIHRvIHBhc3MgdGhlIGNsYXVzZVxuICAgICAqIHRlcm0gdGhyb3VnaCB0aGUgc2VhcmNoIHBpcGVsaW5lLiBBIHBpcGVsaW5lIHJldHVybnMgYW4gYXJyYXlcbiAgICAgKiBvZiBwcm9jZXNzZWQgdGVybXMuIFBpcGVsaW5lIGZ1bmN0aW9ucyBtYXkgZXhwYW5kIHRoZSBwYXNzZWRcbiAgICAgKiB0ZXJtLCB3aGljaCBtZWFucyB3ZSBtYXkgZW5kIHVwIHBlcmZvcm1pbmcgbXVsdGlwbGUgaW5kZXggbG9va3Vwc1xuICAgICAqIGZvciBhIHNpbmdsZSBxdWVyeSB0ZXJtLlxuICAgICAqL1xuICAgIHZhciBjbGF1c2UgPSBxdWVyeS5jbGF1c2VzW2ldLFxuICAgICAgICB0ZXJtcyA9IG51bGw7XG5cbiAgICBpZiAoY2xhdXNlLnVzZVBpcGVsaW5lKSB7XG4gICAgICB0ZXJtcyA9IHRoaXMucGlwZWxpbmUucnVuU3RyaW5nKGNsYXVzZS50ZXJtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGVybXMgPSBbY2xhdXNlLnRlcm1dO1xuICAgIH1cblxuICAgIGZvciAodmFyIG0gPSAwOyBtIDwgdGVybXMubGVuZ3RoOyBtKyspIHtcbiAgICAgIHZhciB0ZXJtID0gdGVybXNbbV07XG5cbiAgICAgIC8qXG4gICAgICAgKiBFYWNoIHRlcm0gcmV0dXJuZWQgZnJvbSB0aGUgcGlwZWxpbmUgbmVlZHMgdG8gdXNlIHRoZSBzYW1lIHF1ZXJ5XG4gICAgICAgKiBjbGF1c2Ugb2JqZWN0LCBlLmcuIHRoZSBzYW1lIGJvb3N0IGFuZCBvciBlZGl0IGRpc3RhbmNlLiBUaGVcbiAgICAgICAqIHNpbXBsZXN0IHdheSB0byBkbyB0aGlzIGlzIHRvIHJlLXVzZSB0aGUgY2xhdXNlIG9iamVjdCBidXQgbXV0YXRlXG4gICAgICAgKiBpdHMgdGVybSBwcm9wZXJ0eS5cbiAgICAgICAqL1xuXG4gICAgICBjbGF1c2UgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNsYXVzZSkpO1xuICAgICAgY2xhdXNlLnRlcm0gPSB0ZXJtO1xuXG4gICAgICAvKlxuICAgICAgICogRnJvbSB0aGUgdGVybSBpbiB0aGUgY2xhdXNlIHdlIGNyZWF0ZSBhIHRva2VuIHNldCB3aGljaCB3aWxsIHRoZW5cbiAgICAgICAqIGJlIHVzZWQgdG8gaW50ZXJzZWN0IHRoZSBpbmRleGVzIHRva2VuIHNldCB0byBnZXQgYSBsaXN0IG9mIHRlcm1zXG4gICAgICAgKiB0byBsb29rdXAgaW4gdGhlIGludmVydGVkIGluZGV4XG4gICAgICAgKi9cbiAgICAgIHZhciB0ZXJtVG9rZW5TZXQgPSBsdW5yLlRva2VuU2V0LmZyb21DbGF1c2UoY2xhdXNlKSxcbiAgICAgICAgICBleHBhbmRlZFRlcm1zID0gdGhpcy50b2tlblNldC5pbnRlcnNlY3QodGVybVRva2VuU2V0KS50b0FycmF5KCk7XG5cbiAgICAgIHZhciB0ZXJtSW5kZXg7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGV4cGFuZGVkVGVybXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgLypcbiAgICAgICAgICogRm9yIGVhY2ggdGVybSBnZXQgdGhlIHBvc3RpbmcgYW5kIHRlcm1JbmRleCwgdGhpcyBpcyByZXF1aXJlZCBmb3JcbiAgICAgICAgICogYnVpbGRpbmcgdGhlIHF1ZXJ5IHZlY3Rvci5cbiAgICAgICAgICovXG4gICAgICAgICAgdmFyIGV4cGFuZGVkVGVybSA9IGV4cGFuZGVkVGVybXNbal07XG4gICAgICAgICAgdmFyIHBvc3RpbmcgPSB0aGlzLmludmVydGVkSW5kZXhbZXhwYW5kZWRUZXJtXTtcbiAgICAgICAgICBpZiAocG9zdGluZykge1xuICAgICAgICAgICAgICB0ZXJtSW5kZXggPSBwb3N0aW5nLl9pbmRleDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgY2xhdXNlLmZpZWxkcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgIC8qXG4gICAgICAgICAgICogRm9yIGVhY2ggZmllbGQgdGhhdCB0aGlzIHF1ZXJ5IHRlcm0gaXMgc2NvcGVkIGJ5IChieSBkZWZhdWx0XG4gICAgICAgICAgICogYWxsIGZpZWxkcyBhcmUgaW4gc2NvcGUpIHdlIG5lZWQgdG8gZ2V0IGFsbCB0aGUgZG9jdW1lbnQgcmVmc1xuICAgICAgICAgICAqIHRoYXQgaGF2ZSB0aGlzIHRlcm0gaW4gdGhhdCBmaWVsZC5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIFRoZSBwb3N0aW5nIGlzIHRoZSBlbnRyeSBpbiB0aGUgaW52ZXJ0ZWRJbmRleCBmb3IgdGhlIG1hdGNoaW5nXG4gICAgICAgICAgICogdGVybSBmcm9tIGFib3ZlLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIHZhciBmaWVsZCA9IGNsYXVzZS5maWVsZHNba10sXG4gICAgICAgICAgICAgIGZpZWxkUG9zdGluZyA9IHBvc3RpbmdbZmllbGRdLFxuICAgICAgICAgICAgICBtYXRjaGluZ0RvY3VtZW50UmVmcyA9IE9iamVjdC5rZXlzKGZpZWxkUG9zdGluZyksXG4gICAgICAgICAgICAgIHRlcm1GaWVsZCA9IGV4cGFuZGVkVGVybSArIFwiL1wiICsgZmllbGQ7XG5cbiAgICAgICAgICAvKlxuICAgICAgICAgICAqIFRvIHN1cHBvcnQgZmllbGQgbGV2ZWwgYm9vc3RzIGEgcXVlcnkgdmVjdG9yIGlzIGNyZWF0ZWQgcGVyXG4gICAgICAgICAgICogZmllbGQuIFRoaXMgdmVjdG9yIGlzIHBvcHVsYXRlZCB1c2luZyB0aGUgdGVybUluZGV4IGZvdW5kIGZvclxuICAgICAgICAgICAqIHRoZSB0ZXJtIGFuZCBhIHVuaXQgdmFsdWUgd2l0aCB0aGUgYXBwcm9wcmlhdGUgYm9vc3QgYXBwbGllZC5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIElmIHRoZSBxdWVyeSB2ZWN0b3IgZm9yIHRoaXMgZmllbGQgZG9lcyBub3QgZXhpc3QgeWV0IGl0IG5lZWRzXG4gICAgICAgICAgICogdG8gYmUgY3JlYXRlZC5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpZiAocXVlcnlWZWN0b3JzW2ZpZWxkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBxdWVyeVZlY3RvcnNbZmllbGRdID0gbmV3IGx1bnIuVmVjdG9yKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLypcbiAgICAgICAgICAgKiBVc2luZyB1cHNlcnQgYmVjYXVzZSB0aGVyZSBjb3VsZCBhbHJlYWR5IGJlIGFuIGVudHJ5IGluIHRoZSB2ZWN0b3JcbiAgICAgICAgICAgKiBmb3IgdGhlIHRlcm0gd2UgYXJlIHdvcmtpbmcgd2l0aC4gSW4gdGhhdCBjYXNlIHdlIGp1c3QgYWRkIHRoZSBzY29yZXNcbiAgICAgICAgICAgKiB0b2dldGhlci5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBxdWVyeVZlY3RvcnNbZmllbGRdLnVwc2VydCh0ZXJtSW5kZXgsIDEgKiBjbGF1c2UuYm9vc3QsIGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhICsgYjsgfSk7XG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBJZiB3ZSd2ZSBhbHJlYWR5IHNlZW4gdGhpcyB0ZXJtLCBmaWVsZCBjb21ibyB0aGVuIHdlJ3ZlIGFscmVhZHkgY29sbGVjdGVkXG4gICAgICAgICAgICogdGhlIG1hdGNoaW5nIGRvY3VtZW50cyBhbmQgbWV0YWRhdGEsIG5vIG5lZWQgdG8gZ28gdGhyb3VnaCBhbGwgdGhhdCBhZ2FpblxuICAgICAgICAgICAqL1xuICAgICAgICAgIGlmICh0ZXJtRmllbGRDYWNoZVt0ZXJtRmllbGRdKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IG1hdGNoaW5nRG9jdW1lbnRSZWZzLmxlbmd0aDsgbCsrKSB7XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICogQWxsIG1ldGFkYXRhIGZvciB0aGlzIHRlcm0vZmllbGQvZG9jdW1lbnQgdHJpcGxlXG4gICAgICAgICAgICAgKiBhcmUgdGhlbiBleHRyYWN0ZWQgYW5kIGNvbGxlY3RlZCBpbnRvIGFuIGluc3RhbmNlXG4gICAgICAgICAgICAgKiBvZiBsdW5yLk1hdGNoRGF0YSByZWFkeSB0byBiZSByZXR1cm5lZCBpbiB0aGUgcXVlcnlcbiAgICAgICAgICAgICAqIHJlc3VsdHNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmFyIG1hdGNoaW5nRG9jdW1lbnRSZWYgPSBtYXRjaGluZ0RvY3VtZW50UmVmc1tsXSxcbiAgICAgICAgICAgICAgICBtYXRjaGluZ0ZpZWxkUmVmID0gbmV3IGx1bnIuRmllbGRSZWYgKG1hdGNoaW5nRG9jdW1lbnRSZWYsIGZpZWxkKSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YSA9IGZpZWxkUG9zdGluZ1ttYXRjaGluZ0RvY3VtZW50UmVmXSxcbiAgICAgICAgICAgICAgICBmaWVsZE1hdGNoO1xuXG4gICAgICAgICAgICBpZiAoKGZpZWxkTWF0Y2ggPSBtYXRjaGluZ0ZpZWxkc1ttYXRjaGluZ0ZpZWxkUmVmXSkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBtYXRjaGluZ0ZpZWxkc1ttYXRjaGluZ0ZpZWxkUmVmXSA9IG5ldyBsdW5yLk1hdGNoRGF0YSAoZXhwYW5kZWRUZXJtLCBmaWVsZCwgbWV0YWRhdGEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZmllbGRNYXRjaC5hZGQoZXhwYW5kZWRUZXJtLCBmaWVsZCwgbWV0YWRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGVybUZpZWxkQ2FjaGVbdGVybUZpZWxkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgbWF0Y2hpbmdGaWVsZFJlZnMgPSBPYmplY3Qua2V5cyhtYXRjaGluZ0ZpZWxkcyksXG4gICAgICByZXN1bHRzID0gW10sXG4gICAgICBtYXRjaGVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICBmb3IgKCBpID0gMDsgaSA8IG1hdGNoaW5nRmllbGRSZWZzLmxlbmd0aDsgaSsrKSB7XG4gICAgLypcbiAgICAgKiBDdXJyZW50bHkgd2UgaGF2ZSBkb2N1bWVudCBmaWVsZHMgdGhhdCBtYXRjaCB0aGUgcXVlcnksIGJ1dCB3ZVxuICAgICAqIG5lZWQgdG8gcmV0dXJuIGRvY3VtZW50cy4gVGhlIG1hdGNoRGF0YSBhbmQgc2NvcmVzIGFyZSBjb21iaW5lZFxuICAgICAqIGZyb20gbXVsdGlwbGUgZmllbGRzIGJlbG9uZ2luZyB0byB0aGUgc2FtZSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIFNjb3JlcyBhcmUgY2FsY3VsYXRlZCBieSBmaWVsZCwgdXNpbmcgdGhlIHF1ZXJ5IHZlY3RvcnMgY3JlYXRlZFxuICAgICAqIGFib3ZlLCBhbmQgY29tYmluZWQgaW50byBhIGZpbmFsIGRvY3VtZW50IHNjb3JlIHVzaW5nIGFkZGl0aW9uLlxuICAgICAqL1xuICAgIHZhciBmaWVsZFJlZiA9IGx1bnIuRmllbGRSZWYuZnJvbVN0cmluZyhtYXRjaGluZ0ZpZWxkUmVmc1tpXSksXG4gICAgICAgIGRvY1JlZiA9IGZpZWxkUmVmLmRvY1JlZixcbiAgICAgICAgZmllbGRWZWN0b3IgPSB0aGlzLmZpZWxkVmVjdG9yc1tmaWVsZFJlZl0sXG4gICAgICAgIHNjb3JlID0gcXVlcnlWZWN0b3JzW2ZpZWxkUmVmLmZpZWxkTmFtZV0uc2ltaWxhcml0eShmaWVsZFZlY3RvciksXG4gICAgICAgIGRvY01hdGNoO1xuXG4gICAgaWYgKChkb2NNYXRjaCA9IG1hdGNoZXNbZG9jUmVmXSkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZG9jTWF0Y2guc2NvcmUgKz0gc2NvcmU7XG4gICAgICBkb2NNYXRjaC5tYXRjaERhdGEuY29tYmluZShtYXRjaGluZ0ZpZWxkc1tmaWVsZFJlZl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbWF0Y2ggPSB7XG4gICAgICAgIHJlZjogZG9jUmVmLFxuICAgICAgICBzY29yZTogc2NvcmUsXG4gICAgICAgIG1hdGNoRGF0YTogbWF0Y2hpbmdGaWVsZHNbZmllbGRSZWZdXG4gICAgICB9O1xuICAgICAgbWF0Y2hlc1tkb2NSZWZdID0gbWF0Y2g7XG4gICAgICByZXN1bHRzLnB1c2gobWF0Y2gpO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqIFNvcnQgdGhlIHJlc3VsdHMgb2JqZWN0cyBieSBzY29yZSwgaGlnaGVzdCBmaXJzdC5cbiAgICovXG4gIHJldHVybiByZXN1bHRzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYi5zY29yZSAtIGEuc2NvcmU7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBQcmVwYXJlcyB0aGUgaW5kZXggZm9yIEpTT04gc2VyaWFsaXphdGlvbi5cbiAqXG4gKiBUaGUgc2NoZW1hIGZvciB0aGlzIEpTT04gYmxvYiB3aWxsIGJlIGRlc2NyaWJlZCBpbiBhXG4gKiBzZXBhcmF0ZSBKU09OIHNjaGVtYSBmaWxlLlxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmx1bnIuSW5kZXgucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGludmVydGVkSW5kZXggPSBPYmplY3Qua2V5cyh0aGlzLmludmVydGVkSW5kZXgpXG4gICAgLnNvcnQoKVxuICAgIC5tYXAoZnVuY3Rpb24gKHRlcm0pIHtcbiAgICAgIHJldHVybiBbdGVybSwgdGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dXTtcbiAgICB9LCB0aGlzKTtcblxuICB2YXIgZmllbGRWZWN0b3JzID0gT2JqZWN0LmtleXModGhpcy5maWVsZFZlY3RvcnMpXG4gICAgLm1hcChmdW5jdGlvbiAocmVmKSB7XG4gICAgICByZXR1cm4gW3JlZiwgdGhpcy5maWVsZFZlY3RvcnNbcmVmXS50b0pTT04oKV07XG4gICAgfSwgdGhpcyk7XG5cbiAgcmV0dXJuIHtcbiAgICB2ZXJzaW9uOiBsdW5yLnZlcnNpb24sXG4gICAgZmllbGRzOiB0aGlzLmZpZWxkcyxcbiAgICBmaWVsZFZlY3RvcnM6IGZpZWxkVmVjdG9ycyxcbiAgICBpbnZlcnRlZEluZGV4OiBpbnZlcnRlZEluZGV4LFxuICAgIHBpcGVsaW5lOiB0aGlzLnBpcGVsaW5lLnRvSlNPTigpXG4gIH07XG59O1xuXG4vKipcbiAqIExvYWRzIGEgcHJldmlvdXNseSBzZXJpYWxpemVkIGx1bnIuSW5kZXhcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc2VyaWFsaXplZEluZGV4IC0gQSBwcmV2aW91c2x5IHNlcmlhbGl6ZWQgbHVuci5JbmRleFxuICogQHJldHVybnMge2x1bnIuSW5kZXh9XG4gKi9cbmx1bnIuSW5kZXgubG9hZCA9IGZ1bmN0aW9uIChzZXJpYWxpemVkSW5kZXgpIHtcbiAgdmFyIGF0dHJzID0ge30sXG4gICAgICBmaWVsZFZlY3RvcnMgPSB7fSxcbiAgICAgIHNlcmlhbGl6ZWRWZWN0b3JzID0gc2VyaWFsaXplZEluZGV4LmZpZWxkVmVjdG9ycyxcbiAgICAgIGludmVydGVkSW5kZXggPSB7fSxcbiAgICAgIHNlcmlhbGl6ZWRJbnZlcnRlZEluZGV4ID0gc2VyaWFsaXplZEluZGV4LmludmVydGVkSW5kZXgsXG4gICAgICB0b2tlblNldEJ1aWxkZXIgPSBuZXcgbHVuci5Ub2tlblNldC5CdWlsZGVyKCksXG4gICAgICBwaXBlbGluZSA9IGx1bnIuUGlwZWxpbmUubG9hZChzZXJpYWxpemVkSW5kZXgucGlwZWxpbmUpO1xuXG4gIGlmIChzZXJpYWxpemVkSW5kZXgudmVyc2lvbiAhPSBsdW5yLnZlcnNpb24pIHtcbiAgICBsdW5yLnV0aWxzLndhcm4oXCJWZXJzaW9uIG1pc21hdGNoIHdoZW4gbG9hZGluZyBzZXJpYWxpc2VkIGluZGV4LiBDdXJyZW50IHZlcnNpb24gb2YgbHVuciAnXCIgKyBsdW5yLnZlcnNpb24gKyBcIicgZG9lcyBub3QgbWF0Y2ggc2VyaWFsaXplZCBpbmRleCAnXCIgKyBzZXJpYWxpemVkSW5kZXgudmVyc2lvbiArIFwiJ1wiKTtcbiAgfVxuXG4gIHZhciB0dXBsZTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXJpYWxpemVkVmVjdG9ycy5sZW5ndGg7IGkrKykge1xuICAgIHR1cGxlID0gc2VyaWFsaXplZFZlY3RvcnNbaV07XG4gICAgcmVmID0gdHVwbGVbMF07XG4gICAgZWxlbWVudHMgPSB0dXBsZVsxXTtcblxuICAgIGZpZWxkVmVjdG9yc1tyZWZdID0gbmV3IGx1bnIuVmVjdG9yKGVsZW1lbnRzKTtcbiAgfVxuXG4gIGZvciAoaSA9IDA7IGkgPCBzZXJpYWxpemVkSW52ZXJ0ZWRJbmRleC5sZW5ndGg7IGkrKykge1xuICAgIHR1cGxlID0gc2VyaWFsaXplZEludmVydGVkSW5kZXhbaV07XG4gICAgdGVybSA9IHR1cGxlWzBdO1xuICAgIHBvc3RpbmcgPSB0dXBsZVsxXTtcblxuICAgIHRva2VuU2V0QnVpbGRlci5pbnNlcnQodGVybSk7XG4gICAgaW52ZXJ0ZWRJbmRleFt0ZXJtXSA9IHBvc3Rpbmc7XG4gIH1cblxuICB0b2tlblNldEJ1aWxkZXIuZmluaXNoKCk7XG5cbiAgYXR0cnMuZmllbGRzID0gc2VyaWFsaXplZEluZGV4LmZpZWxkcztcblxuICBhdHRycy5maWVsZFZlY3RvcnMgPSBmaWVsZFZlY3RvcnM7XG4gIGF0dHJzLmludmVydGVkSW5kZXggPSBpbnZlcnRlZEluZGV4O1xuICBhdHRycy50b2tlblNldCA9IHRva2VuU2V0QnVpbGRlci5yb290O1xuICBhdHRycy5waXBlbGluZSA9IHBpcGVsaW5lO1xuXG4gIHJldHVybiBuZXcgbHVuci5JbmRleChhdHRycyk7XG59O1xuLyohXG4gKiBsdW5yLkJ1aWxkZXJcbiAqIENvcHlyaWdodCAoQykgMjAxNyBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIGx1bnIuQnVpbGRlciBwZXJmb3JtcyBpbmRleGluZyBvbiBhIHNldCBvZiBkb2N1bWVudHMgYW5kXG4gKiByZXR1cm5zIGluc3RhbmNlcyBvZiBsdW5yLkluZGV4IHJlYWR5IGZvciBxdWVyeWluZy5cbiAqXG4gKiBBbGwgY29uZmlndXJhdGlvbiBvZiB0aGUgaW5kZXggaXMgZG9uZSB2aWEgdGhlIGJ1aWxkZXIsIHRoZVxuICogZmllbGRzIHRvIGluZGV4LCB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlLCB0aGUgdGV4dCBwcm9jZXNzaW5nXG4gKiBwaXBlbGluZSBhbmQgZG9jdW1lbnQgc2NvcmluZyBwYXJhbWV0ZXJzIGFyZSBhbGwgc2V0IG9uIHRoZVxuICogYnVpbGRlciBiZWZvcmUgaW5kZXhpbmcuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHJvcGVydHkge3N0cmluZ30gX3JlZiAtIEludGVybmFsIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlIGZpZWxkLlxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gX2ZpZWxkcyAtIEludGVybmFsIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgZmllbGRzIHRvIGluZGV4LlxuICogQHByb3BlcnR5IHtvYmplY3R9IGludmVydGVkSW5kZXggLSBUaGUgaW52ZXJ0ZWQgaW5kZXggbWFwcyB0ZXJtcyB0byBkb2N1bWVudCBmaWVsZHMuXG4gKiBAcHJvcGVydHkge29iamVjdH0gZG9jdW1lbnRUZXJtRnJlcXVlbmNpZXMgLSBLZWVwcyB0cmFjayBvZiBkb2N1bWVudCB0ZXJtIGZyZXF1ZW5jaWVzLlxuICogQHByb3BlcnR5IHtvYmplY3R9IGRvY3VtZW50TGVuZ3RocyAtIEtlZXBzIHRyYWNrIG9mIHRoZSBsZW5ndGggb2YgZG9jdW1lbnRzIGFkZGVkIHRvIHRoZSBpbmRleC5cbiAqIEBwcm9wZXJ0eSB7bHVuci50b2tlbml6ZXJ9IHRva2VuaXplciAtIEZ1bmN0aW9uIGZvciBzcGxpdHRpbmcgc3RyaW5ncyBpbnRvIHRva2VucyBmb3IgaW5kZXhpbmcuXG4gKiBAcHJvcGVydHkge2x1bnIuUGlwZWxpbmV9IHBpcGVsaW5lIC0gVGhlIHBpcGVsaW5lIHBlcmZvcm1zIHRleHQgcHJvY2Vzc2luZyBvbiB0b2tlbnMgYmVmb3JlIGluZGV4aW5nLlxuICogQHByb3BlcnR5IHtsdW5yLlBpcGVsaW5lfSBzZWFyY2hQaXBlbGluZSAtIEEgcGlwZWxpbmUgZm9yIHByb2Nlc3Npbmcgc2VhcmNoIHRlcm1zIGJlZm9yZSBxdWVyeWluZyB0aGUgaW5kZXguXG4gKiBAcHJvcGVydHkge251bWJlcn0gZG9jdW1lbnRDb3VudCAtIEtlZXBzIHRyYWNrIG9mIHRoZSB0b3RhbCBudW1iZXIgb2YgZG9jdW1lbnRzIGluZGV4ZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gX2IgLSBBIHBhcmFtZXRlciB0byBjb250cm9sIGZpZWxkIGxlbmd0aCBub3JtYWxpemF0aW9uLCBzZXR0aW5nIHRoaXMgdG8gMCBkaXNhYmxlZCBub3JtYWxpemF0aW9uLCAxIGZ1bGx5IG5vcm1hbGl6ZXMgZmllbGQgbGVuZ3RocywgdGhlIGRlZmF1bHQgdmFsdWUgaXMgMC43NS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBfazEgLSBBIHBhcmFtZXRlciB0byBjb250cm9sIGhvdyBxdWlja2x5IGFuIGluY3JlYXNlIGluIHRlcm0gZnJlcXVlbmN5IHJlc3VsdHMgaW4gdGVybSBmcmVxdWVuY3kgc2F0dXJhdGlvbiwgdGhlIGRlZmF1bHQgdmFsdWUgaXMgMS4yLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHRlcm1JbmRleCAtIEEgY291bnRlciBpbmNyZW1lbnRlZCBmb3IgZWFjaCB1bmlxdWUgdGVybSwgdXNlZCB0byBpZGVudGlmeSBhIHRlcm1zIHBvc2l0aW9uIGluIHRoZSB2ZWN0b3Igc3BhY2UuXG4gKiBAcHJvcGVydHkge2FycmF5fSBtZXRhZGF0YVdoaXRlbGlzdCAtIEEgbGlzdCBvZiBtZXRhZGF0YSBrZXlzIHRoYXQgaGF2ZSBiZWVuIHdoaXRlbGlzdGVkIGZvciBlbnRyeSBpbiB0aGUgaW5kZXguXG4gKi9cbmx1bnIuQnVpbGRlciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fcmVmID0gXCJpZFwiO1xuICB0aGlzLl9maWVsZHMgPSBbXTtcbiAgdGhpcy5pbnZlcnRlZEluZGV4ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdGhpcy5maWVsZFRlcm1GcmVxdWVuY2llcyA9IHt9O1xuICB0aGlzLmZpZWxkTGVuZ3RocyA9IHt9O1xuICB0aGlzLnRva2VuaXplciA9IGx1bnIudG9rZW5pemVyO1xuICB0aGlzLnBpcGVsaW5lID0gbmV3IGx1bnIuUGlwZWxpbmUoKTtcbiAgdGhpcy5zZWFyY2hQaXBlbGluZSA9IG5ldyBsdW5yLlBpcGVsaW5lKCk7XG4gIHRoaXMuZG9jdW1lbnRDb3VudCA9IDA7XG4gIHRoaXMuX2IgPSAwLjc1O1xuICB0aGlzLl9rMSA9IDEuMjtcbiAgdGhpcy50ZXJtSW5kZXggPSAwO1xuICB0aGlzLm1ldGFkYXRhV2hpdGVsaXN0ID0gW107XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIGRvY3VtZW50IGZpZWxkIHVzZWQgYXMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZS4gRXZlcnkgZG9jdW1lbnQgbXVzdCBoYXZlIHRoaXMgZmllbGQuXG4gKiBUaGUgdHlwZSBvZiB0aGlzIGZpZWxkIGluIHRoZSBkb2N1bWVudCBzaG91bGQgYmUgYSBzdHJpbmcsIGlmIGl0IGlzIG5vdCBhIHN0cmluZyBpdCB3aWxsIGJlXG4gKiBjb2VyY2VkIGludG8gYSBzdHJpbmcgYnkgY2FsbGluZyB0b1N0cmluZy5cbiAqXG4gKiBUaGUgZGVmYXVsdCByZWYgaXMgJ2lkJy5cbiAqXG4gKiBUaGUgcmVmIHNob3VsZCBfbm90XyBiZSBjaGFuZ2VkIGR1cmluZyBpbmRleGluZywgaXQgc2hvdWxkIGJlIHNldCBiZWZvcmUgYW55IGRvY3VtZW50cyBhcmVcbiAqIGFkZGVkIHRvIHRoZSBpbmRleC4gQ2hhbmdpbmcgaXQgZHVyaW5nIGluZGV4aW5nIGNhbiBsZWFkIHRvIGluY29uc2lzdGVudCByZXN1bHRzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWYgLSBUaGUgbmFtZSBvZiB0aGUgcmVmZXJlbmNlIGZpZWxkIGluIHRoZSBkb2N1bWVudC5cbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbiAocmVmKSB7XG4gIHRoaXMuX3JlZiA9IHJlZjtcbn07XG5cbi8qKlxuICogQWRkcyBhIGZpZWxkIHRvIHRoZSBsaXN0IG9mIGRvY3VtZW50IGZpZWxkcyB0aGF0IHdpbGwgYmUgaW5kZXhlZC4gRXZlcnkgZG9jdW1lbnQgYmVpbmdcbiAqIGluZGV4ZWQgc2hvdWxkIGhhdmUgdGhpcyBmaWVsZC4gTnVsbCB2YWx1ZXMgZm9yIHRoaXMgZmllbGQgaW4gaW5kZXhlZCBkb2N1bWVudHMgd2lsbFxuICogbm90IGNhdXNlIGVycm9ycyBidXQgd2lsbCBsaW1pdCB0aGUgY2hhbmNlIG9mIHRoYXQgZG9jdW1lbnQgYmVpbmcgcmV0cmlldmVkIGJ5IHNlYXJjaGVzLlxuICpcbiAqIEFsbCBmaWVsZHMgc2hvdWxkIGJlIGFkZGVkIGJlZm9yZSBhZGRpbmcgZG9jdW1lbnRzIHRvIHRoZSBpbmRleC4gQWRkaW5nIGZpZWxkcyBhZnRlclxuICogYSBkb2N1bWVudCBoYXMgYmVlbiBpbmRleGVkIHdpbGwgaGF2ZSBubyBlZmZlY3Qgb24gYWxyZWFkeSBpbmRleGVkIGRvY3VtZW50cy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZmllbGQgLSBUaGUgbmFtZSBvZiBhIGZpZWxkIHRvIGluZGV4IGluIGFsbCBkb2N1bWVudHMuXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuZmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgdGhpcy5fZmllbGRzLnB1c2goZmllbGQpO1xufTtcblxuLyoqXG4gKiBBIHBhcmFtZXRlciB0byB0dW5lIHRoZSBhbW91bnQgb2YgZmllbGQgbGVuZ3RoIG5vcm1hbGlzYXRpb24gdGhhdCBpcyBhcHBsaWVkIHdoZW5cbiAqIGNhbGN1bGF0aW5nIHJlbGV2YW5jZSBzY29yZXMuIEEgdmFsdWUgb2YgMCB3aWxsIGNvbXBsZXRlbHkgZGlzYWJsZSBhbnkgbm9ybWFsaXNhdGlvblxuICogYW5kIGEgdmFsdWUgb2YgMSB3aWxsIGZ1bGx5IG5vcm1hbGlzZSBmaWVsZCBsZW5ndGhzLiBUaGUgZGVmYXVsdCBpcyAwLjc1LiBWYWx1ZXMgb2YgYlxuICogd2lsbCBiZSBjbGFtcGVkIHRvIHRoZSByYW5nZSAwIC0gMS5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyIC0gVGhlIHZhbHVlIHRvIHNldCBmb3IgdGhpcyB0dW5pbmcgcGFyYW1ldGVyLlxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLmIgPSBmdW5jdGlvbiAobnVtYmVyKSB7XG4gIGlmIChudW1iZXIgPCAwKSB7XG4gICAgdGhpcy5fYiA9IDA7XG4gIH0gZWxzZSBpZiAobnVtYmVyID4gMSkge1xuICAgIHRoaXMuX2IgPSAxO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX2IgPSBudW1iZXI7XG4gIH1cbn07XG5cbi8qKlxuICogQSBwYXJhbWV0ZXIgdGhhdCBjb250cm9scyB0aGUgc3BlZWQgYXQgd2hpY2ggYSByaXNlIGluIHRlcm0gZnJlcXVlbmN5IHJlc3VsdHMgaW4gdGVybVxuICogZnJlcXVlbmN5IHNhdHVyYXRpb24uIFRoZSBkZWZhdWx0IHZhbHVlIGlzIDEuMi4gU2V0dGluZyB0aGlzIHRvIGEgaGlnaGVyIHZhbHVlIHdpbGwgZ2l2ZVxuICogc2xvd2VyIHNhdHVyYXRpb24gbGV2ZWxzLCBhIGxvd2VyIHZhbHVlIHdpbGwgcmVzdWx0IGluIHF1aWNrZXIgc2F0dXJhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyIC0gVGhlIHZhbHVlIHRvIHNldCBmb3IgdGhpcyB0dW5pbmcgcGFyYW1ldGVyLlxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLmsxID0gZnVuY3Rpb24gKG51bWJlcikge1xuICB0aGlzLl9rMSA9IG51bWJlcjtcbn07XG5cbi8qKlxuICogQWRkcyBhIGRvY3VtZW50IHRvIHRoZSBpbmRleC5cbiAqXG4gKiBCZWZvcmUgYWRkaW5nIGZpZWxkcyB0byB0aGUgaW5kZXggdGhlIGluZGV4IHNob3VsZCBoYXZlIGJlZW4gZnVsbHkgc2V0dXAsIHdpdGggdGhlIGRvY3VtZW50XG4gKiByZWYgYW5kIGFsbCBmaWVsZHMgdG8gaW5kZXggYWxyZWFkeSBoYXZpbmcgYmVlbiBzcGVjaWZpZWQuXG4gKlxuICogVGhlIGRvY3VtZW50IG11c3QgaGF2ZSBhIGZpZWxkIG5hbWUgYXMgc3BlY2lmaWVkIGJ5IHRoZSByZWYgKGJ5IGRlZmF1bHQgdGhpcyBpcyAnaWQnKSBhbmRcbiAqIGl0IHNob3VsZCBoYXZlIGFsbCBmaWVsZHMgZGVmaW5lZCBmb3IgaW5kZXhpbmcsIHRob3VnaCBudWxsIG9yIHVuZGVmaW5lZCB2YWx1ZXMgd2lsbCBub3RcbiAqIGNhdXNlIGVycm9ycy5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gZG9jIC0gVGhlIGRvY3VtZW50IHRvIGFkZCB0byB0aGUgaW5kZXguXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGRvYykge1xuICB2YXIgZG9jUmVmID0gZG9jW3RoaXMuX3JlZl07XG5cbiAgdGhpcy5kb2N1bWVudENvdW50ICs9IDE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9maWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZmllbGROYW1lID0gdGhpcy5fZmllbGRzW2ldLFxuICAgICAgICBmaWVsZCA9IGRvY1tmaWVsZE5hbWVdLFxuICAgICAgICB0b2tlbnMgPSB0aGlzLnRva2VuaXplcihmaWVsZCksXG4gICAgICAgIHRlcm1zID0gdGhpcy5waXBlbGluZS5ydW4odG9rZW5zKSxcbiAgICAgICAgZmllbGRSZWYgPSBuZXcgbHVuci5GaWVsZFJlZiAoZG9jUmVmLCBmaWVsZE5hbWUpLFxuICAgICAgICBmaWVsZFRlcm1zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIHRoaXMuZmllbGRUZXJtRnJlcXVlbmNpZXNbZmllbGRSZWZdID0gZmllbGRUZXJtcztcbiAgICB0aGlzLmZpZWxkTGVuZ3Roc1tmaWVsZFJlZl0gPSAwO1xuXG4gICAgLy8gc3RvcmUgdGhlIGxlbmd0aCBvZiB0aGlzIGZpZWxkIGZvciB0aGlzIGRvY3VtZW50XG4gICAgdGhpcy5maWVsZExlbmd0aHNbZmllbGRSZWZdICs9IHRlcm1zLmxlbmd0aDtcblxuICAgIC8vIGNhbGN1bGF0ZSB0ZXJtIGZyZXF1ZW5jaWVzIGZvciB0aGlzIGZpZWxkXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCB0ZXJtcy5sZW5ndGg7IGorKykge1xuICAgICAgdmFyIHRlcm0gPSB0ZXJtc1tqXTtcblxuICAgICAgaWYgKGZpZWxkVGVybXNbdGVybV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmaWVsZFRlcm1zW3Rlcm1dID0gMDtcbiAgICAgIH1cblxuICAgICAgZmllbGRUZXJtc1t0ZXJtXSArPSAxO1xuXG4gICAgICAvLyBhZGQgdG8gaW52ZXJ0ZWQgaW5kZXhcbiAgICAgIC8vIGNyZWF0ZSBhbiBpbml0aWFsIHBvc3RpbmcgaWYgb25lIGRvZXNuJ3QgZXhpc3RcbiAgICAgIGlmICh0aGlzLmludmVydGVkSW5kZXhbdGVybV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgcG9zdGluZyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHBvc3RpbmcuX2luZGV4ID0gdGhpcy50ZXJtSW5kZXg7XG4gICAgICAgIHRoaXMudGVybUluZGV4ICs9IDE7XG5cbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0aGlzLl9maWVsZHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICBwb3N0aW5nW3RoaXMuX2ZpZWxkc1trXV0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dID0gcG9zdGluZztcbiAgICAgIH1cblxuICAgICAgLy8gYWRkIGFuIGVudHJ5IGZvciB0aGlzIHRlcm0vZmllbGROYW1lL2RvY1JlZiB0byB0aGUgaW52ZXJ0ZWRJbmRleFxuICAgICAgaWYgKHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXVtmaWVsZE5hbWVdW2RvY1JlZl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmludmVydGVkSW5kZXhbdGVybV1bZmllbGROYW1lXVtkb2NSZWZdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgIH1cblxuICAgICAgLy8gc3RvcmUgYWxsIHdoaXRlbGlzdGVkIG1ldGFkYXRhIGFib3V0IHRoaXMgdG9rZW4gaW4gdGhlXG4gICAgICAvLyBpbnZlcnRlZCBpbmRleFxuICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCB0aGlzLm1ldGFkYXRhV2hpdGVsaXN0Lmxlbmd0aDsgbCsrKSB7XG4gICAgICAgIHZhciBtZXRhZGF0YUtleSA9IHRoaXMubWV0YWRhdGFXaGl0ZWxpc3RbbF0sXG4gICAgICAgICAgICBtZXRhZGF0YSA9IHRlcm0ubWV0YWRhdGFbbWV0YWRhdGFLZXldO1xuXG4gICAgICAgIGlmICh0aGlzLmludmVydGVkSW5kZXhbdGVybV1bZmllbGROYW1lXVtkb2NSZWZdW21ldGFkYXRhS2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dW2ZpZWxkTmFtZV1bZG9jUmVmXVttZXRhZGF0YUtleV0gPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXVtmaWVsZE5hbWVdW2RvY1JlZl1bbWV0YWRhdGFLZXldLnB1c2gobWV0YWRhdGEpO1xuICAgICAgfVxuICAgIH1cblxuICB9XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGF2ZXJhZ2UgZG9jdW1lbnQgbGVuZ3RoIGZvciB0aGlzIGluZGV4XG4gKlxuICogQHByaXZhdGVcbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5jYWxjdWxhdGVBdmVyYWdlRmllbGRMZW5ndGhzID0gZnVuY3Rpb24gKCkge1xuXG4gIHZhciBmaWVsZFJlZnMgPSBPYmplY3Qua2V5cyh0aGlzLmZpZWxkTGVuZ3RocyksXG4gICAgICBudW1iZXJPZkZpZWxkcyA9IGZpZWxkUmVmcy5sZW5ndGgsXG4gICAgICBhY2N1bXVsYXRvciA9IHt9LFxuICAgICAgZG9jdW1lbnRzV2l0aEZpZWxkID0ge307XG5cbiAgdmFyIGZpZWxkO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG51bWJlck9mRmllbGRzOyBpKyspIHtcbiAgICB2YXIgZmllbGRSZWYgPSBsdW5yLkZpZWxkUmVmLmZyb21TdHJpbmcoZmllbGRSZWZzW2ldKTtcbiAgICBmaWVsZCA9IGZpZWxkUmVmLmZpZWxkTmFtZTtcblxuICAgIGlmIChkb2N1bWVudHNXaXRoRmllbGRbZmllbGRdIHx8IChkb2N1bWVudHNXaXRoRmllbGRbZmllbGRdID0gMCkpIHtcbiAgICAgIGRvY3VtZW50c1dpdGhGaWVsZFtmaWVsZF0gKz0gMTtcbiAgICB9XG5cblxuICAgIGlmIChhY2N1bXVsYXRvcltmaWVsZF0gfHwgKGFjY3VtdWxhdG9yW2ZpZWxkXSA9IDApKSB7XG4gICAgICBhY2N1bXVsYXRvcltmaWVsZF0gKz0gdGhpcy5maWVsZExlbmd0aHNbZmllbGRSZWZdO1xuICAgIH1cbiAgfVxuXG4gIGZvciAoaSA9IDA7IGkgPCB0aGlzLl9maWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICBmaWVsZCA9IHRoaXMuX2ZpZWxkc1tpXTtcbiAgICBhY2N1bXVsYXRvcltmaWVsZF0gPSBhY2N1bXVsYXRvcltmaWVsZF0gLyBkb2N1bWVudHNXaXRoRmllbGRbZmllbGRdO1xuICB9XG5cbiAgdGhpcy5hdmVyYWdlRmllbGRMZW5ndGggPSBhY2N1bXVsYXRvcjtcbn07XG5cbi8qKlxuICogQnVpbGRzIGEgdmVjdG9yIHNwYWNlIG1vZGVsIG9mIGV2ZXJ5IGRvY3VtZW50IHVzaW5nIGx1bnIuVmVjdG9yXG4gKlxuICogQHByaXZhdGVcbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5jcmVhdGVGaWVsZFZlY3RvcnMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBmaWVsZFZlY3RvcnMgPSB7fSxcbiAgICAgIGZpZWxkUmVmcyA9IE9iamVjdC5rZXlzKHRoaXMuZmllbGRUZXJtRnJlcXVlbmNpZXMpLFxuICAgICAgZmllbGRSZWZzTGVuZ3RoID0gZmllbGRSZWZzLmxlbmd0aCxcbiAgICAgIHRlcm1JZGZDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWVsZFJlZnNMZW5ndGg7IGkrKykge1xuICAgIHZhciBmaWVsZFJlZiA9IGx1bnIuRmllbGRSZWYuZnJvbVN0cmluZyhmaWVsZFJlZnNbaV0pLFxuICAgICAgICBmaWVsZCA9IGZpZWxkUmVmLmZpZWxkTmFtZSxcbiAgICAgICAgZmllbGRMZW5ndGggPSB0aGlzLmZpZWxkTGVuZ3Roc1tmaWVsZFJlZl0sXG4gICAgICAgIGZpZWxkVmVjdG9yID0gbmV3IGx1bnIuVmVjdG9yKCksXG4gICAgICAgIHRlcm1GcmVxdWVuY2llcyA9IHRoaXMuZmllbGRUZXJtRnJlcXVlbmNpZXNbZmllbGRSZWZdLFxuICAgICAgICB0ZXJtcyA9IE9iamVjdC5rZXlzKHRlcm1GcmVxdWVuY2llcyksXG4gICAgICAgIHRlcm1zTGVuZ3RoID0gdGVybXMubGVuZ3RoO1xuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCB0ZXJtc0xlbmd0aDsgaisrKSB7XG4gICAgICB2YXIgdGVybSA9IHRlcm1zW2pdLFxuICAgICAgICAgIHRmID0gdGVybUZyZXF1ZW5jaWVzW3Rlcm1dLFxuICAgICAgICAgIHRlcm1JbmRleCA9IHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXS5faW5kZXgsXG4gICAgICAgICAgaWRmLCBzY29yZSwgc2NvcmVXaXRoUHJlY2lzaW9uO1xuXG4gICAgICBpZiAodGVybUlkZkNhY2hlW3Rlcm1dID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWRmID0gbHVuci5pZGYodGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dLCB0aGlzLmRvY3VtZW50Q291bnQpO1xuICAgICAgICB0ZXJtSWRmQ2FjaGVbdGVybV0gPSBpZGY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZGYgPSB0ZXJtSWRmQ2FjaGVbdGVybV07XG4gICAgICB9XG5cbiAgICAgIHNjb3JlID0gaWRmICogKCh0aGlzLl9rMSArIDEpICogdGYpIC8gKHRoaXMuX2sxICogKDEgLSB0aGlzLl9iICsgdGhpcy5fYiAqIChmaWVsZExlbmd0aCAvIHRoaXMuYXZlcmFnZUZpZWxkTGVuZ3RoW2ZpZWxkXSkpICsgdGYpO1xuICAgICAgc2NvcmVXaXRoUHJlY2lzaW9uID0gTWF0aC5yb3VuZChzY29yZSAqIDEwMDApIC8gMTAwMDtcbiAgICAgIC8vIENvbnZlcnRzIDEuMjM0NTY3ODkgdG8gMS4yMzQuXG4gICAgICAvLyBSZWR1Y2luZyB0aGUgcHJlY2lzaW9uIHNvIHRoYXQgdGhlIHZlY3RvcnMgdGFrZSB1cCBsZXNzXG4gICAgICAvLyBzcGFjZSB3aGVuIHNlcmlhbGlzZWQuIERvaW5nIGl0IG5vdyBzbyB0aGF0IHRoZXkgYmVoYXZlXG4gICAgICAvLyB0aGUgc2FtZSBiZWZvcmUgYW5kIGFmdGVyIHNlcmlhbGlzYXRpb24uIEFsc28sIHRoaXMgaXNcbiAgICAgIC8vIHRoZSBmYXN0ZXN0IGFwcHJvYWNoIHRvIHJlZHVjaW5nIGEgbnVtYmVyJ3MgcHJlY2lzaW9uIGluXG4gICAgICAvLyBKYXZhU2NyaXB0LlxuXG4gICAgICBmaWVsZFZlY3Rvci5pbnNlcnQodGVybUluZGV4LCBzY29yZVdpdGhQcmVjaXNpb24pO1xuICAgIH1cblxuICAgIGZpZWxkVmVjdG9yc1tmaWVsZFJlZl0gPSBmaWVsZFZlY3RvcjtcbiAgfVxuXG4gIHRoaXMuZmllbGRWZWN0b3JzID0gZmllbGRWZWN0b3JzO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgdG9rZW4gc2V0IG9mIGFsbCB0b2tlbnMgaW4gdGhlIGluZGV4IHVzaW5nIGx1bnIuVG9rZW5TZXRcbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLmNyZWF0ZVRva2VuU2V0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnRva2VuU2V0ID0gbHVuci5Ub2tlblNldC5mcm9tQXJyYXkoXG4gICAgT2JqZWN0LmtleXModGhpcy5pbnZlcnRlZEluZGV4KS5zb3J0KClcbiAgKTtcbn07XG5cbi8qKlxuICogQnVpbGRzIHRoZSBpbmRleCwgY3JlYXRpbmcgYW4gaW5zdGFuY2Ugb2YgbHVuci5JbmRleC5cbiAqXG4gKiBUaGlzIGNvbXBsZXRlcyB0aGUgaW5kZXhpbmcgcHJvY2VzcyBhbmQgc2hvdWxkIG9ubHkgYmUgY2FsbGVkXG4gKiBvbmNlIGFsbCBkb2N1bWVudHMgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBpbmRleC5cbiAqXG4gKiBAcmV0dXJucyB7bHVuci5JbmRleH1cbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5jYWxjdWxhdGVBdmVyYWdlRmllbGRMZW5ndGhzKCk7XG4gIHRoaXMuY3JlYXRlRmllbGRWZWN0b3JzKCk7XG4gIHRoaXMuY3JlYXRlVG9rZW5TZXQoKTtcblxuICByZXR1cm4gbmV3IGx1bnIuSW5kZXgoe1xuICAgIGludmVydGVkSW5kZXg6IHRoaXMuaW52ZXJ0ZWRJbmRleCxcbiAgICBmaWVsZFZlY3RvcnM6IHRoaXMuZmllbGRWZWN0b3JzLFxuICAgIHRva2VuU2V0OiB0aGlzLnRva2VuU2V0LFxuICAgIGZpZWxkczogdGhpcy5fZmllbGRzLFxuICAgIHBpcGVsaW5lOiB0aGlzLnNlYXJjaFBpcGVsaW5lXG4gIH0pO1xufTtcblxuLyoqXG4gKiBBcHBsaWVzIGEgcGx1Z2luIHRvIHRoZSBpbmRleCBidWlsZGVyLlxuICpcbiAqIEEgcGx1Z2luIGlzIGEgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2l0aCB0aGUgaW5kZXggYnVpbGRlciBhcyBpdHMgY29udGV4dC5cbiAqIFBsdWdpbnMgY2FuIGJlIHVzZWQgdG8gY3VzdG9taXNlIG9yIGV4dGVuZCB0aGUgYmVoYXZpb3VyIG9mIHRoZSBpbmRleFxuICogaW4gc29tZSB3YXkuIEEgcGx1Z2luIGlzIGp1c3QgYSBmdW5jdGlvbiwgdGhhdCBlbmNhcHN1bGF0ZWQgdGhlIGN1c3RvbVxuICogYmVoYXZpb3VyIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgd2hlbiBidWlsZGluZyB0aGUgaW5kZXguXG4gKlxuICogVGhlIHBsdWdpbiBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSBpbmRleCBidWlsZGVyIGFzIGl0cyBhcmd1bWVudCwgYWRkaXRpb25hbFxuICogYXJndW1lbnRzIGNhbiBhbHNvIGJlIHBhc3NlZCB3aGVuIGNhbGxpbmcgdXNlLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWRcbiAqIHdpdGggdGhlIGluZGV4IGJ1aWxkZXIgYXMgaXRzIGNvbnRleHQuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcGx1Z2luIFRoZSBwbHVnaW4gdG8gYXBwbHkuXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gKGZuKSB7XG4gIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICBmbi5hcHBseSh0aGlzLCBhcmdzKTtcbn07XG4vKipcbiAqIENvbnRhaW5zIGFuZCBjb2xsZWN0cyBtZXRhZGF0YSBhYm91dCBhIG1hdGNoaW5nIGRvY3VtZW50LlxuICogQSBzaW5nbGUgaW5zdGFuY2Ugb2YgbHVuci5NYXRjaERhdGEgaXMgcmV0dXJuZWQgYXMgcGFydCBvZiBldmVyeVxuICogbHVuci5JbmRleH5SZXN1bHQuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVybSAtIFRoZSB0ZXJtIHRoaXMgbWF0Y2ggZGF0YSBpcyBhc3NvY2lhdGVkIHdpdGhcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZCAtIFRoZSBmaWVsZCBpbiB3aGljaCB0aGUgdGVybSB3YXMgZm91bmRcbiAqIEBwYXJhbSB7b2JqZWN0fSBtZXRhZGF0YSAtIFRoZSBtZXRhZGF0YSByZWNvcmRlZCBhYm91dCB0aGlzIHRlcm0gaW4gdGhpcyBmaWVsZFxuICogQHByb3BlcnR5IHtvYmplY3R9IG1ldGFkYXRhIC0gQSBjbG9uZWQgY29sbGVjdGlvbiBvZiBtZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhpcyBkb2N1bWVudC5cbiAqIEBzZWUge0BsaW5rIGx1bnIuSW5kZXh+UmVzdWx0fVxuICovXG5sdW5yLk1hdGNoRGF0YSA9IGZ1bmN0aW9uICh0ZXJtLCBmaWVsZCwgbWV0YWRhdGEpIHtcbiAgdmFyIGNsb25lZE1ldGFkYXRhID0gT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgIG1ldGFkYXRhS2V5cyA9IE9iamVjdC5rZXlzKG1ldGFkYXRhKTtcblxuICAvLyBDbG9uaW5nIHRoZSBtZXRhZGF0YSB0byBwcmV2ZW50IHRoZSBvcmlnaW5hbFxuICAvLyBiZWluZyBtdXRhdGVkIGR1cmluZyBtYXRjaCBkYXRhIGNvbWJpbmF0aW9uLlxuICAvLyBNZXRhZGF0YSBpcyBrZXB0IGluIGFuIGFycmF5IHdpdGhpbiB0aGUgaW52ZXJ0ZWRcbiAgLy8gaW5kZXggc28gY2xvbmluZyB0aGUgZGF0YSBjYW4gYmUgZG9uZSB3aXRoXG4gIC8vIEFycmF5I3NsaWNlXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWV0YWRhdGFLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IG1ldGFkYXRhS2V5c1tpXTtcbiAgICBjbG9uZWRNZXRhZGF0YVtrZXldID0gbWV0YWRhdGFba2V5XS5zbGljZSgpO1xuICB9XG5cbiAgdGhpcy5tZXRhZGF0YSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHRoaXMubWV0YWRhdGFbdGVybV0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSA9IGNsb25lZE1ldGFkYXRhO1xufTtcblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiBsdW5yLk1hdGNoRGF0YSB3aWxsIGJlIGNyZWF0ZWQgZm9yIGV2ZXJ5IHRlcm0gdGhhdCBtYXRjaGVzIGFcbiAqIGRvY3VtZW50LiBIb3dldmVyIG9ubHkgb25lIGluc3RhbmNlIGlzIHJlcXVpcmVkIGluIGEgbHVuci5JbmRleH5SZXN1bHQuIFRoaXNcbiAqIG1ldGhvZCBjb21iaW5lcyBtZXRhZGF0YSBmcm9tIGFub3RoZXIgaW5zdGFuY2Ugb2YgbHVuci5NYXRjaERhdGEgd2l0aCB0aGlzXG4gKiBvYmplY3RzIG1ldGFkYXRhLlxuICpcbiAqIEBwYXJhbSB7bHVuci5NYXRjaERhdGF9IG90aGVyTWF0Y2hEYXRhIC0gQW5vdGhlciBpbnN0YW5jZSBvZiBtYXRjaCBkYXRhIHRvIG1lcmdlIHdpdGggdGhpcyBvbmUuXG4gKiBAc2VlIHtAbGluayBsdW5yLkluZGV4flJlc3VsdH1cbiAqL1xubHVuci5NYXRjaERhdGEucHJvdG90eXBlLmNvbWJpbmUgPSBmdW5jdGlvbiAob3RoZXJNYXRjaERhdGEpIHtcbiAgdmFyIHRlcm1zID0gT2JqZWN0LmtleXMob3RoZXJNYXRjaERhdGEubWV0YWRhdGEpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGVybXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdGVybSA9IHRlcm1zW2ldLFxuICAgICAgICBmaWVsZHMgPSBPYmplY3Qua2V5cyhvdGhlck1hdGNoRGF0YS5tZXRhZGF0YVt0ZXJtXSk7XG5cbiAgICBpZiAodGhpcy5tZXRhZGF0YVt0ZXJtXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGZpZWxkcy5sZW5ndGg7IGorKykge1xuICAgICAgdmFyIGZpZWxkID0gZmllbGRzW2pdLFxuICAgICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhvdGhlck1hdGNoRGF0YS5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0pO1xuXG4gICAgICBpZiAodGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwga2V5cy5sZW5ndGg7IGsrKykge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1trXTtcblxuICAgICAgICBpZiAodGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XSA9IG90aGVyTWF0Y2hEYXRhLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0gPSB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldLmNvbmNhdChvdGhlck1hdGNoRGF0YS5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XSk7XG4gICAgICAgIH1cblxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBBZGQgbWV0YWRhdGEgZm9yIGEgdGVybS9maWVsZCBwYWlyIHRvIHRoaXMgaW5zdGFuY2Ugb2YgbWF0Y2ggZGF0YS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVybSAtIFRoZSB0ZXJtIHRoaXMgbWF0Y2ggZGF0YSBpcyBhc3NvY2lhdGVkIHdpdGhcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZCAtIFRoZSBmaWVsZCBpbiB3aGljaCB0aGUgdGVybSB3YXMgZm91bmRcbiAqIEBwYXJhbSB7b2JqZWN0fSBtZXRhZGF0YSAtIFRoZSBtZXRhZGF0YSByZWNvcmRlZCBhYm91dCB0aGlzIHRlcm0gaW4gdGhpcyBmaWVsZFxuICovXG5sdW5yLk1hdGNoRGF0YS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRlcm0sIGZpZWxkLCBtZXRhZGF0YSkge1xuICBpZiAoISh0ZXJtIGluIHRoaXMubWV0YWRhdGEpKSB7XG4gICAgdGhpcy5tZXRhZGF0YVt0ZXJtXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0gPSBtZXRhZGF0YTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIShmaWVsZCBpbiB0aGlzLm1ldGFkYXRhW3Rlcm1dKSkge1xuICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdID0gbWV0YWRhdGE7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIG1ldGFkYXRhS2V5cyA9IE9iamVjdC5rZXlzKG1ldGFkYXRhKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGFkYXRhS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSBtZXRhZGF0YUtleXNbaV07XG5cbiAgICBpZiAoa2V5IGluIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdKSB7XG4gICAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldID0gdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XS5jb25jYXQobWV0YWRhdGFba2V5XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0gPSBtZXRhZGF0YVtrZXldO1xuICAgIH1cbiAgfVxufTtcbi8qKlxuICogQSBsdW5yLlF1ZXJ5IHByb3ZpZGVzIGEgcHJvZ3JhbW1hdGljIHdheSBvZiBkZWZpbmluZyBxdWVyaWVzIHRvIGJlIHBlcmZvcm1lZFxuICogYWdhaW5zdCBhIHtAbGluayBsdW5yLkluZGV4fS5cbiAqXG4gKiBQcmVmZXIgY29uc3RydWN0aW5nIGEgbHVuci5RdWVyeSB1c2luZyB0aGUge0BsaW5rIGx1bnIuSW5kZXgjcXVlcnl9IG1ldGhvZFxuICogc28gdGhlIHF1ZXJ5IG9iamVjdCBpcyBwcmUtaW5pdGlhbGl6ZWQgd2l0aCB0aGUgcmlnaHQgaW5kZXggZmllbGRzLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHByb3BlcnR5IHtsdW5yLlF1ZXJ5fkNsYXVzZVtdfSBjbGF1c2VzIC0gQW4gYXJyYXkgb2YgcXVlcnkgY2xhdXNlcy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IGFsbEZpZWxkcyAtIEFuIGFycmF5IG9mIGFsbCBhdmFpbGFibGUgZmllbGRzIGluIGEgbHVuci5JbmRleC5cbiAqL1xubHVuci5RdWVyeSA9IGZ1bmN0aW9uIChhbGxGaWVsZHMpIHtcbiAgdGhpcy5jbGF1c2VzID0gW107XG4gIHRoaXMuYWxsRmllbGRzID0gYWxsRmllbGRzO1xufTtcblxuLyoqXG4gKiBDb25zdGFudHMgZm9yIGluZGljYXRpbmcgd2hhdCBraW5kIG9mIGF1dG9tYXRpYyB3aWxkY2FyZCBpbnNlcnRpb24gd2lsbCBiZSB1c2VkIHdoZW4gY29uc3RydWN0aW5nIGEgcXVlcnkgY2xhdXNlLlxuICpcbiAqIFRoaXMgYWxsb3dzIHdpbGRjYXJkcyB0byBiZSBhZGRlZCB0byB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgYSB0ZXJtIHdpdGhvdXQgaGF2aW5nIHRvIG1hbnVhbGx5IGRvIGFueSBzdHJpbmdcbiAqIGNvbmNhdGVuYXRpb24uXG4gKlxuICogVGhlIHdpbGRjYXJkIGNvbnN0YW50cyBjYW4gYmUgYml0d2lzZSBjb21iaW5lZCB0byBzZWxlY3QgYm90aCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aWxkY2FyZHMuXG4gKlxuICogQGNvbnN0YW50XG4gKiBAZGVmYXVsdFxuICogQHByb3BlcnR5IHtudW1iZXJ9IHdpbGRjYXJkLk5PTkUgLSBUaGUgdGVybSB3aWxsIGhhdmUgbm8gd2lsZGNhcmRzIGluc2VydGVkLCB0aGlzIGlzIHRoZSBkZWZhdWx0IGJlaGF2aW91clxuICogQHByb3BlcnR5IHtudW1iZXJ9IHdpbGRjYXJkLkxFQURJTkcgLSBQcmVwZW5kIHRoZSB0ZXJtIHdpdGggYSB3aWxkY2FyZCwgdW5sZXNzIGEgbGVhZGluZyB3aWxkY2FyZCBhbHJlYWR5IGV4aXN0c1xuICogQHByb3BlcnR5IHtudW1iZXJ9IHdpbGRjYXJkLlRSQUlMSU5HIC0gQXBwZW5kIGEgd2lsZGNhcmQgdG8gdGhlIHRlcm0sIHVubGVzcyBhIHRyYWlsaW5nIHdpbGRjYXJkIGFscmVhZHkgZXhpc3RzXG4gKiBAc2VlIGx1bnIuUXVlcnl+Q2xhdXNlXG4gKiBAc2VlIGx1bnIuUXVlcnkjY2xhdXNlXG4gKiBAc2VlIGx1bnIuUXVlcnkjdGVybVxuICogQGV4YW1wbGUgPGNhcHRpb24+cXVlcnkgdGVybSB3aXRoIHRyYWlsaW5nIHdpbGRjYXJkPC9jYXB0aW9uPlxuICogcXVlcnkudGVybSgnZm9vJywgeyB3aWxkY2FyZDogbHVuci5RdWVyeS53aWxkY2FyZC5UUkFJTElORyB9KVxuICogQGV4YW1wbGUgPGNhcHRpb24+cXVlcnkgdGVybSB3aXRoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdpbGRjYXJkPC9jYXB0aW9uPlxuICogcXVlcnkudGVybSgnZm9vJywge1xuICogICB3aWxkY2FyZDogbHVuci5RdWVyeS53aWxkY2FyZC5MRUFESU5HIHwgbHVuci5RdWVyeS53aWxkY2FyZC5UUkFJTElOR1xuICogfSlcbiAqL1xuXG5sdW5yLlF1ZXJ5LndpbGRjYXJkID0gXCIqXCI7XG5sdW5yLlF1ZXJ5LndpbGRjYXJkLk5PTkUgPSAwO1xubHVuci5RdWVyeS53aWxkY2FyZC5MRUFESU5HID0gMTtcbmx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkcgPSAyO1xuXG4vKipcbiAqIEEgc2luZ2xlIGNsYXVzZSBpbiBhIHtAbGluayBsdW5yLlF1ZXJ5fSBjb250YWlucyBhIHRlcm0gYW5kIGRldGFpbHMgb24gaG93IHRvXG4gKiBtYXRjaCB0aGF0IHRlcm0gYWdhaW5zdCBhIHtAbGluayBsdW5yLkluZGV4fS5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBsdW5yLlF1ZXJ5fkNsYXVzZVxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gZmllbGRzIC0gVGhlIGZpZWxkcyBpbiBhbiBpbmRleCB0aGlzIGNsYXVzZSBzaG91bGQgYmUgbWF0Y2hlZCBhZ2FpbnN0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtib29zdD0xXSAtIEFueSBib29zdCB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHdoZW4gbWF0Y2hpbmcgdGhpcyBjbGF1c2UuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2VkaXREaXN0YW5jZV0gLSBXaGV0aGVyIHRoZSB0ZXJtIHNob3VsZCBoYXZlIGZ1enp5IG1hdGNoaW5nIGFwcGxpZWQsIGFuZCBob3cgZnV6enkgdGhlIG1hdGNoIHNob3VsZCBiZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VzZVBpcGVsaW5lXSAtIFdoZXRoZXIgdGhlIHRlcm0gc2hvdWxkIGJlIHBhc3NlZCB0aHJvdWdoIHRoZSBzZWFyY2ggcGlwZWxpbmUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3dpbGRjYXJkPTBdIC0gV2hldGhlciB0aGUgdGVybSBzaG91bGQgaGF2ZSB3aWxkY2FyZHMgYXBwZW5kZWQgb3IgcHJlcGVuZGVkLlxuICovXG5cbi8qKlxuICogQWRkcyBhIHtAbGluayBsdW5yLlF1ZXJ5fkNsYXVzZX0gdG8gdGhpcyBxdWVyeS5cbiAqXG4gKiBVbmxlc3MgdGhlIGNsYXVzZSBjb250YWlucyB0aGUgZmllbGRzIHRvIGJlIG1hdGNoZWQgYWxsIGZpZWxkcyB3aWxsIGJlIG1hdGNoZWQuIEluIGFkZGl0aW9uXG4gKiBhIGRlZmF1bHQgYm9vc3Qgb2YgMSBpcyBhcHBsaWVkIHRvIHRoZSBjbGF1c2UuXG4gKlxuICogQHBhcmFtIHtsdW5yLlF1ZXJ5fkNsYXVzZX0gY2xhdXNlIC0gVGhlIGNsYXVzZSB0byBhZGQgdG8gdGhpcyBxdWVyeS5cbiAqIEBzZWUgbHVuci5RdWVyeX5DbGF1c2VcbiAqIEByZXR1cm5zIHtsdW5yLlF1ZXJ5fVxuICovXG5sdW5yLlF1ZXJ5LnByb3RvdHlwZS5jbGF1c2UgPSBmdW5jdGlvbiAoY2xhdXNlKSB7XG4gIGlmICghKCdmaWVsZHMnIGluIGNsYXVzZSkpIHtcbiAgICBjbGF1c2UuZmllbGRzID0gdGhpcy5hbGxGaWVsZHM7XG4gIH1cblxuICBpZiAoISgnYm9vc3QnIGluIGNsYXVzZSkpIHtcbiAgICBjbGF1c2UuYm9vc3QgPSAxO1xuICB9XG5cbiAgaWYgKCEoJ3VzZVBpcGVsaW5lJyBpbiBjbGF1c2UpKSB7XG4gICAgY2xhdXNlLnVzZVBpcGVsaW5lID0gdHJ1ZTtcbiAgfVxuXG4gIGlmICghKCd3aWxkY2FyZCcgaW4gY2xhdXNlKSkge1xuICAgIGNsYXVzZS53aWxkY2FyZCA9IGx1bnIuUXVlcnkud2lsZGNhcmQuTk9ORTtcbiAgfVxuXG4gIGlmICgoY2xhdXNlLndpbGRjYXJkICYgbHVuci5RdWVyeS53aWxkY2FyZC5MRUFESU5HKSAmJiAoY2xhdXNlLnRlcm0uY2hhckF0KDApICE9IGx1bnIuUXVlcnkud2lsZGNhcmQpKSB7XG4gICAgY2xhdXNlLnRlcm0gPSBcIipcIiArIGNsYXVzZS50ZXJtO1xuICB9XG5cbiAgaWYgKChjbGF1c2Uud2lsZGNhcmQgJiBsdW5yLlF1ZXJ5LndpbGRjYXJkLlRSQUlMSU5HKSAmJiAoY2xhdXNlLnRlcm0uc2xpY2UoLTEpICE9IGx1bnIuUXVlcnkud2lsZGNhcmQpKSB7XG4gICAgY2xhdXNlLnRlcm0gPSBcIlwiICsgY2xhdXNlLnRlcm0gKyBcIipcIjtcbiAgfVxuXG4gIHRoaXMuY2xhdXNlcy5wdXNoKGNsYXVzZSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEFkZHMgYSB0ZXJtIHRvIHRoZSBjdXJyZW50IHF1ZXJ5LCB1bmRlciB0aGUgY292ZXJzIHRoaXMgd2lsbCBjcmVhdGUgYSB7QGxpbmsgbHVuci5RdWVyeX5DbGF1c2V9XG4gKiB0byB0aGUgbGlzdCBvZiBjbGF1c2VzIHRoYXQgbWFrZSB1cCB0aGlzIHF1ZXJ5LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXJtIC0gVGhlIHRlcm0gdG8gYWRkIHRvIHRoZSBxdWVyeS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBBbnkgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIHRvIGFkZCB0byB0aGUgcXVlcnkgY2xhdXNlLlxuICogQHJldHVybnMge2x1bnIuUXVlcnl9XG4gKiBAc2VlIGx1bnIuUXVlcnkjY2xhdXNlXG4gKiBAc2VlIGx1bnIuUXVlcnl+Q2xhdXNlXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5hZGRpbmcgYSBzaW5nbGUgdGVybSB0byBhIHF1ZXJ5PC9jYXB0aW9uPlxuICogcXVlcnkudGVybShcImZvb1wiKVxuICogQGV4YW1wbGUgPGNhcHRpb24+YWRkaW5nIGEgc2luZ2xlIHRlcm0gdG8gYSBxdWVyeSBhbmQgc3BlY2lmeWluZyBzZWFyY2ggZmllbGRzLCB0ZXJtIGJvb3N0IGFuZCBhdXRvbWF0aWMgdHJhaWxpbmcgd2lsZGNhcmQ8L2NhcHRpb24+XG4gKiBxdWVyeS50ZXJtKFwiZm9vXCIsIHtcbiAqICAgZmllbGRzOiBbXCJ0aXRsZVwiXSxcbiAqICAgYm9vc3Q6IDEwLFxuICogICB3aWxkY2FyZDogbHVuci5RdWVyeS53aWxkY2FyZC5UUkFJTElOR1xuICogfSlcbiAqL1xubHVuci5RdWVyeS5wcm90b3R5cGUudGVybSA9IGZ1bmN0aW9uICh0ZXJtLCBvcHRpb25zKSB7XG4gIHZhciBjbGF1c2UgPSBvcHRpb25zIHx8IHt9O1xuICBjbGF1c2UudGVybSA9IHRlcm07XG5cbiAgdGhpcy5jbGF1c2UoY2xhdXNlKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5sdW5yLlF1ZXJ5UGFyc2VFcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlLCBzdGFydCwgZW5kKSB7XG4gIHRoaXMubmFtZSA9IFwiUXVlcnlQYXJzZUVycm9yXCI7XG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgdGhpcy5lbmQgPSBlbmQ7XG59O1xuXG5sdW5yLlF1ZXJ5UGFyc2VFcnJvci5wcm90b3R5cGUgPSBuZXcgRXJyb3IoKTtcbmx1bnIuUXVlcnlMZXhlciA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdGhpcy5sZXhlbWVzID0gW107XG4gIHRoaXMuc3RyID0gc3RyO1xuICB0aGlzLmxlbmd0aCA9IHN0ci5sZW5ndGg7XG4gIHRoaXMucG9zID0gMDtcbiAgdGhpcy5zdGFydCA9IDA7XG4gIHRoaXMuZXNjYXBlQ2hhclBvc2l0aW9ucyA9IFtdO1xufTtcblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGF0ZSA9IGx1bnIuUXVlcnlMZXhlci5sZXhUZXh0O1xuXG4gIHdoaWxlIChzdGF0ZSkge1xuICAgIHN0YXRlID0gc3RhdGUodGhpcyk7XG4gIH1cbn07XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUuc2xpY2VTdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdWJTbGljZXMgPSBbXSxcbiAgICAgIHNsaWNlU3RhcnQgPSB0aGlzLnN0YXJ0LFxuICAgICAgc2xpY2VFbmQgPSB0aGlzLnBvcztcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZXNjYXBlQ2hhclBvc2l0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgIHNsaWNlRW5kID0gdGhpcy5lc2NhcGVDaGFyUG9zaXRpb25zW2ldO1xuICAgIHN1YlNsaWNlcy5wdXNoKHRoaXMuc3RyLnNsaWNlKHNsaWNlU3RhcnQsIHNsaWNlRW5kKSk7XG4gICAgc2xpY2VTdGFydCA9IHNsaWNlRW5kICsgMTtcbiAgfVxuXG4gIHN1YlNsaWNlcy5wdXNoKHRoaXMuc3RyLnNsaWNlKHNsaWNlU3RhcnQsIHRoaXMucG9zKSk7XG4gIHRoaXMuZXNjYXBlQ2hhclBvc2l0aW9ucy5sZW5ndGggPSAwO1xuXG4gIHJldHVybiBzdWJTbGljZXMuam9pbignJyk7XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiAodHlwZSkge1xuICB0aGlzLmxleGVtZXMucHVzaCh7XG4gICAgdHlwZTogdHlwZSxcbiAgICBzdHI6IHRoaXMuc2xpY2VTdHJpbmcoKSxcbiAgICBzdGFydDogdGhpcy5zdGFydCxcbiAgICBlbmQ6IHRoaXMucG9zXG4gIH0pO1xuXG4gIHRoaXMuc3RhcnQgPSB0aGlzLnBvcztcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUuZXNjYXBlQ2hhcmFjdGVyID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnMucHVzaCh0aGlzLnBvcyAtIDEpO1xuICB0aGlzLnBvcyArPSAxO1xufTtcblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5wb3MgPj0gdGhpcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbHVuci5RdWVyeUxleGVyLkVPUztcbiAgfVxuXG4gIHZhciBjaGFyID0gdGhpcy5zdHIuY2hhckF0KHRoaXMucG9zKTtcbiAgdGhpcy5wb3MgKz0gMTtcbiAgcmV0dXJuIGNoYXI7XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLndpZHRoID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5wb3MgLSB0aGlzLnN0YXJ0O1xufTtcblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5pZ25vcmUgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLnN0YXJ0ID09IHRoaXMucG9zKSB7XG4gICAgdGhpcy5wb3MgKz0gMTtcbiAgfVxuXG4gIHRoaXMuc3RhcnQgPSB0aGlzLnBvcztcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUuYmFja3VwID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnBvcyAtPSAxO1xufTtcblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5hY2NlcHREaWdpdFJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNoYXIsIGNoYXJDb2RlO1xuXG4gIGRvIHtcbiAgICBjaGFyID0gdGhpcy5uZXh0KCk7XG4gICAgY2hhckNvZGUgPSBjaGFyLmNoYXJDb2RlQXQoMCk7XG4gIH0gd2hpbGUgKGNoYXJDb2RlID4gNDcgJiYgY2hhckNvZGUgPCA1OCk7XG5cbiAgaWYgKGNoYXIgIT0gbHVuci5RdWVyeUxleGVyLkVPUykge1xuICAgIHRoaXMuYmFja3VwKCk7XG4gIH1cbn07XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUubW9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMucG9zIDwgdGhpcy5sZW5ndGg7XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIuRU9TID0gJ0VPUyc7XG5sdW5yLlF1ZXJ5TGV4ZXIuRklFTEQgPSAnRklFTEQnO1xubHVuci5RdWVyeUxleGVyLlRFUk0gPSAnVEVSTSc7XG5sdW5yLlF1ZXJ5TGV4ZXIuRURJVF9ESVNUQU5DRSA9ICdFRElUX0RJU1RBTkNFJztcbmx1bnIuUXVlcnlMZXhlci5CT09TVCA9ICdCT09TVCc7XG5cbmx1bnIuUXVlcnlMZXhlci5sZXhGaWVsZCA9IGZ1bmN0aW9uIChsZXhlcikge1xuICBsZXhlci5iYWNrdXAoKTtcbiAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuRklFTEQpO1xuICBsZXhlci5pZ25vcmUoKTtcbiAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhUZXh0O1xufTtcblxubHVuci5RdWVyeUxleGVyLmxleFRlcm0gPSBmdW5jdGlvbiAobGV4ZXIpIHtcbiAgaWYgKGxleGVyLndpZHRoKCkgPiAxKSB7XG4gICAgbGV4ZXIuYmFja3VwKCk7XG4gICAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuVEVSTSk7XG4gIH1cblxuICBsZXhlci5pZ25vcmUoKTtcblxuICBpZiAobGV4ZXIubW9yZSgpKSB7XG4gICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhUZXh0O1xuICB9XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIubGV4RWRpdERpc3RhbmNlID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gIGxleGVyLmlnbm9yZSgpO1xuICBsZXhlci5hY2NlcHREaWdpdFJ1bigpO1xuICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5FRElUX0RJU1RBTkNFKTtcbiAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhUZXh0O1xufTtcblxubHVuci5RdWVyeUxleGVyLmxleEJvb3N0ID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gIGxleGVyLmlnbm9yZSgpO1xuICBsZXhlci5hY2NlcHREaWdpdFJ1bigpO1xuICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5CT09TVCk7XG4gIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dDtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5sZXhFT1MgPSBmdW5jdGlvbiAobGV4ZXIpIHtcbiAgaWYgKGxleGVyLndpZHRoKCkgPiAwKSB7XG4gICAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuVEVSTSk7XG4gIH1cbn07XG5cbi8vIFRoaXMgbWF0Y2hlcyB0aGUgc2VwYXJhdG9yIHVzZWQgd2hlbiB0b2tlbmlzaW5nIGZpZWxkc1xuLy8gd2l0aGluIGEgZG9jdW1lbnQuIFRoZXNlIHNob3VsZCBtYXRjaCBvdGhlcndpc2UgaXQgaXNcbi8vIG5vdCBwb3NzaWJsZSB0byBzZWFyY2ggZm9yIHNvbWUgdG9rZW5zIHdpdGhpbiBhIGRvY3VtZW50LlxuLy9cbi8vIEl0IGlzIHBvc3NpYmxlIGZvciB0aGUgdXNlciB0byBjaGFuZ2UgdGhlIHNlcGFyYXRvciBvbiB0aGVcbi8vIHRva2VuaXplciBzbyBpdCBfbWlnaHRfIGNsYXNoIHdpdGggYW55IG90aGVyIG9mIHRoZSBzcGVjaWFsXG4vLyBjaGFyYWN0ZXJzIGFscmVhZHkgdXNlZCB3aXRoaW4gdGhlIHNlYXJjaCBzdHJpbmcsIGUuZy4gOi5cbi8vXG4vLyBUaGlzIG1lYW5zIHRoYXQgaXQgaXMgcG9zc2libGUgdG8gY2hhbmdlIHRoZSBzZXBhcmF0b3IgaW5cbi8vIHN1Y2ggYSB3YXkgdGhhdCBtYWtlcyBzb21lIHdvcmRzIHVuc2VhcmNoYWJsZSB1c2luZyBhIHNlYXJjaFxuLy8gc3RyaW5nLlxubHVuci5RdWVyeUxleGVyLnRlcm1TZXBhcmF0b3IgPSBsdW5yLnRva2VuaXplci5zZXBhcmF0b3I7XG5cbmx1bnIuUXVlcnlMZXhlci5sZXhUZXh0ID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gIHdoaWxlICh0cnVlKSB7XG4gICAgdmFyIGNoYXIgPSBsZXhlci5uZXh0KCk7XG5cbiAgICBpZiAoY2hhciA9PSBsdW5yLlF1ZXJ5TGV4ZXIuRU9TKSB7XG4gICAgICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleEVPUztcbiAgICB9XG5cbiAgICAvLyBFc2NhcGUgY2hhcmFjdGVyIGlzICdcXCdcbiAgICBpZiAoY2hhci5jaGFyQ29kZUF0KDApID09IDkyKSB7XG4gICAgICBsZXhlci5lc2NhcGVDaGFyYWN0ZXIoKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChjaGFyID09IFwiOlwiKSB7XG4gICAgICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleEZpZWxkO1xuICAgIH1cblxuICAgIGlmIChjaGFyID09IFwiflwiKSB7XG4gICAgICBsZXhlci5iYWNrdXAoKTtcbiAgICAgIGlmIChsZXhlci53aWR0aCgpID4gMCkge1xuICAgICAgICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5URVJNKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4RWRpdERpc3RhbmNlO1xuICAgIH1cblxuICAgIGlmIChjaGFyID09IFwiXlwiKSB7XG4gICAgICBsZXhlci5iYWNrdXAoKTtcbiAgICAgIGlmIChsZXhlci53aWR0aCgpID4gMCkge1xuICAgICAgICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5URVJNKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4Qm9vc3Q7XG4gICAgfVxuXG4gICAgaWYgKGNoYXIubWF0Y2gobHVuci5RdWVyeUxleGVyLnRlcm1TZXBhcmF0b3IpKSB7XG4gICAgICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleFRlcm07XG4gICAgfVxuICB9XG59O1xuXG5sdW5yLlF1ZXJ5UGFyc2VyID0gZnVuY3Rpb24gKHN0ciwgcXVlcnkpIHtcbiAgdGhpcy5sZXhlciA9IG5ldyBsdW5yLlF1ZXJ5TGV4ZXIgKHN0cik7XG4gIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgdGhpcy5jdXJyZW50Q2xhdXNlID0ge307XG4gIHRoaXMubGV4ZW1lSWR4ID0gMDtcbn07XG5cbmx1bnIuUXVlcnlQYXJzZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmxleGVyLnJ1bigpO1xuICB0aGlzLmxleGVtZXMgPSB0aGlzLmxleGVyLmxleGVtZXM7XG5cbiAgdmFyIHN0YXRlID0gbHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkT3JUZXJtO1xuXG4gIHdoaWxlIChzdGF0ZSkge1xuICAgIHN0YXRlID0gc3RhdGUodGhpcyk7XG4gIH1cblxuICByZXR1cm4gdGhpcy5xdWVyeTtcbn07XG5cbmx1bnIuUXVlcnlQYXJzZXIucHJvdG90eXBlLnBlZWtMZXhlbWUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmxleGVtZXNbdGhpcy5sZXhlbWVJZHhdO1xufTtcblxubHVuci5RdWVyeVBhcnNlci5wcm90b3R5cGUuY29uc3VtZUxleGVtZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGxleGVtZSA9IHRoaXMucGVla0xleGVtZSgpO1xuICB0aGlzLmxleGVtZUlkeCArPSAxO1xuICByZXR1cm4gbGV4ZW1lO1xufTtcblxubHVuci5RdWVyeVBhcnNlci5wcm90b3R5cGUubmV4dENsYXVzZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNvbXBsZXRlZENsYXVzZSA9IHRoaXMuY3VycmVudENsYXVzZTtcbiAgdGhpcy5xdWVyeS5jbGF1c2UoY29tcGxldGVkQ2xhdXNlKTtcbiAgdGhpcy5jdXJyZW50Q2xhdXNlID0ge307XG59O1xuXG5sdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRmllbGRPclRlcm0gPSBmdW5jdGlvbiAocGFyc2VyKSB7XG4gIHZhciBsZXhlbWUgPSBwYXJzZXIucGVla0xleGVtZSgpO1xuXG4gIGlmIChsZXhlbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHN3aXRjaCAobGV4ZW1lLnR5cGUpIHtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5GSUVMRDpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRmllbGQ7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuVEVSTTpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybTtcbiAgICBkZWZhdWx0OlxuICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiZXhwZWN0ZWQgZWl0aGVyIGEgZmllbGQgb3IgYSB0ZXJtLCBmb3VuZCBcIiArIGxleGVtZS50eXBlO1xuXG4gICAgICBpZiAobGV4ZW1lLnN0ci5sZW5ndGggPj0gMSkge1xuICAgICAgICBlcnJvck1lc3NhZ2UgKz0gXCIgd2l0aCB2YWx1ZSAnXCIgKyBsZXhlbWUuc3RyICsgXCInXCI7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBsZXhlbWUuc3RhcnQsIGxleGVtZS5lbmQpO1xuICB9XG59O1xuXG5sdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRmllbGQgPSBmdW5jdGlvbiAocGFyc2VyKSB7XG4gIHZhciBsZXhlbWUgPSBwYXJzZXIuY29uc3VtZUxleGVtZSgpO1xuXG4gIGlmIChsZXhlbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBlcnJvck1lc3NhZ2U7XG4gIGlmIChwYXJzZXIucXVlcnkuYWxsRmllbGRzLmluZGV4T2YobGV4ZW1lLnN0cikgPT0gLTEpIHtcbiAgICB2YXIgcG9zc2libGVGaWVsZHMgPSBwYXJzZXIucXVlcnkuYWxsRmllbGRzLm1hcChmdW5jdGlvbiAoZikgeyByZXR1cm4gXCInXCIgKyBmICsgXCInXCI7IH0pLmpvaW4oJywgJyk7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IFwidW5yZWNvZ25pc2VkIGZpZWxkICdcIiArIGxleGVtZS5zdHIgKyBcIicsIHBvc3NpYmxlIGZpZWxkczogXCIgKyBwb3NzaWJsZUZpZWxkcztcblxuICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBsZXhlbWUuc3RhcnQsIGxleGVtZS5lbmQpO1xuICB9XG5cbiAgcGFyc2VyLmN1cnJlbnRDbGF1c2UuZmllbGRzID0gW2xleGVtZS5zdHJdO1xuXG4gIHZhciBuZXh0TGV4ZW1lID0gcGFyc2VyLnBlZWtMZXhlbWUoKTtcblxuICBpZiAobmV4dExleGVtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZXJyb3JNZXNzYWdlID0gXCJleHBlY3RpbmcgdGVybSwgZm91bmQgbm90aGluZ1wiO1xuICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBsZXhlbWUuc3RhcnQsIGxleGVtZS5lbmQpO1xuICB9XG5cbiAgc3dpdGNoIChuZXh0TGV4ZW1lLnR5cGUpIHtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5URVJNOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VUZXJtO1xuICAgIGRlZmF1bHQ6XG4gICAgICBlcnJvck1lc3NhZ2UgPSBcImV4cGVjdGluZyB0ZXJtLCBmb3VuZCAnXCIgKyBuZXh0TGV4ZW1lLnR5cGUgKyBcIidcIjtcbiAgICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBuZXh0TGV4ZW1lLnN0YXJ0LCBuZXh0TGV4ZW1lLmVuZCk7XG4gIH1cbn07XG5cbmx1bnIuUXVlcnlQYXJzZXIucGFyc2VUZXJtID0gZnVuY3Rpb24gKHBhcnNlcikge1xuICB2YXIgbGV4ZW1lID0gcGFyc2VyLmNvbnN1bWVMZXhlbWUoKTtcblxuICBpZiAobGV4ZW1lID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBwYXJzZXIuY3VycmVudENsYXVzZS50ZXJtID0gbGV4ZW1lLnN0ci50b0xvd2VyQ2FzZSgpO1xuXG4gIGlmIChsZXhlbWUuc3RyLmluZGV4T2YoXCIqXCIpICE9IC0xKSB7XG4gICAgcGFyc2VyLmN1cnJlbnRDbGF1c2UudXNlUGlwZWxpbmUgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBuZXh0TGV4ZW1lID0gcGFyc2VyLnBlZWtMZXhlbWUoKTtcblxuICBpZiAobmV4dExleGVtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBzd2l0Y2ggKG5leHRMZXhlbWUudHlwZSkge1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlRFUk06XG4gICAgICBwYXJzZXIubmV4dENsYXVzZSgpO1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VUZXJtO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkZJRUxEOlxuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRmllbGQ7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRURJVF9ESVNUQU5DRTpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRWRpdERpc3RhbmNlO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkJPT1NUOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VCb29zdDtcbiAgICBkZWZhdWx0OlxuICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiVW5leHBlY3RlZCBsZXhlbWUgdHlwZSAnXCIgKyBuZXh0TGV4ZW1lLnR5cGUgKyBcIidcIjtcbiAgICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBuZXh0TGV4ZW1lLnN0YXJ0LCBuZXh0TGV4ZW1lLmVuZCk7XG4gIH1cbn07XG5cbmx1bnIuUXVlcnlQYXJzZXIucGFyc2VFZGl0RGlzdGFuY2UgPSBmdW5jdGlvbiAocGFyc2VyKSB7XG4gIHZhciBsZXhlbWUgPSBwYXJzZXIuY29uc3VtZUxleGVtZSgpO1xuXG4gIGlmIChsZXhlbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBlZGl0RGlzdGFuY2UgPSBwYXJzZUludChsZXhlbWUuc3RyLCAxMCk7XG5cbiAgdmFyIGVycm9yTWVzc2FnZTtcbiAgaWYgKGlzTmFOKGVkaXREaXN0YW5jZSkpIHtcbiAgICBlcnJvck1lc3NhZ2UgPSBcImVkaXQgZGlzdGFuY2UgbXVzdCBiZSBudW1lcmljXCI7XG4gICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIGxleGVtZS5zdGFydCwgbGV4ZW1lLmVuZCk7XG4gIH1cblxuICBwYXJzZXIuY3VycmVudENsYXVzZS5lZGl0RGlzdGFuY2UgPSBlZGl0RGlzdGFuY2U7XG5cbiAgdmFyIG5leHRMZXhlbWUgPSBwYXJzZXIucGVla0xleGVtZSgpO1xuXG4gIGlmIChuZXh0TGV4ZW1lID09PSB1bmRlZmluZWQpIHtcbiAgICBwYXJzZXIubmV4dENsYXVzZSgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHN3aXRjaCAobmV4dExleGVtZS50eXBlKSB7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuVEVSTTpcbiAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZVRlcm07XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRklFTEQ6XG4gICAgICBwYXJzZXIubmV4dENsYXVzZSgpO1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZDtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5FRElUX0RJU1RBTkNFOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VFZGl0RGlzdGFuY2U7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuQk9PU1Q6XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUJvb3N0O1xuICAgIGRlZmF1bHQ6XG4gICAgICBlcnJvck1lc3NhZ2UgPSBcIlVuZXhwZWN0ZWQgbGV4ZW1lIHR5cGUgJ1wiICsgbmV4dExleGVtZS50eXBlICsgXCInXCI7XG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbmV4dExleGVtZS5zdGFydCwgbmV4dExleGVtZS5lbmQpO1xuICB9XG59O1xuXG5sdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlQm9vc3QgPSBmdW5jdGlvbiAocGFyc2VyKSB7XG4gIHZhciBsZXhlbWUgPSBwYXJzZXIuY29uc3VtZUxleGVtZSgpO1xuXG4gIHZhciBlcnJvck1lc3NhZ2U7XG4gIGlmIChsZXhlbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBib29zdCA9IHBhcnNlSW50KGxleGVtZS5zdHIsIDEwKTtcblxuICBpZiAoaXNOYU4oYm9vc3QpKSB7XG4gICAgZXJyb3JNZXNzYWdlID0gXCJib29zdCBtdXN0IGJlIG51bWVyaWNcIjtcbiAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbGV4ZW1lLnN0YXJ0LCBsZXhlbWUuZW5kKTtcbiAgfVxuXG4gIHBhcnNlci5jdXJyZW50Q2xhdXNlLmJvb3N0ID0gYm9vc3Q7XG5cbiAgdmFyIG5leHRMZXhlbWUgPSBwYXJzZXIucGVla0xleGVtZSgpO1xuXG4gIGlmIChuZXh0TGV4ZW1lID09PSB1bmRlZmluZWQpIHtcbiAgICBwYXJzZXIubmV4dENsYXVzZSgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHN3aXRjaCAobmV4dExleGVtZS50eXBlKSB7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuVEVSTTpcbiAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZVRlcm07XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRklFTEQ6XG4gICAgICBwYXJzZXIubmV4dENsYXVzZSgpO1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZDtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5FRElUX0RJU1RBTkNFOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VFZGl0RGlzdGFuY2U7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuQk9PU1Q6XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUJvb3N0O1xuICAgIGRlZmF1bHQ6XG4gICAgICBlcnJvck1lc3NhZ2UgPSBcIlVuZXhwZWN0ZWQgbGV4ZW1lIHR5cGUgJ1wiICsgbmV4dExleGVtZS50eXBlICsgXCInXCI7XG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbmV4dExleGVtZS5zdGFydCwgbmV4dExleGVtZS5lbmQpO1xuICB9XG59XG5cbiAgLyoqXG4gICAqIGV4cG9ydCB0aGUgbW9kdWxlIHZpYSBBTUQsIENvbW1vbkpTIG9yIGFzIGEgYnJvd3NlciBnbG9iYWxcbiAgICogRXhwb3J0IGNvZGUgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3JldHVybkV4cG9ydHMuanNcbiAgICovXG4gIDsoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgICBkZWZpbmUoZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIC8qKlxuICAgICAgICogTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgICAgKiBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLFxuICAgICAgICogbGlrZSBOb2RlLlxuICAgICAgICovXG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICAgIHJvb3QubHVuciA9IGZhY3RvcnkoKTtcbiAgICB9XG4gIH0odGhpcywgZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEp1c3QgcmV0dXJuIGEgdmFsdWUgdG8gZGVmaW5lIHRoZSBtb2R1bGUgZXhwb3J0LlxuICAgICAqIFRoaXMgZXhhbXBsZSByZXR1cm5zIGFuIG9iamVjdCwgYnV0IHRoZSBtb2R1bGVcbiAgICAgKiBjYW4gcmV0dXJuIGEgZnVuY3Rpb24gYXMgdGhlIGV4cG9ydGVkIHZhbHVlLlxuICAgICAqL1xuICAgIHJldHVybiBsdW5yO1xuICB9KSk7XG59KSgpO1xuXG5cbiAgLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9wc2V1ZG9ueW0xMTcvTGV2ZW5zaHRlaW5cbihmdW5jdGlvbihyb290LCBmYWN0b3J5KXtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZXR1cm4gZmFjdG9yeShyb290KTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZSAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3Rvcnkocm9vdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcm9vdC5MZXZlbnNodGVpbiA9IGZhY3Rvcnkocm9vdCk7XG4gICAgfVxufSh0aGlzLCBmdW5jdGlvbihyb290KXtcblxuICAgIGZ1bmN0aW9uIGZvckVhY2goIGFycmF5LCBmbiApIHsgdmFyIGksIGxlbmd0aDtcbiAgICAgICAgaSA9IC0xO1xuICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gICAgICAgIHdoaWxlICggKytpIDwgbGVuZ3RoIClcbiAgICAgICAgICAgIGZuKCBhcnJheVsgaSBdLCBpLCBhcnJheSApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1hcCggYXJyYXksIGZuICkgeyB2YXIgcmVzdWx0O1xuICAgICAgICByZXN1bHQgPSBBcnJheSggYXJyYXkubGVuZ3RoICk7XG4gICAgICAgIGZvckVhY2goIGFycmF5LCBmdW5jdGlvbiAoIHZhbCwgaSwgYXJyYXkgKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaCggZm4oIHZhbCwgaSwgYXJyYXkgKSApO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWR1Y2UoIGFycmF5LCBmbiwgYWNjdW11bGF0b3IgKSB7XG4gICAgICAgIGZvckVhY2goIGFycmF5LCBmdW5jdGlvbiggdmFsLCBpLCBhcnJheSApIHtcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gZm4oIHZhbCwgaSwgYXJyYXkgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICB9XG5cbiAgICAvLyBGb3Igc3RyaW5nIG1vZGVcbiAgICBmdW5jdGlvbiBnZXRDaGFyKHN0ciwgaWR4KSB7XG4gICAgICAgIHJldHVybiBzdHIuY2hhckF0KGlkeCk7XG4gICAgfVxuXG4gICAgLy8gRm9yIGFycmF5IG1vZGVcbiAgICBmdW5jdGlvbiBnZXRBcnJheU1lbWJlcihhcnIsIGlkeCkge1xuICAgICAgICByZXR1cm4gYXJyW2lkeF07XG4gICAgfVxuXG4gICAgLy8gTGV2ZW5zaHRlaW4gZGlzdGFuY2VcbiAgICBmdW5jdGlvbiBMZXZlbnNodGVpbiggc3RyX20sIHN0cl9uICkge1xuICAgICAgICB2YXIgcHJldmlvdXMsIGN1cnJlbnQsIG1hdHJpeCwgZ2V0RWxlbTtcbiAgICAgICAgLy8gU2V0IHRvIHN0cmluZyBvciBhcnJheSBtb2RlXG4gICAgICAgIGlmICh0eXBlb2Ygc3RyX20gPT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIHN0cl9uID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBnZXRFbGVtID0gZ2V0Q2hhcjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc3RyX20gPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHN0cl9uID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBnZXRFbGVtID0gZ2V0QXJyYXlNZW1iZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBcIkxldmVuc3RodGVpbjogaW5wdXQgbXVzdCBiZSB0d28gc3RyaW5ncyBvciB0d28gYXJyYXlzXCI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29uc3RydWN0b3JcbiAgICAgICAgbWF0cml4ID0gdGhpcy5fbWF0cml4ID0gW107XG5cbiAgICAgICAgLy8gU2FuaXR5IGNoZWNrc1xuICAgICAgICBpZiAoIHN0cl9tID09IHN0cl9uICkge1xuICAgICAgICAgIHRoaXMuZGlzdGFuY2UgPSAwO1xuICAgICAgICAgIHJldHVybiB0aGlzLmRpc3RhbmNlO1xuICAgICAgICB9ZWxzZSBpZiAoIHN0cl9tID09PSAnJyApe1xuICAgICAgICAgIHRoaXMuZGlzdGFuY2UgPSBzdHJfbi5sZW5ndGg7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZGlzdGFuY2U7XG4gICAgICAgIH1lbHNlIGlmICggc3RyX24gPT09ICcnICkge1xuICAgICAgICAgIHRoaXMuZGlzdGFuY2UgPSBzdHJfbS5sZW5ndGg7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZGlzdGFuY2U7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgIC8vIERhbmdlciBXaWxsIFJvYmluc29uXG4gICAgICAgICAgICBwcmV2aW91cyA9IFsgMCBdO1xuICAgICAgICAgICAgZm9yRWFjaCggc3RyX20sIGZ1bmN0aW9uKHYsaSl7XG4gICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgcHJldmlvdXNbaV0gPSBpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1hdHJpeFswXSA9IHByZXZpb3VzO1xuICAgICAgICAgICAgZm9yRWFjaCggc3RyX24sIGZ1bmN0aW9uKCBuX3ZhbCwgbl9pZHggKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IFsgKytuX2lkeCBdO1xuICAgICAgICAgICAgICAgIGZvckVhY2goIHN0cl9tLCBmdW5jdGlvbiggbV92YWwsIG1faWR4ICkge1xuICAgICAgICAgICAgICAgICAgICBtX2lkeCsrO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGdldEVsZW0oc3RyX20sIG1faWR4IC0gMSkgPT0gZ2V0RWxlbShzdHJfbiwgbl9pZHggLSAxKSApXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50WyBtX2lkeCBdID0gcHJldmlvdXNbIG1faWR4IC0gMSBdO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50WyBtX2lkeCBdID0gTWF0aC5taW4oIHByZXZpb3VzWyBtX2lkeCBdICsgMSwgY3VycmVudFsgbV9pZHggLSAxIF0gKyAxLCBwcmV2aW91c1sgbV9pZHggLSAxIF0gKyAxKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwcmV2aW91cyA9IGN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgbWF0cml4WyBtYXRyaXgubGVuZ3RoIF0gPSBwcmV2aW91cztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gY3VycmVudFsgY3VycmVudC5sZW5ndGggLSAxIF07XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXN0YW5jZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIExldmVuc2h0ZWluLnByb3RvdHlwZS50b1N0cmluZyA9IExldmVuc2h0ZWluLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoIG5vX3ByaW50ICkgeyB2YXIgbWF0cml4LCBtYXgsIGJ1ZmYsIHNlcCwgcm93cztcbiAgICAgICAgbWF0cml4ID0gdGhpcy5nZXRNYXRyaXgoKTtcbiAgICAgICAgbWF4ID0gcmVkdWNlKCBtYXRyaXgsZnVuY3Rpb24oIG0sIG8gKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoIG0sIHJlZHVjZSggbywgTWF0aC5tYXgsIDAgKSApO1xuICAgICAgICB9LCAwICk7XG4gICAgICAgIGJ1ZmYgPSBBcnJheSggKCBtYXggKyAnJyApLmxlbmd0aCApLmpvaW4oICcgJyApO1xuXG4gICAgICAgIHNlcCA9IFtdO1xuICAgICAgICB3aGlsZSAoIHNlcC5sZW5ndGggPCAobWF0cml4WzBdICYmIG1hdHJpeFswXS5sZW5ndGggfHwgMCkgKVxuICAgICAgICAgICAgc2VwWyBzZXAubGVuZ3RoIF0gPSBBcnJheSggYnVmZi5sZW5ndGggKyAxICkuam9pbiggJy0nICk7XG4gICAgICAgIHNlcCA9IHNlcC5qb2luKCAnLSsnICkgKyAnLSc7XG5cbiAgICAgICAgcm93cyA9IG1hcCggbWF0cml4LCBmdW5jdGlvbiggcm93ICkgeyB2YXIgY2VsbHM7XG4gICAgICAgICAgICBjZWxscyA9IG1hcCggcm93LCBmdW5jdGlvbiggY2VsbCApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKCBidWZmICsgY2VsbCApLnNsaWNlKCAtIGJ1ZmYubGVuZ3RoICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBjZWxscy5qb2luKCAnIHwnICkgKyAnICc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByb3dzLmpvaW4oIFwiXFxuXCIgKyBzZXAgKyBcIlxcblwiICk7XG4gICAgfTtcblxuICAgIC8vIHN0ZXBzIHRvIGdldCBmcm9tIHN0cmluZyAxIHRvIHN0cmluZyAyXG4gICAgTGV2ZW5zaHRlaW4ucHJvdG90eXBlLmdldFN0ZXBzID0gZnVuY3Rpb24oKSAgICAge1xuICAgICAgICB2YXIgc3RlcHMsIG1hdHJpeCwgeCwgeSwgdSwgbCwgZCwgbWluO1xuICAgICAgICBzdGVwcyA9IFtdO1xuICAgICAgICBtYXRyaXggPSB0aGlzLmdldE1hdHJpeCgpO1xuICAgICAgICB4ID0gbWF0cml4Lmxlbmd0aCAtIDE7XG4gICAgICAgIHkgPSBtYXRyaXhbMF0ubGVuZ3RoIC0gMTtcbiAgICAgICAgd2hpbGUoeCAhPT0gMCB8fCB5ICE9PSAwKSAgICAge1xuICAgICAgICAgICAgdSA9IHkgPiAwID8gbWF0cml4W3hdW3ktMV0gOiBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgICAgICAgICAgbCA9IHggPiAwID8gbWF0cml4W3gtMV1beV0gOiBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgICAgICAgICAgZCA9IHkgPiAwICYmIHggPiAwID8gbWF0cml4W3gtMV1beS0xXSA6IE51bWJlci5NQVhfVkFMVUU7XG4gICAgICAgICAgICBtaW4gPSBNYXRoLm1pbih1LCBsLCBkKTtcbiAgICAgICAgICAgIGlmKG1pbiA9PT0gZCkge1xuICAgICAgICAgICAgICAgIGlmKGQgPCBtYXRyaXhbeF1beV0pIHtcbiAgICAgICAgICAgICAgICAgICAgc3RlcHMucHVzaChbJ3N1YnN0aXR1dGUnLCB5LCB4XSk7XG4gICAgICAgICAgICAgICAgfS8vICBlbHNlIHN0ZXBzLnB1c2goWyduby1vcCcsIHksIHhdKVxuICAgICAgICAgICAgICAgIHgtLTtcbiAgICAgICAgICAgICAgICB5LS07XG4gICAgICAgICAgICB9IGVsc2UgaWYobWluID09PSBsKSB7XG4gICAgICAgICAgICAgICAgc3RlcHMucHVzaChbJ2luc2VydCcsIHksIHhdKTtcbiAgICAgICAgICAgICAgICB4LS07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0ZXBzLnB1c2goWydkZWxldGUnLCB5LCB4XSk7XG4gICAgICAgICAgICAgICAgeS0tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGVwcztcbiAgICB9O1xuXG4gICAgTGV2ZW5zaHRlaW4ucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hdHJpeC5zbGljZSgpO1xuICAgIH07XG5cbiAgICBMZXZlbnNodGVpbi5wcm90b3R5cGUudmFsdWVPZiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXN0YW5jZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIExldmVuc2h0ZWluO1xuXG59KSk7XG5cblxuICAvL1RoaXMgaXMgdGhlIG1haW4gcGx1Z2luIGRlZmluaXRpb25cbiAgJC5mbi5naG9zdEh1bnRlciAgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcblxuICAgIC8vSGVyZSB3ZSB1c2UgalF1ZXJ5J3MgZXh0ZW5kIHRvIHNldCBkZWZhdWx0IHZhbHVlcyBpZiB0aGV5IHdlcmVuJ3Qgc2V0IGJ5IHRoZSB1c2VyXG4gICAgdmFyIG9wdHMgICAgPSAkLmV4dGVuZCgge30sICQuZm4uZ2hvc3RIdW50ZXIuZGVmYXVsdHMsIG9wdGlvbnMgKTtcbiAgICBpZiggb3B0cy5yZXN1bHRzIClcbiAgICB7XG4gICAgICBwbHVnaW5NZXRob2RzLmluaXQoIHRoaXMgLCBvcHRzICk7XG4gICAgICByZXR1cm4gcGx1Z2luTWV0aG9kcztcbiAgICB9XG4gIH07XG5cbiAgLy8gSWYgdGhlIEdob3N0IGluc3RhbmNlIGlzIGluIGEgc3VicGF0aCBvZiB0aGUgc2l0ZSwgc2V0IHN1YnBhdGhcbiAgLy8gYXMgdGhlIHBhdGggdG8gdGhlIHNpdGUgd2l0aCBhIGxlYWRpbmcgc2xhc2ggYW5kIG5vIHRyYWlsaW5nIHNsYXNoXG4gIC8vIChpLmUuIFwiL3BhdGgvdG8vaW5zdGFuY2VcIikuXG4gICQuZm4uZ2hvc3RIdW50ZXIuZGVmYXVsdHMgPSB7XG4gICAgcmVzdWx0c0RhdGEgICAgIDogZmFsc2UsXG4gICAgb25QYWdlTG9hZCAgICAgIDogdHJ1ZSxcbiAgICBvbktleVVwICAgICAgIDogZmFsc2UsXG4gICAgcmVzdWx0X3RlbXBsYXRlICAgOiBcIjxhIGlkPSdnaC17e3JlZn19JyBjbGFzcz0nZ2gtc2VhcmNoLWl0ZW0nIGhyZWY9J3t7bGlua319Jz48cD48aDI+e3t0aXRsZX19PC9oMj48aDQ+e3twcmV0dHlQdWJEYXRlfX08L2g0PjwvcD48L2E+XCIsXG4gICAgaW5mb190ZW1wbGF0ZSAgIDogXCI8cD5OdW1iZXIgb2YgcG9zdHMgZm91bmQ6IHt7YW1vdW50fX08L3A+XCIsXG4gICAgZGlzcGxheVNlYXJjaEluZm8gOiB0cnVlLFxuICAgIHplcm9SZXN1bHRzSW5mbyAgIDogdHJ1ZSxcbiAgICBiZWZvcmUgICAgICAgIDogZmFsc2UsXG4gICAgb25Db21wbGV0ZSAgICAgIDogZmFsc2UsXG4gICAgaW5jbHVkZXBhZ2VzICAgIDogZmFsc2UsXG4gICAgZmlsdGVyZmllbGRzICAgIDogZmFsc2UsXG4gICAgc3VicGF0aCAgICAgICA6IFwiXCIsXG4gICAgaXRlbV9wcmVwcm9jZXNzb3IgOiBmYWxzZSxcbiAgICBpbmRleGluZ19zdGFydCAgICA6IGZhbHNlLFxuICAgIGluZGV4aW5nX2VuZCAgICA6IGZhbHNlXG4gIH07XG4gIHZhciBwcmV0dHlEYXRlID0gZnVuY3Rpb24oZGF0ZSkge1xuICAgIHZhciBkID0gbmV3IERhdGUoZGF0ZSk7XG4gICAgdmFyIG1vbnRoTmFtZXMgPSBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIiwgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXTtcbiAgICAgIHJldHVybiBkLmdldERhdGUoKSArICcgJyArIG1vbnRoTmFtZXNbZC5nZXRNb250aCgpXSArICcgJyArIGQuZ2V0RnVsbFllYXIoKTtcbiAgfTtcblxuICB2YXIgZ2V0U3VicGF0aEtleSA9IGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvXlxcLy8sIFwiXCIpLnJlcGxhY2UoL1xcLy9nLCBcIi1cIik7XG4gIH07XG5cbiAgdmFyIGxhc3RUaW1lb3V0SUQgPSBudWxsO1xuXG4gIC8vIFdlIGFkZCBhIHByZWZpeCB0byBuZXcgSURzIGFuZCByZW1vdmUgaXQgYWZ0ZXIgYSBzZXQgb2ZcbiAgLy8gdXBkYXRlcyBpcyBjb21wbGV0ZSwganVzdCBpbiBjYXNlIGEgYnJvd3NlciBmcmVha3Mgb3ZlclxuICAvLyBkdXBsaWNhdGUgSURzIGluIHRoZSBET00uXG4gIHZhciBzZXR0bGVJRHMgPSBmdW5jdGlvbigpIHtcbiAgICAkKCcuZ2gtc2VhcmNoLWl0ZW0nKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgb2xkQXR0ciA9IHRoaXMuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgdmFyIG5ld0F0dHIgPSBvbGRBdHRyLnJlcGxhY2UoL15uZXctLywgXCJcIik7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnaWQnLCBuZXdBdHRyKTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgdXBkYXRlU2VhcmNoTGlzdCA9IGZ1bmN0aW9uKGxpc3RJdGVtcywgYXBpRGF0YSwgc3RlcHMpIHtcbiAgICBmb3IgKHZhciBpPTAsaWxlbj1zdGVwcy5sZW5ndGg7aTxpbGVuO2krKykge1xuICAgICAgdmFyIHN0ZXAgPSBzdGVwc1tpXTtcbiAgICAgIGlmIChzdGVwWzBdID09IFwiZGVsZXRlXCIpIHtcbiAgICAgICAgbGlzdEl0ZW1zLmVxKHN0ZXBbMV0tMSkucmVtb3ZlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbHVucnJlZiA9IGFwaURhdGFbc3RlcFsyXS0xXS5yZWY7XG4gICAgICAgIHZhciBwb3N0RGF0YSA9IHRoaXMuYmxvZ0RhdGFbbHVucnJlZl07XG4gICAgICAgIHZhciBodG1sID0gdGhpcy5mb3JtYXQodGhpcy5yZXN1bHRfdGVtcGxhdGUscG9zdERhdGEpO1xuICAgICAgICBpZiAoc3RlcFswXSA9PT0gXCJzdWJzdGl0dXRlXCIpIHtcbiAgICAgICAgICBsaXN0SXRlbXMuZXEoc3RlcFsxXS0xKS5yZXBsYWNlV2l0aChodG1sKTtcbiAgICAgICAgfSBlbHNlIGlmIChzdGVwWzBdID09PSBcImluc2VydFwiKSB7XG4gICAgICAgICAgdmFyIHBvcztcbiAgICAgICAgICBpZiAoc3RlcFsxXSA9PT0gMCkge1xuICAgICAgICAgICAgcG9zID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcG9zID0gKHN0ZXBbMV0tMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpc3RJdGVtcy5lcShwb3MpLmFmdGVyKGh0bWwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHNldHRsZUlEcygpO1xuICB9O1xuXG4gIHZhciBncmFiQW5kSW5kZXggPSBmdW5jdGlvbigpe1xuICAgIC8vIGNvbnNvbGUubG9nKCdnaG9zdEh1bnRlcjogZ3JhYkFuZEluZGV4Jyk7XG4gICAgdGhpcy5ibG9nRGF0YSA9IHt9O1xuICAgIHRoaXMubGF0ZXN0UG9zdCA9IDA7XG4gICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgIGxpbWl0OiBcImFsbFwiLFxuICAgICAgaW5jbHVkZTogXCJ0YWdzXCIsXG4gICAgICBmb3JtYXRzOiBbXCJwbGFpbnRleHRcIl1cbiAgICB9O1xuICAgIGlmICAoIHRoaXMuaW5jbHVkZXBhZ2VzICl7XG4gICAgICBwYXJhbXMuZmlsdGVyPVwiKHBhZ2U6dHJ1ZSxwYWdlOmZhbHNlKVwiO1xuICAgIH1cbiAgICB2YXIgbWUgPSB0aGlzO1xuICAgICQuZ2V0KGdob3N0LnVybC5hcGkoJ3Bvc3RzJyxwYXJhbXMpKS5kb25lKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgdmFyIGlkeFNyYyA9IGRhdGEucG9zdHM7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcImdob3N0SHVudGVyOiBpbmRleGluZyBhbGwgcG9zdHNcIilcbiAgICAgIG1lLmluZGV4ID0gbHVucihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVmKCdpZCcpO1xuICAgICAgICB0aGlzLmZpZWxkKCd0aXRsZScpO1xuICAgICAgICB0aGlzLmZpZWxkKCdkZXNjcmlwdGlvbicpO1xuICAgICAgICB0aGlzLmZpZWxkKCdwbGFpbnRleHQnKTtcbiAgICAgICAgdGhpcy5maWVsZCgncHViRGF0ZScpO1xuICAgICAgICB0aGlzLmZpZWxkKCd0YWcnKTtcbiAgICAgICAgaWR4U3JjLmZvckVhY2goZnVuY3Rpb24gKGFycmF5SXRlbSkge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwic3RhcnQgaW5kZXhpbmcgYW4gaXRlbTogXCIgKyBhcnJheUl0ZW0uaWQpO1xuICAgICAgICAgIC8vIFRyYWNrIHRoZSBsYXRlc3QgdmFsdWUgb2YgdXBkYXRlZF9hdCwgIHRvIHN0YXNoIGluIGxvY2FsU3RvcmFnZVxuICAgICAgICAgIHZhciBpdGVtRGF0ZSA9IG5ldyBEYXRlKGFycmF5SXRlbS51cGRhdGVkX2F0KS5nZXRUaW1lKCk7XG4gICAgICAgICAgdmFyIHJlY29yZGVkRGF0ZSA9IG5ldyBEYXRlKG1lLmxhdGVzdFBvc3QpLmdldFRpbWUoKTtcbiAgICAgICAgICBpZiAoaXRlbURhdGUgPiByZWNvcmRlZERhdGUpIHtcbiAgICAgICAgICAgIG1lLmxhdGVzdFBvc3QgPSBhcnJheUl0ZW0udXBkYXRlZF9hdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIHRhZ19hcnIgPSBhcnJheUl0ZW0udGFncy5tYXAoZnVuY3Rpb24odikge1xuICAgICAgICAgICAgcmV0dXJuIHYubmFtZTsgLy8gYHRhZ2Agb2JqZWN0IGhhcyBhbiBgbmFtZWAgcHJvcGVydHkgd2hpY2ggaXMgdGhlIHZhbHVlIG9mIHRhZy4gSWYgeW91IGFsc28gd2FudCBvdGhlciBpbmZvLCBjaGVjayBBUEkgYW5kIGdldCB0aGF0IHByb3BlcnR5XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYoYXJyYXlJdGVtLm1ldGFfZGVzY3JpcHRpb24gPT09IG51bGwpIHsgYXJyYXlJdGVtLm1ldGFfZGVzY3JpcHRpb24gPSAnJzsgfVxuICAgICAgICAgIHZhciBjYXRlZ29yeSA9IHRhZ19hcnIuam9pbihcIiwgXCIpO1xuICAgICAgICAgIGlmIChjYXRlZ29yeS5sZW5ndGggPCAxKXtcbiAgICAgICAgICAgIGNhdGVnb3J5ID0gXCJ1bmRlZmluZWRcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIHBhcnNlZERhdGEgID0ge1xuICAgICAgICAgICAgaWQgICAgICA6IFN0cmluZyhhcnJheUl0ZW0uaWQpLFxuICAgICAgICAgICAgdGl0bGUgICAgIDogU3RyaW5nKGFycmF5SXRlbS50aXRsZSksXG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA6IFN0cmluZyhhcnJheUl0ZW0uY3VzdG9tX2V4Y2VycHQpLFxuICAgICAgICAgICAgcGxhaW50ZXh0ICAgOiBTdHJpbmcoYXJyYXlJdGVtLnBsYWludGV4dCksXG4gICAgICAgICAgICBwdWJEYXRlICAgOiBTdHJpbmcoYXJyYXlJdGVtLnB1Ymxpc2hlZF9hdCksXG4gICAgICAgICAgICB0YWcgICAgIDogY2F0ZWdvcnlcbiAgICAgICAgICB9O1xuICAgICAgICAgIHRoaXMuYWRkKHBhcnNlZERhdGEpO1xuICAgICAgICAgIHZhciBsb2NhbFVybCA9IG1lLnN1YnBhdGggKyBhcnJheUl0ZW0udXJsO1xuICAgICAgICAgIG1lLmJsb2dEYXRhW2FycmF5SXRlbS5pZF0gPSB7XG4gICAgICAgICAgICB0aXRsZTogYXJyYXlJdGVtLnRpdGxlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGFycmF5SXRlbS5tZXRhX2Rlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcHViRGF0ZTogcHJldHR5RGF0ZShwYXJzZWREYXRhLnB1YkRhdGUpLFxuICAgICAgICAgICAgbGluazogbG9jYWxVcmwsXG4gICAgICAgICAgICB0YWdzOiB0YWdfYXJyXG4gICAgICAgICAgfTtcbiAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIG1ldGFkYXRhIFwicHJlXCItcHJvY2Vzc29yIGZvciB0aGUgaXRlbSwgcnVuIGl0IGhlcmUuXG4gICAgICAgICAgaWYgKG1lLml0ZW1fcHJlcHJvY2Vzc29yKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG1lLmJsb2dEYXRhW2FycmF5SXRlbS5pZF0sIG1lLml0ZW1fcHJlcHJvY2Vzc29yKGFycmF5SXRlbSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImRvbmUgaW5kZXhpbmcgdGhlIGl0ZW1cIik7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgfSk7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgc3VicGF0aEtleSA9IGdldFN1YnBhdGhLZXkobWUuc3VicGF0aCk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKChcImdob3N0X1wiICsgc3VicGF0aEtleSArIFwiX2x1bnJJbmRleFwiKSwgSlNPTi5zdHJpbmdpZnkobWUuaW5kZXgpKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oKFwiZ2hvc3RfXCIgKyBzdWJwYXRoS2V5ICsgXCJfYmxvZ0RhdGFcIiksIEpTT04uc3RyaW5naWZ5KG1lLmJsb2dEYXRhKSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKChcImdob3N0X1wiICsgc3VicGF0aEtleSArIFwiX2xhdGVzdFBvc3RcIiksIG1lLmxhdGVzdFBvc3QpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJnaG9zdEh1bnRlcjogc2F2ZSB0byBsb2NhbFN0b3JhZ2UgZmFpbGVkOiBcIiArIGUpO1xuICAgICAgfVxuICAgICAgaWYgKG1lLmluZGV4aW5nX2VuZCkge1xuICAgICAgICBtZS5pbmRleGluZ19lbmQoKTtcbiAgICAgIH1cbiAgICAgIG1lLmlzSW5pdCA9IHRydWU7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHBsdWdpbk1ldGhvZHMgPSB7XG5cbiAgICBpc0luaXQgICAgICA6IGZhbHNlLFxuXG4gICAgaW5pdCAgICAgIDogZnVuY3Rpb24oIHRhcmdldCAsIG9wdHMgKXtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgb3B0cyk7XG4gICAgICBjb25zb2xlLmxvZyhcImdob3N0SHVudGVyOiBpbml0XCIpO1xuICAgICAgdmFyIG1pYW0gPSBmdW5jdGlvbigpe307XG4gICAgICBpZiAoIG9wdHMub25QYWdlTG9hZCApIHtcbiAgICAgICAgbWlhbSA9IGZ1bmN0aW9uICgpe1xuICAgICAgICAgIHRoYXQubG9hZEFQSSgpO1xuICAgICAgICB9O1xuICAgICAgICB3aW5kb3cuc2V0VGltZW91dChtaWFtLCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldC5mb2N1cyhmdW5jdGlvbigpe1xuICAgICAgICAgIHRoYXQubG9hZEFQSSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGFyZ2V0LmNsb3Nlc3QoXCJmb3JtXCIpLnN1Ym1pdChmdW5jdGlvbihlKXtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGF0LmZpbmQodGFyZ2V0LnZhbCgpKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiggb3B0cy5vbktleVVwICkge1xuICAgICAgICAvLyBJbiBzZWFyY2gtYXMteW91LXR5cGUgbW9kZSwgdGhlIEVudGVyIGtleSBpcyBtZWFuaW5nbGVzcyxcbiAgICAgICAgLy8gc28gd2UgZGlzYWJsZSBpdCBpbiB0aGUgc2VhcmNoIGZpZWxkLiBJZiBlbmFibGVkLCBzb21lIGJyb3dzZXJzXG4gICAgICAgIC8vIHdpbGwgc2F2ZSBkYXRhIHRvIGhpc3RvcnkgKGV2ZW4gd2hlbiBhdXRvY29tcGxldGU9XCJmYWxzZVwiKSwgd2hpY2hcbiAgICAgICAgLy8gaXMgYW4gaW50cnVzaXZlIGhlYWRhY2hlLCBwYXJ0aWN1bGFybHkgb24gbW9iaWxlLlxuICAgICAgICB0YXJnZXQua2V5ZG93bihmdW5jdGlvbihldmVudCl7XG4gICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAxMykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRhcmdldC5rZXl1cChmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIHRoYXQuZmluZCh0YXJnZXQudmFsKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgfVxuXG4gICAgfSxcblxuICAgIGxvYWRBUEkgICAgIDogZnVuY3Rpb24oKXtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdnaG9zdEh1bnRlcjogbG9hZEFQSScpO1xuICAgICAgaWYoIXRoaXMuaXNJbml0KSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdnaG9zdEh1bnRlcjogdGhpcy5pc0luaXQgaXMgdHJ1ZScpO1xuICAgICAgICBpZiAodGhpcy5pbmRleGluZ19zdGFydCkge1xuICAgICAgICAgIHRoaXMuaW5kZXhpbmdfc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBpc0luaXQgaXMgZmFsc3ksIGNoZWNrIGZvciBkYXRhIGluIGxvY2FsU3RvcmUsXG4gICAgICAgIC8vIHBhcnNlIGludG8gbWVtb3J5LCBhbmQgZGVjbGFyZSBpc0luaXQgdG8gYmUgdHJ1ZS5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgc3VicGF0aEtleSA9IGdldFN1YnBhdGhLZXkodGhpcy5zdWJwYXRoKTtcbiAgICAgICAgICB0aGlzLmluZGV4ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oKFwiZ2hvc3RfXCIgKyBzdWJwYXRoS2V5ICsgXCJfbHVuckluZGV4XCIpKTtcbiAgICAgICAgICB0aGlzLmJsb2dEYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oKFwiZ2hvc3RfXCIgKyBzdWJwYXRoS2V5ICsgXCJfYmxvZ0RhdGFcIikpO1xuICAgICAgICAgIHRoaXMubGF0ZXN0UG9zdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKChcImdob3N0X1wiICsgc3VicGF0aEtleSArIFwiX2xhdGVzdFBvc3RcIikpO1xuICAgICAgICAgIGlmICh0aGlzLmxhdGVzdFBvc3QgJiYgdGhpcy5pbmRleCAmJiB0aGlzLmJsb2dEYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmxhdGVzdFBvc3QgPSB0aGlzLmxhdGVzdFBvc3Q7XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gbHVuci5JbmRleC5sb2FkKEpTT04ucGFyc2UodGhpcy5pbmRleCkpO1xuICAgICAgICAgICAgdGhpcy5ibG9nRGF0YSA9IEpTT04ucGFyc2UodGhpcy5ibG9nRGF0YSk7XG4gICAgICAgICAgICB0aGlzLmlzSW5pdCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJnaG9zdEh1bnRlcjogcmV0cmlldmUgZnJvbSBsb2NhbFN0b3JhZ2UgZmFpbGVkOiBcIiArIGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pc0luaXQpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2dob3N0SHVudGVyOiB0aGlzLmlzSW5pdCByZWNoZWNrIGlzIHRydWUnKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIG5ldyBvciBlZGl0ZWQgcG9zdHNcbiAgICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgICBsaW1pdDogXCJhbGxcIixcbiAgICAgICAgICBmaWx0ZXI6IFwidXBkYXRlZF9hdDo+XFwnXCIgKyB0aGlzLmxhdGVzdFBvc3QucmVwbGFjZSgvXFwuLiovLCBcIlwiKS5yZXBsYWNlKC9ULywgXCIgXCIpICsgXCJcXCdcIixcbiAgICAgICAgICBmaWVsZHM6IFwiaWRcIlxuICAgICAgICB9O1xuICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICAkLmdldChnaG9zdC51cmwuYXBpKCdwb3N0cycsIHBhcmFtcykpLmRvbmUoZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgaWYgKGRhdGEucG9zdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZ3JhYkFuZEluZGV4LmNhbGwobWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAobWUuaW5kZXhpbmdfZW5kKSB7XG4gICAgICAgICAgICAgIG1lLmluZGV4aW5nX2VuZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWUuaXNJbml0ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2dob3N0SHVudGVyOiB0aGlzLmlzSW5pdCByZWNoZWNrIGlzIGZhbHNlJyk7XG4gICAgICAgIGdyYWJBbmRJbmRleC5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH0sXG5cblxuICAgIGZpbmQgICAgICA6IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgIGNsZWFyVGltZW91dChsYXN0VGltZW91dElEKTtcbiAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgdmFsdWUgPSBcIlwiO1xuICAgICAgfVxuICAgICAgdmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgbGFzdFRpbWVvdXRJRCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFF1ZXJ5IHN0cmF0ZWd5IGlzIGxpZnRlZCBmcm9tIGNvbW1lbnRzIG9uIGEgbHVuci5qcyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL29saXZlcm5uL2x1bnIuanMvaXNzdWVzLzI1NlxuICAgICAgICB2YXIgdGhpbmdzRm91bmQgPSBbXTtcbiAgICAgICAgLy8gVGhlIHF1ZXJ5IGludGVyZmFjZSBleHBlY3RzIHNpbmdsZSB0ZXJtcywgc28gd2Ugc3BsaXQuXG4gICAgICAgIHZhciB2YWx1ZVNwbGl0ID0gdmFsdWUuc3BsaXQoL1xccysvKTtcblxuICAgICAgICBmb3IgKHZhciBpPTAsaWxlbj12YWx1ZVNwbGl0Lmxlbmd0aDtpPGlsZW47aSsrKSB7XG4gICAgICAgICAgLy8gRmV0Y2ggYSBsaXN0IG9mIG1hdGNoZXMgZm9yIGVhY2ggdGVybS5cbiAgICAgICAgICB2YXIgdiA9IHZhbHVlU3BsaXRbaV07XG4gICAgICAgICAgaWYgKCF2KSBjb250aW51ZTtcbiAgICAgICAgICB0aGluZ3NGb3VuZC5wdXNoKHRoaXMuaW5kZXgucXVlcnkoZnVuY3Rpb24gKHEpIHtcbiAgICAgICAgICAgIC8vIEZvciBhbiBleHBsYW5hdGlvbiBvZiBsdW5yIGluZGV4aW5nIG9wdGlvbnMsIHNlZSB0aGUgbHVuci5qc1xuICAgICAgICAgICAgLy8gZG9jdW1lbnRhdGlvbiBhdCBodHRwczovL2x1bnJqcy5jb20vZG9jcy9sdW5yLlF1ZXJ5Lmh0bWwjfkNsYXVzZVxuXG4gICAgICAgICAgICAvLyBsb29rIGZvciBhbiBleGFjdCBtYXRjaCBhbmQgYXBwbHkgYSBsYXJnZSBwb3NpdGl2ZSBib29zdFxuICAgICAgICAgICAgcS50ZXJtKHYsIHtcbiAgICAgICAgICAgICAgdXNlUGlwZWxpbmU6IHRydWUsXG4gICAgICAgICAgICAgIGJvb3N0OiAxMDAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGxvb2sgZm9yIHRlcm1zIHRoYXQgbWF0Y2ggdGhlIGJlZ2lubmluZyBvZiB0aGlzIHF1ZXJ5VGVybSBhbmQgYXBwbHkgYSBtZWRpdW0gYm9vc3RcbiAgICAgICAgICAgIHEudGVybSh2LCB7XG4gICAgICAgICAgICAgIHVzZVBpcGVsaW5lOiBmYWxzZSxcbiAgICAgICAgICAgICAgYm9vc3Q6IDEwLFxuICAgICAgICAgICAgICB3aWxkY2FyZDogbHVuci5RdWVyeS53aWxkY2FyZC5UUkFJTElOR1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBsb29rIGZvciB0ZXJtcyB0aGF0IG1hdGNoIHdpdGggYW4gZWRpdCBkaXN0YW5jZSBvZiAxIGFuZCBhcHBseSBhIHNtYWxsIGJvb3N0XG4gICAgICAgICAgICBxLnRlcm0odiwge1xuICAgICAgICAgICAgICB1c2VQaXBlbGluZTogZmFsc2UsXG4gICAgICAgICAgICAgIGVkaXREaXN0YW5jZTogMSxcbiAgICAgICAgICAgICAgYm9vc3Q6IDFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2VhcmNoUmVzdWx0O1xuICAgICAgICBpZiAodGhpbmdzRm91bmQubGVuZ3RoID4gMSkge1xuICAgICAgICAgIC8vIElmIHdlIGhhZCBtdWx0aXBsZSB0ZXJtcywgd2UnbGwgaGF2ZSBtdWx0aXBsZSBsaXN0cy4gV2UgZmlsdGVyXG4gICAgICAgICAgLy8gdGhlbSBoZXJlIHRvIHVzZSBvbmx5IGl0ZW1zIHRoYXQgcHJvZHVjZSByZXR1cm5zIGZvciBhbGxcbiAgICAgICAgICAvLyB0ZXJtcy4gVGhpcyBzcG9vZnMgYW4gQU5EIGpvaW4gYmV0d2VlbiB0ZXJtcywgd2hpY2ggbHVuci5qcyBjYW4ndFxuICAgICAgICAgIC8vIHlldCBkbyBpbnRlcm5hbGx5LlxuICAgICAgICAgIC8vIEJ5IHVzaW5nIHRoZSBmaXJzdCBsaXN0IG9mIGl0ZW1zIGFzIG1hc3Rlciwgd2UgZ2V0IHdlaWdodGluZ3NcbiAgICAgICAgICAvLyBiYXNlZCBvbiB0aGUgZmlyc3QgdGVybSBlbnRlcmVkLCB3aGljaCBpcyBtb3JlIG9yIGxlc3NcbiAgICAgICAgICAvLyB3aGF0IHdlIHdvdWxkIGV4cGVjdC5cbiAgICAgICAgICBzZWFyY2hSZXN1bHQgPSB0aGluZ3NGb3VuZFswXTtcbiAgICAgICAgICB0aGluZ3NGb3VuZCA9IHRoaW5nc0ZvdW5kLnNsaWNlKDEpO1xuICAgICAgICAgIGZvciAoIGk9c2VhcmNoUmVzdWx0Lmxlbmd0aC0xO2k+LTE7aS0tKSB7XG4gICAgICAgICAgICB2YXIgcmVmID0gc2VhcmNoUmVzdWx0W2ldLnJlZjtcbiAgICAgICAgICAgIGZvciAoaj0wLGpsZW49dGhpbmdzRm91bmQubGVuZ3RoO2o8amxlbjtqKyspIHtcbiAgICAgICAgICAgICAgdmFyIG90aGVyUmVmcyA9IHt9O1xuICAgICAgICAgICAgICBmb3IgKHZhciBrPTAsa2xlbj10aGluZ3NGb3VuZFtqXS5sZW5ndGg7azxrbGVuO2srKykge1xuICAgICAgICAgICAgICAgIG90aGVyUmVmc1t0aGluZ3NGb3VuZFtqXVtrXS5yZWZdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoIW90aGVyUmVmc1tyZWZdKSB7XG4gICAgICAgICAgICAgICAgc2VhcmNoUmVzdWx0ID0gc2VhcmNoUmVzdWx0LnNsaWNlKDAsIGkpLmNvbmNhdChzZWFyY2hSZXN1bHQuc2xpY2UoaSsxKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpbmdzRm91bmQubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgLy8gSWYgd2UgaGFkIGp1c3Qgb25lIHRlcm0gYW5kIG9uZSBsaXN0LCByZXR1cm4gdGhhdC5cbiAgICAgICAgICBzZWFyY2hSZXN1bHQgPSB0aGluZ3NGb3VuZFswXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiB0aGVyZSB3YXMgbm8gc2VhcmNoIHJlc3VsdCwgcmV0dXJuIGFuIGVtcHR5IGxpc3QuXG4gICAgICAgICAgc2VhcmNoUmVzdWx0ID0gW107XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVzdWx0cyAgICAgPSAkKHRoaXMucmVzdWx0cyk7XG4gICAgICAgIHZhciByZXN1bHRzRGF0YSAgID0gW107XG4gICAgICAgIGlmIChzZWFyY2hSZXN1bHQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmVzdWx0cy5lbXB0eSgpO1xuICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXlTZWFyY2hJbmZvICYmIHRoaXMuemVyb1Jlc3VsdHNJbmZvKSB7XG4gICAgICAgICAgICByZXN1bHRzLmFwcGVuZCh0aGlzLmZvcm1hdCh0aGlzLmluZm9fdGVtcGxhdGUse1wiYW1vdW50XCI6MH0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kaXNwbGF5U2VhcmNoSW5mbykge1xuICAgICAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlc3VsdHMuY2hpbGRyZW4oKS5lcSgwKS5yZXBsYWNlV2l0aCh0aGlzLmZvcm1hdCh0aGlzLmluZm9fdGVtcGxhdGUse1wiYW1vdW50XCI6c2VhcmNoUmVzdWx0Lmxlbmd0aH0pKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQodGhpcy5mb3JtYXQodGhpcy5pbmZvX3RlbXBsYXRlLHtcImFtb3VudFwiOnNlYXJjaFJlc3VsdC5sZW5ndGh9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5iZWZvcmUpIHtcbiAgICAgICAgICB0aGlzLmJlZm9yZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2V0IHRoZSBibG9nRGF0YSBmb3IgdGhlIGZ1bGwgc2V0LCBmb3Igb25Db21wbGV0ZVxuICAgICAgICBmb3IgKCBpID0gMDsgaSA8IHNlYXJjaFJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBsdW5ycmVmICAgPSBzZWFyY2hSZXN1bHRbaV0ucmVmO1xuICAgICAgICAgIHZhciBwb3N0RGF0YSAgICA9IHRoaXMuYmxvZ0RhdGFbbHVucnJlZl07XG4gICAgICAgICAgaWYgKHBvc3REYXRhKSB7XG4gICAgICAgICAgICBwb3N0RGF0YS5yZWYgPSBsdW5ycmVmO1xuICAgICAgICAgICAgcmVzdWx0c0RhdGEucHVzaChwb3N0RGF0YSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcImdob3N0SHVudGVyOiBpbmRleC9kYXRhIG1pc21hdGNoLiBPdWNoLlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gR2V0IGFuIGFycmF5IG9mIElEcyBwcmVzZW50IGluIGN1cnJlbnQgcmVzdWx0c1xuICAgICAgICB2YXIgbGlzdEl0ZW1zID0gJCgnLmdoLXNlYXJjaC1pdGVtJyk7XG4gICAgICAgIHZhciBjdXJyZW50UmVmcyA9IGxpc3RJdGVtc1xuICAgICAgICAgIC5tYXAoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlkLnNsaWNlKDMpO1xuICAgICAgICAgIH0pLmdldCgpO1xuICAgICAgICBpZiAoY3VycmVudFJlZnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgZm9yICggaT0wLGlsZW49cmVzdWx0c0RhdGEubGVuZ3RoO2k8aWxlbjtpKyspIHtcbiAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKHRoaXMuZm9ybWF0KHRoaXMucmVzdWx0X3RlbXBsYXRlLHJlc3VsdHNEYXRhW2ldKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldHRsZUlEcygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEdldCBhbiBhcnJheSBvZiBJRHMgcHJlc2VudCBpbiBzZWFyY2hSZXN1bHRcbiAgICAgICAgICB2YXIgbmV3UmVmcyA9IFtdO1xuICAgICAgICAgIGZvciAoIGk9MCxpbGVuPXNlYXJjaFJlc3VsdC5sZW5ndGg7aTxpbGVuO2krKykge1xuICAgICAgICAgICAgbmV3UmVmcy5wdXNoKHNlYXJjaFJlc3VsdFtpXS5yZWYpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBHZXQgdGhlIExldmVuc2h0ZWluIHN0ZXBzIG5lZWRlZCB0byB0cmFuc2Zvcm0gY3VycmVudCBpbnRvIHNlYXJjaFJlc3VsdFxuICAgICAgICAgIHZhciBsZXZlbnNodGVpbiA9IG5ldyBMZXZlbnNodGVpbihjdXJyZW50UmVmcywgbmV3UmVmcyk7XG4gICAgICAgICAgdmFyIHN0ZXBzID0gbGV2ZW5zaHRlaW4uZ2V0U3RlcHMoKTtcbiAgICAgICAgICAvLyBBcHBseSB0aGUgb3BlcmF0aW9uc1xuICAgICAgICAgIHVwZGF0ZVNlYXJjaExpc3QuY2FsbCh0aGlzLCBsaXN0SXRlbXMsIHNlYXJjaFJlc3VsdCwgc3RlcHMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRpZHkgdXBcbiAgICAgICAgaWYodGhpcy5vbkNvbXBsZXRlKSB7XG4gICAgICAgICAgdGhpcy5vbkNvbXBsZXRlKHJlc3VsdHNEYXRhKTtcbiAgICAgICAgfVxuICAgICAgfS5iaW5kKHRoaXMpLCAxMDApO1xuICAgIH0sXG5cbiAgICBjbGVhciAgICAgICA6IGZ1bmN0aW9uKCl7XG4gICAgICAkKHRoaXMucmVzdWx0cykuZW1wdHkoKTtcbiAgICAgIC8vIHRoaXMudGFyZ2V0LnZhbChcIlwiKTtcbiAgICB9LFxuXG4gICAgZm9ybWF0ICAgICAgOiBmdW5jdGlvbiAodCwgZCkge1xuICAgICAgcmV0dXJuIHQucmVwbGFjZSgve3soW157fV0qKX19L2csIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHZhciByID0gZFtiXTtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiByID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgciA9PT0gJ251bWJlcicgPyByIDogYTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxufSkoIGpRdWVyeSApO1xuIl19
